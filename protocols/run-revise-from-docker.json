{"id":51081,"title":"Run ReVisE from Docker ","title_html":"<p>Run ReVisE from Docker <\/p>","image":{"source":"https:\/\/s3.amazonaws.com\/protocols-files\/files\/dwaxbikuf.jpg","placeholder":"https:\/\/s3.amazonaws.com\/protocols-files\/files\/dwaxbikuf.jpg"},"doi":"dx.doi.org\/10.17504\/protocols.io.bv5hn836","doi_status":2,"uri":"run-revise-from-docker-bv5hn836","type_id":1,"template_id":5,"published_on":1625038908,"parent_protocols":[],"parent_collections":[],"cited_protocols":[],"version_id":0,"version_data":{"id":"0","code":"bv5hn836","parent_id":0,"parent_uri":null,"is_same_owner":false,"has_pending_merge_request":false,"has_approved_merge_request":false},"created_on":1624707438,"modified_on":null,"categories":null,"public":1,"is_unlisted":0,"creator":{"name":"Alexey Kuzin","affiliation":"Peter the Great St.Petersburg Polytechnic University","affiliations":[{"affiliation":"Peter the Great St.Petersburg Polytechnic University","url":"https:\/\/www.spbstu.ru\/","is_default":1}],"username":"alexey-kuzin","note":null,"link":null,"image":{"source":"\/img\/avatars\/014.png","placeholder":"\/img\/avatars\/014.png"},"badges":[{"id":2,"image":{"source":"\/img\/badges\/bronze.svg","placeholder":"\/img\/badges\/bronze.svg"},"name":"Author"}],"verified":0,"is_verified_user":false,"research_interests":null,"blocked_by_you":false,"blocked_you":false,"hide_following":false},"journal":null,"journal_name":null,"journal_link":null,"article_citation":null,"has_versions":0,"link":null,"total_collections":0,"number_of_steps":12,"authors":[{"name":"Alexey Kuzin","affiliation":"Peter the Great St.Petersburg Polytechnic University","affiliations":[],"username":"alexey-kuzin","note":"","link":null,"image":{"source":"\/img\/avatars\/014.png","placeholder":"\/img\/avatars\/014.png"},"badges":[],"verified":1,"is_verified_user":true,"research_interests":null,"blocked_by_you":false,"blocked_you":false,"hide_following":false},{"name":"Stepan Orlov","affiliation":"Peter the Great St.Petersburg Polytechnic University","affiliations":[],"username":"m4vle102v1x4vle1","note":"","link":null,"image":{"source":"\/img\/avatars\/015.png","placeholder":"\/img\/avatars\/015.png"},"badges":[],"verified":1,"is_verified_user":true,"research_interests":null,"blocked_by_you":false,"blocked_you":false,"hide_following":false},{"name":"\u0415\u0433\u043e\u0440 \u0423\u0441\u0438\u043a","affiliation":"Peter the Great St.Petersburg Polytechnic University","affiliations":[],"username":"m4vle102x1y4yle1","note":"","link":null,"image":{"source":"https:\/\/lh3.googleusercontent.com\/a-\/AOh14GhwrFtwg6hk64evE28vP771yGUEDbiTNgi_peqpNQ=s96-c","placeholder":"https:\/\/lh3.googleusercontent.com\/a-\/AOh14GhwrFtwg6hk64evE28vP771yGUEDbiTNgi_peqpNQ=s96-c"},"badges":[],"verified":1,"is_verified_user":true,"research_interests":null,"blocked_by_you":false,"blocked_you":false,"hide_following":false},{"name":"Alexey Zhuravlev","affiliation":"Peter the Great St.Petersburg Polytechnic University","affiliations":[],"username":"m4vle1z1q1x4tle1","note":"","link":null,"image":{"source":"\/img\/avatars\/015.png","placeholder":"\/img\/avatars\/015.png"},"badges":[],"verified":1,"is_verified_user":true,"research_interests":null,"blocked_by_you":false,"blocked_you":false,"hide_following":false}],"versions":[],"groups":[{"id":18052,"uri":"revise","title":"ReVisE","image":{"source":"https:\/\/www.protocols.io\/img\/group_placeholder.png","placeholder":"https:\/\/www.protocols.io\/img\/group_placeholder.png"},"tech_support":{"email":null,"phone":null,"hide_contact":0,"use_email":0,"url":null},"is_member":1,"request":{"id":18052,"uri":"revise","title":"ReVisE","image":{"source":"https:\/\/www.protocols.io\/img\/group_placeholder.png","placeholder":"https:\/\/www.protocols.io\/img\/group_placeholder.png"},"tech_support":{"email":null,"phone":null,"hide_contact":0,"use_email":0,"url":null},"is_member":1,"description":null,"research_interests":null,"website":null,"location":null,"affiliation":null,"status":{"is_visible":true,"access_level":0},"stats":{"files":[],"total_members":0,"total_followers":0,"total_child_groups":0,"total_parent_groups":0,"has_collaborations":0},"user_status":{"is_member":true,"is_confirmed":true,"is_invited":false,"is_owner":false,"is_admin":false,"is_following":false},"join_link":null,"token":null,"owner":{"name":" ","affiliation":null,"affiliations":[],"username":null,"note":null,"link":null,"image":{"source":null,"placeholder":null},"badges":[],"verified":0,"is_verified_user":false,"research_interests":null,"blocked_by_you":false,"blocked_you":false,"hide_following":false},"is_protocol_requested":0,"is_group_requested":0,"is_my":false,"is_request":false,"is_confirmed":1,"is_declined":0,"requester":{"name":" ","affiliation":null,"affiliation_url":null,"username":null,"link":null},"protocol":{"id":0,"title":"Run ReVisE from Docker ","title_html":"Run ReVisE from Docker ","image":{"source":null,"placeholder":null},"doi":null,"doi_status":0,"uri":"run-revise-from-docker-bv5hn836","type_id":1,"template_id":0,"published_on":null,"stats":{"number_of_views":0,"number_of_steps":0,"number_of_bookmarks":0,"number_of_comments":0,"number_of_exports":0,"number_of_runs":0,"number_of_votes":0,"is_voted":0},"parent_protocols":[],"parent_collections":[],"cited_protocols":[]},"created_on":1625038908,"resolve_on":0,"resolved_user":{"name":" ","affiliation":null,"affiliations":[],"username":null,"note":null,"link":null,"image":{"source":null,"placeholder":null},"badges":[],"verified":0,"is_verified_user":false,"research_interests":null,"blocked_by_you":false,"blocked_you":false,"hide_following":false},"shared":false}}],"is_owner":1,"has_subprotocols":0,"is_subprotocol":0,"is_bookmarked":0,"can_claim_authorship":0,"can_accept_authorship":0,"can_be_copied":1,"can_remove_fork":1,"fork_id":null,"url":"https:\/\/www.protocols.io\/view\/run-revise-from-docker-bv5hn836","forks_count":{"private":0,"public":0},"access":{"can_view":1,"can_remove":0,"can_add":0,"can_edit":0,"can_publish":0,"can_get_doi":0,"can_share":1,"can_move":1,"can_move_outside":1,"can_transfer":1,"can_download":1,"is_locked":0},"guid":"C9B7B340D67111EBA26A7BB1146B1A4E","state_version_id":1601,"steps":[{"id":1202809,"guid":"6A4F9350D68011EBA26A7BB1146B1A4E","previous_id":null,"previous_guid":null,"modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"7B4D50E26B004127BA39FEA9E1497FB9","order_id":1,"type_id":6,"title":"Section","source":{"title":"Docker installation"}},{"id":1054724,"guid":"9A961662D9914A3F8A6C0C405F3E42EF","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\">The machine where ReVisE server is to be run must have Docker Engine installed. One can install Docker Engine according to <\/div><div class = \"text-block\"><a href=\"https:\/\/docs.docker.com\/engine\/install\/ubuntu\/\" style = \"text-decoration:underline;color:blue;cursor:pointer;\"><span style = \":;\">this reference<\/span><\/a><\/div><div class = \"text-block\">. Or install Docker Community Edition (CE) according to the next sub-steps:<\/div><\/div>"}}],"cases":[],"data":null,"html":null,"section":null,"section_color":"#A492FF","section_duration":0,"critical":null,"critical_id":null,"duration":0},{"id":1202810,"guid":"240CE710D68211EBA26A7BB1146B1A4E","previous_id":1202809,"previous_guid":"6A4F9350D68011EBA26A7BB1146B1A4E","modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"78D76E734EE54DD4B4723A658FEB0627","order_id":1,"type_id":6,"title":"Section","source":{"title":"Docker installation"}},{"id":1054724,"guid":"FA771CC7A7F84111913C3CD2AFDDCBF4","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\">Remove old Docker packages, if they present:<\/div><div class = \"text-block\"><pre><code><div class = \"text-blocks\"><div class = \"text-block\">sudo apt remove docker docker-engine docker.io containerd runc<\/div><\/div><\/code><\/pre><\/div><\/div>"}}],"cases":[],"data":null,"html":null,"section":null,"section_color":"#A492FF","section_duration":0,"critical":null,"critical_id":null,"duration":0},{"id":1202811,"guid":"53F8F810D68211EBA26A7BB1146B1A4E","previous_id":1202810,"previous_guid":"240CE710D68211EBA26A7BB1146B1A4E","modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"46CEEF882FFA407488E87A3233498481","order_id":1,"type_id":6,"title":"Section","source":{"title":"Docker installation"}},{"id":1054724,"guid":"D8A1F0DE32254F4DAD2E3F7E67562DC5","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\">Install some necessary packages:<\/div><div class = \"text-block\"><pre><code><div class = \"text-blocks\"><div class = \"text-block\">sudo apt install apt-transport-https ca-certificates curl software-properties-common<\/div><\/div><\/code><\/pre><\/div><\/div>"}}],"cases":[],"data":null,"html":null,"section":null,"section_color":"#A492FF","section_duration":0,"critical":null,"critical_id":null,"duration":0},{"id":1202812,"guid":"56C23F50D68411EBA26A7BB1146B1A4E","previous_id":1202811,"previous_guid":"53F8F810D68211EBA26A7BB1146B1A4E","modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"8E0A8128BB1B4A45A5D3D37E5C25D101","order_id":1,"type_id":6,"title":"Section","source":{"title":"Docker installation"}},{"id":1054724,"guid":"7041D52515504971BB3E9C4297341BC1","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\">Add Docker repository to apt and install Docker:<\/div><div class = \"text-block\"><pre><code><div class = \"text-blocks\"><div class = \"text-block\">curl -fsSL https:\/\/download.docker.com\/linux\/ubuntu\/gpg | sudo apt-key add -<\/div><div class = \"text-block\">sudo add-apt-repository \"deb [arch=amd64] https:\/\/download.docker.com\/linux\/ubuntu $(lsb_release -cs) stable\"<\/div><div class = \"text-block\">sudo apt update<\/div><div class = \"text-block\">sudo apt install -y docker-ce<\/div><\/div><\/code><\/pre><\/div><\/div>"}}],"cases":[],"data":null,"html":null,"section":null,"section_color":"#A492FF","section_duration":0,"critical":null,"critical_id":null,"duration":0},{"id":1202813,"guid":"C36A1AB0D68411EBA26A7BB1146B1A4E","previous_id":1202812,"previous_guid":"56C23F50D68411EBA26A7BB1146B1A4E","modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"03E67AA498A140A08AE6372864078BFF","order_id":1,"type_id":6,"title":"Section","source":{"title":"Docker installation"}},{"id":1054724,"guid":"3F9D9A1C923F482CA89D3867F1772D7A","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\">Test installation<\/div><div class = \"text-block\"><pre><code><div class = \"text-blocks\"><div class = \"text-block\">sudo docker run hello-world<\/div><\/div><\/code><\/pre><\/div><\/div>"}}],"cases":[],"data":null,"html":null,"section":null,"section_color":"#A492FF","section_duration":0,"critical":null,"critical_id":null,"duration":0},{"id":1202814,"guid":"0EA10480D68511EBA26A7BB1146B1A4E","previous_id":1202813,"previous_guid":"C36A1AB0D68411EBA26A7BB1146B1A4E","modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"AA44BF18A77B44B2830363488F4660FE","order_id":1,"type_id":6,"title":"Section","source":{"title":""}},{"id":1054724,"guid":"5C8543F9F34D4C3793F6D061A3CD8878","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\"> Install NVIDIA container runtime.<\/div><div class = \"text-block\"><pre><code><div class = \"text-blocks\"><div class = \"text-block\"><pre><code>curl -s -L https:\/\/nvidia.github.io\/nvidia-container-runtime\/gpgkey | sudo apt-key add -<\/code><\/pre><\/div><div class = \"text-block\"><pre><code>distribution=$(. \/etc\/os-release;echo $ID$VERSION_ID)<\/code><\/pre><\/div><div class = \"text-block\"><pre><code>curl -s -L https:\/\/nvidia.github.io\/nvidia-container-runtime\/$distribution\/nvidia-container-runtime.list | sudo tee \/etc\/apt\/sources.list.d\/nvidia-container-runtime.list<\/code><\/pre><\/div><div class = \"text-block\"> sudo apt update<\/div><div class = \"text-block\"><pre><code>sudo apt install nvidia-container-runtime<\/code><\/pre><\/div><\/div><\/code><\/pre><\/div><div class = \"text-block\">Restart docker after the installation:<\/div><div class = \"text-block\"><pre><code><div class = \"text-blocks\"><div class = \"text-block\">sudo systemctl stop docker<\/div><div class = \"text-block\">sudo systemctl start docker<\/div><\/div><\/code><\/pre><\/div><\/div>"}}],"cases":[],"data":null,"html":null,"section":null,"section_color":"","section_duration":0,"critical":null,"critical_id":null,"duration":0},{"id":1202905,"guid":"1E1ED7D0D68E11EBA26A7BB1146B1A4E","previous_id":1202906,"previous_guid":"21BC22D0D68E11EBA26A7BB1146B1A4E","modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"C2FFBCC203944D87AC31C2A4C6F9D0F3","order_id":1,"type_id":6,"title":"Section","source":{"title":"ReVisE container loading and startup"}},{"id":1054724,"guid":"FA2BCBD3C1BD41FB9F6D00F5E8414247","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\">Load Docker image. This step should be done once on the first run of the container.  Now we provide Docker images for CUDA 11. 1 and CUDA >= 11.2<\/div><div class = \"text-block\">CUDA 11.1:<\/div><div class = \"text-block\"><pre><code><div class = \"text-blocks\"><div class = \"text-block\">sudo docker pull deadmorous\/revise:cuda11.1<\/div><\/div><\/code><\/pre><\/div><div class = \"text-block\">CUDA 11.2 and newer:<\/div><div class = \"text-block\"><pre><code><div class = \"text-blocks\"><div class = \"text-block\">sudo docker pull deadmorous\/revise:v1<\/div><\/div><\/code><\/pre><\/div><\/div>"}}],"cases":[],"data":null,"html":null,"section":null,"section_color":"#94EBFF","section_duration":0,"critical":null,"critical_id":null,"duration":0},{"id":1202906,"guid":"21BC22D0D68E11EBA26A7BB1146B1A4E","previous_id":1202814,"previous_guid":"0EA10480D68511EBA26A7BB1146B1A4E","modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"E908BB68123D427B8A258114D4ECC6E6","order_id":1,"type_id":6,"title":"Section","source":{"title":"ReVisE container loading and startup"}},{"id":1054724,"guid":"16CB36B7AD1540E4813A94988B7C25D9","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\">Open Linux terminal. This step is essential if ReVisE container is to be started on remote computer. In this case one needs to connect to remote computer via ssh with the next command:<\/div><div class = \"text-block\"><pre><code><div class = \"text-blocks\"><div class = \"text-block\">ssh -L 1234:hostname:1234 -L 3000:hostname:3000 username@hostname<\/div><\/div><\/code><\/pre><\/div><div class = \"text-block\">Therefore ports 1234 and 3000 should be forwarded. <\/div><div class = \"text-block\">Otherwise, if ReVisE server is used locally, use usual Linux terminal.<\/div><\/div>"}}],"cases":[],"data":null,"html":null,"section":null,"section_color":"#94EBFF","section_duration":0,"critical":null,"critical_id":null,"duration":0},{"id":1202919,"guid":"32D8C3F0D69511EBA26A7BB1146B1A4E","previous_id":1202905,"previous_guid":"1E1ED7D0D68E11EBA26A7BB1146B1A4E","modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"C0824002303D4C789BED14A76BD158F8","order_id":1,"type_id":6,"title":"Section","source":{"title":"ReVisE container loading and startup"}},{"id":1054724,"guid":"A2D8BEC573BA478184B6AF568628082B","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\">Docker image startup:<\/div><div class = \"text-block\"><pre><code><div class = \"text-blocks\"><div class = \"text-block\">sudo docker run --gpus all -ti --rm -v <HOME_PATH>:<HOME_PATH> -p 3000:3000 -p 1234:1234 <IMAGE>  \/bin\/bash<\/div><\/div><\/code><\/pre><\/div><div class = \"text-block\">Where <HOME_PATH> is home directory, for example, \/home\/username.<\/div><div class = \"text-block\"><IMAGE> - the Docker image name used: deadmorous\/revise:v1 or deadmorous\/revise:cuda11.1<\/div><div class = \"text-block\">In the case of successful startup you will be redirected to the image's console.<\/div><\/div>"}}],"cases":[],"data":null,"html":null,"section":null,"section_color":"#94EBFF","section_duration":0,"critical":null,"critical_id":null,"duration":0},{"id":1202932,"guid":"1F7AC2B0D6AC11EBA26A7BB1146B1A4E","previous_id":1202919,"previous_guid":"32D8C3F0D69511EBA26A7BB1146B1A4E","modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"6FBBBD1FDEE44D1B8BDAEEBF5B039489","order_id":1,"type_id":6,"title":"Section","source":{"title":"ReVisE server startup"}},{"id":1054724,"guid":"970881A6D9D447D1953CE2EA3E9E03BC","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\">By this time ReVisE server is ready to be run from Docker container. It is similar to startup of usual ReVisE installation. Therefore, the workflow of the protocol <\/div><div class = \"text-block\"><a href=\"http:\/\/dx.doi.org\/10.17504\/protocols.io.bruzm6x6\" style = \"text-decoration:underline;color:blue;cursor:pointer;\"><span style = \":;\">Prepare and run test on available dataset<\/span><\/a><\/div><div class = \"text-block\"> is applicable since the step 3. First of all set ReVisE environment:<\/div><div class = \"text-block\"><pre><code><div class = \"text-blocks\"><div class = \"text-block\">source scripts\/env.sh<\/div><\/div><\/code><\/pre><\/div><\/div>"}}],"cases":[],"data":null,"html":null,"section":null,"section_color":"#84CE84","section_duration":0,"critical":null,"critical_id":null,"duration":0},{"id":1202933,"guid":"282AA8B0D6AE11EBA26A7BB1146B1A4E","previous_id":1202932,"previous_guid":"1F7AC2B0D6AC11EBA26A7BB1146B1A4E","modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"6F5163BCAB93437595A59BBC1B1D42D3","order_id":1,"type_id":6,"title":"Section","source":{"title":"ReVisE server startup"}},{"id":1054724,"guid":"6C9B99A404394CD3AB9292F88CE90B80","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\">Go to the directory where datasets are to be installed.<\/div><div class = \"text-block\"><pre><code><div class = \"text-blocks\"><div class = \"text-block\">cd data<\/div><\/div><\/code><\/pre><\/div><\/div>"}}],"cases":[],"data":null,"html":null,"section":null,"section_color":"#84CE84","section_duration":0,"critical":null,"critical_id":null,"duration":0},{"id":1202934,"guid":"6C4B7470D6AE11EBA26A7BB1146B1A4E","previous_id":1202933,"previous_guid":"282AA8B0D6AE11EBA26A7BB1146B1A4E","modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"1A3612CB88074A76A2419B91F1E22FC0","order_id":1,"type_id":6,"title":"Section","source":{"title":"ReVisE server startup"}},{"id":1054724,"guid":"FEE5C97282B1405F8332DEC94170E313","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\">Now you can perform all measurements after step 4 from protocol <\/div><div class = \"text-block\"><a href=\"http:\/\/dx.doi.org\/10.17504\/protocols.io.bruzm6x6\" style = \"text-decoration:underline;color:blue;cursor:pointer;\"><span style = \":;\">Prepare and run test on available dataset<\/span><\/a><\/div><div class = \"text-block\">. The Docker container has the same datasets that the usual ReVisE installation contains.<\/div><\/div>"}}],"cases":[],"data":null,"html":null,"section":null,"section_color":"#84CE84","section_duration":0,"critical":null,"critical_id":null,"duration":0}],"document":"","materials":[],"description":"<div class = \"text-blocks\"><div class = \"text-block\"><span>This protocol describes run of ReVisE server from Docker container on Ubuntu. It describes retrieving of the Docker and the container only. It refers to another our protocol <\/span><a href=\"http:\/\/dx.doi.org\/10.17504\/protocols.io.bruzm6x6\" style = \"text-decoration:underline;color:blue;cursor:pointer;\"><span style = \":;\">Prepare and run test on available dataset<\/span><\/a><span> in order to provide possible workflow of ReVisE usage. This protocol is tested on Ubuntu 20.04 but it is not restricted by this OS version only.<\/span><\/div><\/div>","changed_on":1625038908}