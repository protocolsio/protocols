{"id":7985,"title":"Killing wolves to prevent predation on livestock may protect one farm but harm neighbors: Variables and Sample STATA code for survival analytics","title_html":"Killing wolves to prevent predation on livestock may protect one farm but harm neighbors: Variables and Sample STATA code for survival analytics","image":{"source":"https:\/\/www.protocols.io\/img\/default_protocol.png","placeholder":"https:\/\/www.protocols.io\/img\/default_protocol.png"},"doi":"dx.doi.org\/10.17504\/protocols.io.j2rcqd6","doi_status":2,"uri":"killing-wolves-to-prevent-predation-on-livestock-m-j2rcqd6","type_id":1,"template_id":1,"published_on":1624902530,"parent_protocols":[],"parent_collections":[],"cited_protocols":[],"version_id":0,"version_data":{"id":"0","code":"j2rcqd6","parent_id":0,"parent_uri":null,"is_same_owner":false,"has_pending_merge_request":false,"has_approved_merge_request":false},"created_on":1506377046,"modified_on":null,"categories":null,"public":1,"is_unlisted":0,"creator":{"name":"Francisco  Santiago-\u00c1vila","affiliation":null,"affiliations":[{"affiliation":null,"url":null,"is_default":1}],"username":"francisco--santiagovila","note":null,"link":null,"image":{"source":"\/img\/avatars\/016.png","placeholder":"\/img\/avatars\/016.png"},"badges":[{"id":2,"image":{"source":"\/img\/badges\/bronze.svg","placeholder":"\/img\/badges\/bronze.svg"},"name":"Author"},{"id":5,"image":{"source":"\/img\/badges\/star.svg","placeholder":"\/img\/badges\/star.svg"},"name":"Early adopter"},{"id":6,"image":{"source":"\/img\/badges\/accelerator.svg","placeholder":"\/img\/badges\/accelerator.svg"},"name":"Science accelerator"}],"verified":0,"is_verified_user":false,"research_interests":null,"blocked_by_you":false,"blocked_you":false,"hide_following":false},"journal":null,"journal_name":null,"journal_link":null,"article_citation":null,"has_versions":0,"link":null,"total_collections":0,"number_of_steps":2,"authors":[{"name":"Francisco  Santiago-\u00c1vila","affiliation":"Carnivore Coexistence Lab, Nelson Institute for Environmental Studies, University of Wisconsin-Madison","affiliations":[],"username":null,"note":"","link":null,"image":{"source":null,"placeholder":null},"badges":[],"verified":0,"is_verified_user":false,"research_interests":null,"blocked_by_you":false,"blocked_you":false,"hide_following":false},{"name":"Adrian Treves","affiliation":"Carnivore Coexistence Lab, Nelson Institute for Environmental Studies, University of Wisconsin-Madison","affiliations":[],"username":null,"note":"","link":null,"image":{"source":null,"placeholder":null},"badges":[],"verified":0,"is_verified_user":false,"research_interests":null,"blocked_by_you":false,"blocked_you":false,"hide_following":false}],"versions":[],"groups":[],"is_owner":1,"has_subprotocols":0,"is_subprotocol":0,"is_bookmarked":0,"can_claim_authorship":0,"can_accept_authorship":0,"can_be_copied":1,"can_remove_fork":1,"fork_id":null,"url":"https:\/\/www.protocols.io\/view\/killing-wolves-to-prevent-predation-on-livestock-m-j2rcqd6","forks_count":{"private":0,"public":0},"access":{"can_view":1,"can_remove":0,"can_add":0,"can_edit":0,"can_publish":0,"can_get_doi":0,"can_share":1,"can_move":1,"can_move_outside":1,"can_transfer":1,"can_download":1,"is_locked":0},"guid":"8AE66680B9DA11E99CA40242AC110005","state_version_id":0,"steps":[{"id":588443,"guid":"C0830D42D5324DA89444CE1B22F1A272","previous_id":null,"previous_guid":null,"modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"387275F8D44E401ABF502435EFA0D16C","order_id":1,"type_id":6,"title":"Section","source":{"title":"VARIABLES USED (and description):"}},{"id":1054724,"guid":"458149C06492483B8360B4F304F02116","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\"><ul style = \"list-style-type:disc;\"><li style = \"counter-reset:ol0;list-style-type:disc;\">ID_TRS_yr --> identifier for each area-year combination (please see study for more information)<\/li><li style = \"counter-reset:ol0;list-style-type:disc;\">Interv_dich --> intervention type (lethal, non-lethal)<\/li><li style = \"counter-reset:ol0;list-style-type:disc;\">wolves_killed --> number of wolves killed<\/li><li style = \"counter-reset:ol0;list-style-type:disc;\">Interv_dummy --> dummy variable for intervention type (0 if \u2018non-lethal\u2019, 1 if \u2018lethal\u2019)<\/li><li style = \"counter-reset:ol0;list-style-type:disc;\">Delay_in_yrstop_time --> time to recurrent event (in days) or censoring<\/li><li style = \"counter-reset:ol0;list-style-type:disc;\">status_event --> failure binary variable (1 if recurrent event; 0 if censored)<\/li><li style = \"counter-reset:ol0;list-style-type:disc;\">start_time --> start time variable (all obs \u20180\u2019)<\/li><li style = \"counter-reset:ol0;list-style-type:disc;\">yr_stratum --> order of recurrent events within a particular area-yr\u2020<\/li><li style = \"counter-reset:ol0;list-style-type:disc;\">year --> year variable (1998-2014)<\/li><\/ul><\/div><\/div>"}},{"id":1054725,"guid":"1D2D7DBD664E4376B3942B052C33732E","order_id":2,"type_id":26,"title":"notes","source":{"id":0,"parent_id":0,"uri":"","title":"","body":"<div class = \"text-blocks\"><div class = \"text-block\"> \u2018Area\u2019 refers to the section, neighborhood or neighborhood of township area scales.<\/div><\/div>","created_on":0,"changed_on":0,"creator":{"name":" ","affiliation":null,"affiliations":[],"username":"","note":null,"link":null,"image":{"source":"","placeholder":""},"badges":[],"verified":0,"is_verified_user":false,"research_interests":null,"blocked_by_you":false,"blocked_you":false,"hide_following":false},"comments":[]}}],"cases":[],"data":null,"html":null,"section":null,"section_color":null,"section_duration":0,"critical":null,"critical_id":null,"duration":0},{"id":588447,"guid":"0DEBD826C901404A9B3164E363CA2A5D","previous_id":588443,"previous_guid":"C0830D42D5324DA89444CE1B22F1A272","modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"4B344077ECF345848C3C58929CB844DC","order_id":1,"type_id":6,"title":"Section","source":{"title":"SAMPLE .DO FILE (Section scale)\u2021"}},{"id":1054724,"guid":"F34E09A2B6D2477B8342E0DD020ACC93","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><\/div>"}},{"id":1054725,"guid":"D3BEB0CAA3B14548831688E1A719F1DF","order_id":2,"type_id":15,"title":"command","source":{"id":2239,"name":"clear all\ncd \u201c\/Location\/Of\/File\u201d\nlog using \"Name.smcl\", replace\nset mem 1g\nuse \"Data.dta\", replace\nset more off, permanently\n\n************************************************\n****Replacing intervention type if wolves_killed = 0\u00a7\n************************************************\nreplace Interv_dich=\"non-lethal\" if wolves_killed==0\nreplace Interv_dummy=0 if Interv_dich==\"non-lethal\"\n\n\n************************************************\n***Set data as survival time for PWP-GT model\n************************************************\nstset Delay_in_yrstop_time, failure(status_event) exit(time .) enter(start_time)\nlist ID_TRS_yr _t0 _t _d _st**\nstdescribe \nstsum \n\n************************************************\n***Limiting analysis to # of Strata\u2020\u2020\n************************************************\nuse \u201cData_Strata#.dta\u201d\nstset Delay_in_yrstop_time, failure(status_event) exit(time .) enter(start_time)\nstdescribe\nstsum\n\n*Comparing survival functions by group\nsts list, by(Interv_dich)\nsts list, by(Interv_dich) compare\n\n*Graphing survival functions by group\nsts graph, by(Interv_dich)\nsts graph, fail by(Interv_dich)\n\n*Graphing smoothed hazard estimates (hazard ratio) by group\nsts graph, hazard by(Interv_dich) \nsts graph, cumhaz by(Interv_dich)\n\n*Testing equality of survival functions by group (Log-rank test)\nsts test Interv_dich\nsts test Interv_dich, strata(yr_stratum)\n\n***COX MODELS (stcox)***\n**STRATIFIED**\nstcox Interv_dummy year, strata(yr_stratum) vce(cluster ID_TRS_yr) \nstcox Interv_dummy year, nohr strata(yr_stratum) vce(cluster ID_TRS_yr)\n\n*Checking Proportional Hazard assumptions\nestat phtest, log detail\nestat phtest, plot(Interv_dummy) \nstphplot, by(Interv_dummy) \nestat phtest, plot(year) \nstphplot, by(year) \n\n*Adding time-varying covariate to account for proportional hazard assumption violation\nstcox Interv_dummy year, tvc(Interv_dummy) texp(_t) strata(yr_stratum) vce(cluster ID_TRS_yr)\n\n*FRAILTY (MIXED-EFFECTS) MODEL**\nstrmcure Interv_dummy year, shared(ID_TRS_yr) strata(yr_stratum)\n\n************************************************\n***Correlation between delay between incidents and wolves killed (for \u2018Lethal\u2019 only)\n************************************************\nspearman Delay_in_yrstop_time wolves_killed if Interv_dich==\"Lethal\"\n\nlog close","command_name":null,"command":"Sample .DO FILE","os_name":"","os_version":""}},{"id":1054726,"guid":"AC0B2127FD444081B090BD2A7AC59FE5","order_id":3,"type_id":26,"title":"notes","source":{"id":0,"parent_id":0,"uri":"","title":"","body":"<div class = \"text-blocks\"><div class = \"text-block\"><span style = \"font-weight:bold;\">\u2021<\/span><span> A similar procedure was used for the township and neighborhood of township scales, using their respective spatial unit identifiers.<\/span><\/div><div class = \"text-block\"><span style = \"font-weight:bold;\">\u00a7<\/span><span> This section was used for our main dataset. We removed this section of code for our alternate \u2018traps-placed\u2019 dataset, to include as \u2018lethal\u2019 those cases were attempts were made to trap wolves (please see study).<\/span><\/div><div class = \"text-block\"><span style = \"font-weight:bold;\">**<\/span><span> May need to break ties in Delay_in_yrstop_time variable to retain observations (please see stset help in Stata)<\/span><\/div><div class = \"text-block\"><span style = \"font-weight:bold;\">\u2020\u2020<\/span><span> A separate dataset was created including only those area-year records with strata (yr_stratum) values with enough observations to be properly modelled (please see study).<\/span><\/div><\/div>","created_on":0,"changed_on":0,"creator":{"name":" ","affiliation":null,"affiliations":[],"username":"","note":null,"link":null,"image":{"source":"","placeholder":""},"badges":[],"verified":0,"is_verified_user":false,"research_interests":null,"blocked_by_you":false,"blocked_you":false,"hide_following":false},"comments":[]}}],"cases":[],"data":null,"html":null,"section":null,"section_color":null,"section_duration":0,"critical":null,"critical_id":null,"duration":0}],"document":"","materials":[],"description":"<div class = \"text-blocks\"><div class = \"text-block\">Here, we make available basic sample code for the statistical survival analyses employed in our manuscript. This code should allow for replication of analyses at all spatial scales for all datasets involved.<\/div><div class = \"text-block\">This sample code does not include code lines for dropping or adding observations, which we did for the alternate datasets used. However, this should only involve basic coding, and descriptions of observations included or dropped for each dataset can be found in the study.<\/div><\/div>","changed_on":1624902530}