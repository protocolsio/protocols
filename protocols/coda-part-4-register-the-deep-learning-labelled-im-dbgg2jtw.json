{"access":{"can_view":true,"can_edit":false,"can_remove":false,"can_add":false,"can_publish":false,"can_get_doi":false,"can_share":true,"can_move":true,"can_move_outside":true,"can_transfer":true,"can_download":true,"limited_run":false,"limited_private_links":false,"limited_blind_links":false,"is_locked":false},"authors":[{"name":"Kyu Sang Han","affiliation":"Johns Hopkins University","affiliation_url":"","username":"kyu-sang-han","link":"","image":{"source":"https://content.protocols.io/files/p6x4b7aex.jpg","placeholder":"https://content.protocols.io/files/p6x4b7aex.jpg","webp_source":"https://content.protocols.io/files/p6x3b7aex.webp"},"note":"","is_verified_user":true},{"name":"Pei-Hsun Wu","affiliation":"Johns Hopkins University","affiliation_url":null,"username":"peihsun-wu1","link":null,"image":{"source":"/img/avatars/007.png","placeholder":"/img/avatars/007.png","webp_source":""},"note":"","is_verified_user":true},{"name":"Joel Sunshine","affiliation":"Johns Hopkins Medicine","affiliation_url":null,"username":"n4wle102w1x4qle1","link":null,"image":{"source":"/img/avatars/010.png","placeholder":"/img/avatars/010.png","webp_source":""},"note":"","is_verified_user":false},{"name":"Ashley Kiemen","affiliation":"Johns Hopkins Medicine","affiliation_url":null,"username":"n4wle102w1z4sle1","link":null,"image":{"source":"/img/avatars/012.png","placeholder":"/img/avatars/012.png","webp_source":""},"note":"","is_verified_user":false},{"name":"Sashank Reddy","affiliation":"Johns Hopkins Medicine","affiliation_url":null,"username":"n4ule1w1u115ple1","link":null,"image":{"source":"/img/avatars/015.png","placeholder":"/img/avatars/015.png","webp_source":""},"note":"","is_verified_user":false},{"name":"Denis Wirtz","affiliation":"Johns Hopkins University; Johns Hopkins Medicine","affiliation_url":null,"username":"n4ule1w1u115qle1","link":null,"image":{"source":"/img/avatars/009.png","placeholder":"/img/avatars/009.png","webp_source":""},"note":"","is_verified_user":true}],"before_start":"","book_chapter":null,"can_accept_authorship":false,"can_be_copied":true,"can_claim_authorship":false,"can_manage_keywords":true,"can_remove_fork":false,"can_sign":false,"child_steps":{},"cited_protocols":[],"collection_items":[],"created_on":1711659804,"creator":{"name":"Kyu Sang Han","affiliation":"Johns Hopkins University","affiliation_url":"","username":"kyu-sang-han","link":"","image":{"source":"https://content.protocols.io/files/p6x4b7aex.jpg","placeholder":"https://content.protocols.io/files/p6x4b7aex.jpg","webp_source":"https://content.protocols.io/files/p6x3b7aex.webp"},"badges":[{"id":4,"name":"Gold power author!","image":{"source":"/img/badges/gold.svg","placeholder":"/img/badges/gold.svg"}}],"affiliations":[{"affiliation":"Johns Hopkins University","url":"","job_title":"Postdoctoral researcher","is_default":true}]},"cross_cloud_origin":null,"description":"{\"blocks\":[{\"key\":\"9clqc\",\"text\":\"CODA (part 4): register the deep learning labelled images and Construct 3D tissue matrix\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}}],\"entityMap\":{}}","disclaimer":"","document":"","documents":null,"doi":"dx.doi.org/10.17504/protocols.io.yxmvme7eog3p/v1","doi_status":1,"ethics_statement":null,"fork_id":null,"fork_info":null,"forks":[],"funders":[{"funder_name":"Institute of Arthritis and Musculoskeletal and Skin Diseases","grant_id":"U54AR081774"},{"funder_name":"National Cancer Institute","grant_id":"U54CA143868"}],"groups":[{"id":1314,"uri":"human-biomolecular-atlas-program-hubmap-method-development","title":"Human BioMolecular Atlas Program (HuBMAP) Method Development Community","is_public":true,"image":{"source":"https://s3.amazonaws.com/protocols-files/public/878566e39a791455c5de855eebb601e890d5871d93466a1c1252d979f3a8c48e/brha6bxe.jpg","placeholder":"https://s3.amazonaws.com/protocols-files/public/878566e39a791455c5de855eebb601e890d5871d93466a1c1252d979f3a8c48e/brha6bxe.jpg"},"tech_support":{"email":"Jeff.spraggins@vanderbilt.edu","phone":null,"use_email":false,"hide_contact":true,"url":null}},{"id":99892,"uri":"tmc---johns-hopkins-university","title":"TMC - Johns Hopkins University","is_public":false,"image":{"source":"https://content.protocols.io/files/1C4FF7A1144411EEA01B0A58A9FEAC02-placeholder.png","placeholder":"https://content.protocols.io/files/1C4FF7A1144411EEA01B0A58A9FEAC02-placeholder.png"},"tech_support":{"email":null,"phone":null,"use_email":false,"hide_contact":false,"url":null}}],"guid":"497F5A9A949746BDB4FDAA39E3FCB38D","guidelines":"","has_references":false,"has_step_reagents":false,"has_versions":false,"id":97512,"image":{"source":"https://www.protocols.io/img/default_protocol.png","webp_source":null,"placeholder":"https://www.protocols.io/img/default_protocol.png","webp_placeholder":null},"image_attribution":"","in_trash":false,"is_bookmarked":false,"is_contact_suspended":false,"is_content_confidential":false,"is_content_warning":false,"is_doi_reserved":false,"is_in_pending_publishing":false,"is_in_transfer":false,"is_owner":true,"is_research":true,"is_retracted":false,"is_shared_directly":false,"is_subprotocol":null,"is_unlisted":false,"item_id":1232827,"journal":null,"journals":[],"keywords":"CODA,deeplearning,semanticsegmentation","last_modified":1712006997,"link":"","location":null,"manuscript_citation":"{\"blocks\":[{\"key\":\"95u3p\",\"text\":\"Kiemen, A.L., Braxton, A.M., Grahn, M.P. et al. CODA: quantitative 3D reconstruction of large tissues at cellular resolution. Nat Methods 19, 1490–1499 (2022). https://doi.org/10.1038/s41592-022-01650-9\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[{\"style\":\"italic\",\"offset\":41,\"length\":6},{\"style\":\"italic\",\"offset\":126,\"length\":11},{\"style\":\"bold\",\"offset\":138,\"length\":2}],\"entityRanges\":[],\"data\":{}}],\"entityMap\":{}}","materials":[],"materials_text":"","ownership_history":null,"parent_collections":[],"parent_protocols":[],"peer_reviewed":false,"protocol_references":"","public":true,"public_fork_note":"","published_on":1712006997,"references":[],"related_equipments":[],"related_materials":[],"reserved_doi":"","retraction_reason":null,"samples":{},"shared_access_id":100,"show_comparison":false,"sign_info":null,"space_access":{"can_view":false,"can_edit":false,"can_remove":false,"can_add":false,"can_publish":true,"can_get_doi":true,"can_share":false,"can_move":false,"can_move_outside":false,"can_transfer":false,"can_download":false,"limited_run":false,"limited_private_links":false,"limited_blind_links":false,"is_locked":false},"space_id":1381,"state_version_id":282,"stats":{"is_voted":false,"number_of_views":2,"number_of_steps":19,"number_of_bookmarks":0,"number_of_comments":0,"number_of_bookmarked_comments":0,"number_of_steps_comments":0,"number_of_protocol_comments":0,"number_of_exports":0,"number_of_runs":0,"number_of_votes":0,"number_of_reagents":0,"number_of_equipments":0,"number_of_collections":0,"number_of_forks":{"private":0,"public":0},"number_of_accessible_forks":0},"status":{"id":1,"info":"We use this protocol and it's working"},"steps":[{"id":1997121,"guid":"F81765B1B1C9407CA3D54B8DFC02E9C3","previous_id":0,"previous_guid":null,"section":"\u003cp\u003eRegister the deep learning labelled images\u003c/p\u003e","section_color":"#A492FF","section_duration":0,"is_substep":false,"step":"{\"blocks\":[{\"key\":\"dk91o\",\"text\":\"Using the registration transformations calculated in low-resolution (as described in CODA-part2), register the segmentation masks of the high-resolution tif images generated in CODA-part3.\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[{\"key\":0,\"offset\":85,\"length\":10},{\"key\":1,\"offset\":177,\"length\":10}],\"data\":{}}],\"entityMap\":{\"0\":{\"type\":\"link\",\"mutability\":\"MUTABLE\",\"data\":{\"guid\":\"3654E2F4083C4A098814EC847727A9A2\",\"url\":\"http://dx.doi.org/10.17504/protocols.io.kxygxym3dl8j/v1\"}},\"1\":{\"type\":\"link\",\"mutability\":\"MUTABLE\",\"data\":{\"guid\":\"40B186B3701F428B911D730B7B96C289\",\"url\":\"http://dx.doi.org/10.17504/protocols.io.81wgbz1x3gpk/v1\"}}}}","data":null,"protocol_id":97512,"case_id":0,"critical_ids":"","duration":0,"original_id":0,"number":"1","cases":[],"critical":null},{"id":1997123,"guid":"441D14F646D74FBC9A39FB0A52BEE229","previous_id":1997121,"previous_guid":"F81765B1B1C9407CA3D54B8DFC02E9C3","section":"\u003cp\u003eFunction requirements\u003c/p\u003e","section_color":"#94EBFF","section_duration":0,"is_substep":false,"step":"{\"blocks\":[{\"key\":\"55lkd\",\"text\":\"High-resolution images from CODA-part3 (pthclassified)\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[{\"style\":\"bold\",\"offset\":40,\"length\":13}],\"entityRanges\":[{\"key\":0,\"offset\":28,\"length\":10}],\"data\":{}}],\"entityMap\":{\"0\":{\"type\":\"link\",\"mutability\":\"MUTABLE\",\"data\":{\"guid\":\"40B186B3701F428B911D730B7B96C289\",\"url\":\"http://dx.doi.org/10.17504/protocols.io.81wgbz1x3gpk/v1\"}}}}","data":null,"protocol_id":97512,"case_id":0,"critical_ids":"","duration":0,"original_id":0,"number":"2","cases":[],"critical":null},{"id":1997125,"guid":"E276DBEAABA74C1893295D085B4697D1","previous_id":1997123,"previous_guid":"441D14F646D74FBC9A39FB0A52BEE229","section":"\u003cp\u003eFunction requirements\u003c/p\u003e","section_color":"#94EBFF","section_duration":0,"is_substep":false,"step":"{\"blocks\":[{\"key\":\"601g3\",\"text\":\"The path containing the image registration information from CODA-part2 (pthdata),\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[{\"style\":\"bold\",\"offset\":72,\"length\":7}],\"entityRanges\":[{\"key\":0,\"offset\":60,\"length\":10}],\"data\":{}}],\"entityMap\":{\"0\":{\"type\":\"link\",\"mutability\":\"MUTABLE\",\"data\":{\"guid\":\"3654E2F4083C4A098814EC847727A9A2\",\"url\":\"http://dx.doi.org/10.17504/protocols.io.kxygxym3dl8j/v1\"}}}}","data":null,"protocol_id":97512,"case_id":0,"critical_ids":"","duration":0,"original_id":0,"number":"3","cases":[],"critical":null},{"id":1997126,"guid":"B6310619513145FBB6D67092CD05E3D7","previous_id":1997125,"previous_guid":"E276DBEAABA74C1893295D085B4697D1","section":"\u003cp\u003eFunction requirements\u003c/p\u003e","section_color":"#94EBFF","section_duration":0,"is_substep":false,"step":"{\"blocks\":[{\"key\":\"2kfbb\",\"text\":\"The scale between the high-resolution classified images and the low-resolution registration images (here for registration of 1x images and classification of 10x images, scale=10)\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}}],\"entityMap\":{}}","data":null,"protocol_id":97512,"case_id":0,"critical_ids":"","duration":0,"original_id":0,"number":"4","cases":[],"critical":null},{"id":1997127,"guid":"AC0DCF9859A843AEB9D539F4F1759F41","previous_id":1997126,"previous_guid":"B6310619513145FBB6D67092CD05E3D7","section":"\u003cp\u003eFunction requirements\u003c/p\u003e","section_color":"#94EBFF","section_duration":0,"is_substep":false,"step":"{\"blocks\":[{\"key\":\"3ipvi\",\"text\":\"The pixel number of the background class in the segmentation model built in CODA-part3 (here, nwhite=3)\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[{\"key\":0,\"offset\":76,\"length\":10}],\"data\":{}}],\"entityMap\":{\"0\":{\"type\":\"link\",\"mutability\":\"MUTABLE\",\"data\":{\"guid\":\"40B186B3701F428B911D730B7B96C289\",\"url\":\"http://dx.doi.org/10.17504/protocols.io.81wgbz1x3gpk/v1\"}}}}","data":null,"protocol_id":97512,"case_id":0,"critical_ids":"","duration":0,"original_id":0,"number":"5","cases":[],"critical":null},{"id":1997129,"guid":"9DED1762CF3541129501022798519FB1","previous_id":1997127,"previous_guid":"AC0DCF9859A843AEB9D539F4F1759F41","section":"\u003cp\u003eExecution\u003c/p\u003e","section_color":"#84CE84","section_duration":0,"is_substep":false,"step":"{\"blocks\":[{\"key\":\"59e5g\",\"text\":\"pthim=pthclassified;\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[{\"style\":\"bold\",\"offset\":0,\"length\":20}],\"entityRanges\":[],\"data\":{}},{\"key\":\"68avb\",\"text\":\"pthdata=[pth,'1x\\\\registered\\\\elastic\\nregistration\\\\save_warps'];\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[{\"style\":\"bold\",\"offset\":0,\"length\":62}],\"entityRanges\":[],\"data\":{}},{\"key\":\"dt7b3\",\"text\":\"scale=10;\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[{\"style\":\"bold\",\"offset\":0,\"length\":9}],\"entityRanges\":[],\"data\":{}},{\"key\":\"tc6p\",\"text\":\"padnum=3;\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[{\"style\":\"bold\",\"offset\":0,\"length\":9}],\"entityRanges\":[],\"data\":{}},{\"key\":\"dnq6m\",\"text\":\"apply_image_registration(pthim,pthdata,scale,padnum);\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[{\"style\":\"bold\",\"offset\":0,\"length\":53}],\"entityRanges\":[],\"data\":{}}],\"entityMap\":{}}","data":null,"protocol_id":97512,"case_id":0,"critical_ids":"","duration":0,"original_id":0,"number":"6","cases":[],"critical":null},{"id":1997130,"guid":"B761FC1FC5E742409FBB1C68B9F69EF4","previous_id":1997129,"previous_guid":"9DED1762CF3541129501022798519FB1","section":"\u003cp\u003eExecution\u003c/p\u003e","section_color":"#84CE84","section_duration":0,"is_substep":false,"step":"{\"blocks\":[{\"key\":\"7ivbe\",\"text\":\"This function will create an subfolder named ‘registeredE’ inside the pthclassified folder that contains the registered, classified images. pthclassifiedE=[pthclassified,'registeredE'];\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[{\"style\":\"bold\",\"offset\":70,\"length\":13},{\"style\":\"bold\",\"offset\":140,\"length\":45}],\"entityRanges\":[],\"data\":{}}],\"entityMap\":{}}","data":null,"protocol_id":97512,"case_id":0,"critical_ids":"","duration":0,"original_id":0,"number":"7","cases":[],"critical":null},{"id":1997131,"guid":"4C982750288A40C5B5D2AD30C9DF253F","previous_id":1997130,"previous_guid":"B761FC1FC5E742409FBB1C68B9F69EF4","section":"\u003cp\u003eConstruct 3D tissue matrix\u003c/p\u003e","section_color":"#FFED92","section_duration":0,"is_substep":false,"step":"{\"blocks\":[{\"key\":\"dh6u\",\"text\":\"Next, we will create a 3D quantifiable matrix from the tissue labels using the registered, segmented images we just created above. vol will be a 3D matrix containing the registered, labelled data.\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[{\"style\":\"bold\",\"offset\":131,\"length\":3}],\"entityRanges\":[],\"data\":{}}],\"entityMap\":{}}","data":null,"protocol_id":97512,"case_id":0,"critical_ids":"","duration":0,"original_id":0,"number":"8","cases":[],"critical":null},{"id":1997133,"guid":"151D01E4BAEF469AAF83435C1CD0DBFB","previous_id":1997131,"previous_guid":"4C982750288A40C5B5D2AD30C9DF253F","section":"\u003cp\u003eConstruct 3D tissue matrix\u003c/p\u003e","section_color":"#FFED92","section_duration":0,"is_substep":false,"step":"{\"blocks\":[{\"key\":\"f827q\",\"text\":\"To call this function, you need to locate the subfolder containing the registered classified images, define a location to save the output matrix, define the desired resolution of the volume matrix (relative to the current resolution of the images, and identify the RGB color map used in the deep learning model in CODA-part3\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[{\"key\":0,\"offset\":314,\"length\":10}],\"data\":{}}],\"entityMap\":{\"0\":{\"type\":\"link\",\"mutability\":\"MUTABLE\",\"data\":{\"guid\":\"40B186B3701F428B911D730B7B96C289\",\"url\":\"http://dx.doi.org/10.17504/protocols.io.81wgbz1x3gpk/v1\"}}}}","data":null,"protocol_id":97512,"case_id":0,"critical_ids":"","duration":0,"original_id":0,"number":"9","cases":[],"critical":null},{"id":1997136,"guid":"EB20C8099E414F2E8D7D5930CD35BDED","previous_id":1997133,"previous_guid":"151D01E4BAEF469AAF83435C1CD0DBFB","section":"\u003cp\u003eConstruct 3D tissue matrix\u003c/p\u003e","section_color":"#FFED92","section_duration":0,"is_substep":false,"step":"{\"blocks\":[{\"key\":\"9u4ib\",\"text\":\"pthclassifiedE is the subfolder with the registered, classified images created in earlier steps in this protocol:\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[{\"style\":\"bold\",\"offset\":0,\"length\":14}],\"entityRanges\":[],\"data\":{}},{\"key\":\"431in\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"76cih\",\"text\":\"pthclassifiedE=[pthclassified,'registeredE'];\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[{\"style\":\"bold\",\"offset\":0,\"length\":45}],\"entityRanges\":[],\"data\":{}}],\"entityMap\":{}}","data":null,"protocol_id":97512,"case_id":0,"critical_ids":"","duration":0,"original_id":0,"number":"10","cases":[],"critical":null},{"id":1997137,"guid":"0DF82B3E6A8545FFBE3708A5C7CFC9CE","previous_id":1997136,"previous_guid":"EB20C8099E414F2E8D7D5930CD35BDED","section":"\u003cp\u003eConstruct 3D tissue matrix\u003c/p\u003e","section_color":"#FFED92","section_duration":0,"is_substep":false,"step":"{\"blocks\":[{\"key\":\"fjhn1\",\"text\":\"Define a subfolder where you would like to save the volumetric data:\\npthvolume=[pth,'lung_data'];\\n  \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[{\"style\":\"bold\",\"offset\":69,\"length\":28}],\"entityRanges\":[],\"data\":{}}],\"entityMap\":{}}","data":null,"protocol_id":97512,"case_id":0,"critical_ids":"","duration":0,"original_id":0,"number":"11","cases":[],"critical":null},{"id":1997138,"guid":"533D9CBD4C7F4301B1F9ADDE6163027F","previous_id":1997140,"previous_guid":"F3AB087C4B6140938875D18128E0490D","section":"\u003cp\u003eConstruct 3D tissue matrix\u003c/p\u003e","section_color":"#FFED92","section_duration":0,"is_substep":false,"step":"{\"blocks\":[{\"key\":\"3ruo0\",\"text\":\"cmap is the matrix containing RGB triplets for each class in the deep learning model\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[{\"style\":\"bold\",\"offset\":0,\"length\":4}],\"entityRanges\":[],\"data\":{}},{\"key\":\"3b30f\",\"text\":\"cmap=[];\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[{\"style\":\"bold\",\"offset\":0,\"length\":8}],\"entityRanges\":[],\"data\":{}},{\"key\":\"d5852\",\"text\":\"  \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"6qp5j\",\"text\":\"build_tissue_volume(pthclassifiedE,pthvolume,sk,nwhite,cmap);\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[{\"style\":\"bold\",\"offset\":0,\"length\":61}],\"entityRanges\":[],\"data\":{}}],\"entityMap\":{}}","data":null,"protocol_id":97512,"case_id":0,"critical_ids":"","duration":0,"original_id":0,"number":"14","cases":[],"critical":null},{"id":1997139,"guid":"4FD66FBF724E43AA83C4911E6D164DF7","previous_id":1997137,"previous_guid":"0DF82B3E6A8545FFBE3708A5C7CFC9CE","section":"\u003cp\u003eConstruct 3D tissue matrix\u003c/p\u003e","section_color":"#FFED92","section_duration":0,"is_substep":false,"step":"{\"blocks\":[{\"key\":\"fb274\",\"text\":\"Set sk to 4 so that 10x image (1 um / pixel resolution) are downsampled to 4 micron / pixel:\\nsk=4;\\n \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[{\"style\":\"bold\",\"offset\":4,\"length\":2},{\"style\":\"bold\",\"offset\":93,\"length\":5}],\"entityRanges\":[],\"data\":{}}],\"entityMap\":{}}","data":null,"protocol_id":97512,"case_id":0,"critical_ids":"","duration":0,"original_id":0,"number":"12","cases":[],"critical":null},{"id":1997140,"guid":"F3AB087C4B6140938875D18128E0490D","previous_id":1997139,"previous_guid":"4FD66FBF724E43AA83C4911E6D164DF7","section":"\u003cp\u003eConstruct 3D tissue matrix\u003c/p\u003e","section_color":"#FFED92","section_duration":0,"is_substep":false,"step":"{\"blocks\":[{\"key\":\"2elsv\",\"text\":\"nwhite is the background class from the deep learning model. Here, let’s use 6:\\nnwhite=6; \\n  \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[{\"style\":\"bold\",\"offset\":0,\"length\":6},{\"style\":\"bold\",\"offset\":80,\"length\":10}],\"entityRanges\":[],\"data\":{}}],\"entityMap\":{}}","data":null,"protocol_id":97512,"case_id":0,"critical_ids":"","duration":0,"original_id":0,"number":"13","cases":[],"critical":null},{"id":1997141,"guid":"323178C650794234A3200833FC779581","previous_id":1997138,"previous_guid":"533D9CBD4C7F4301B1F9ADDE6163027F","section":"\u003cp\u003eConstruct 3D tissue matrix\u003c/p\u003e","section_color":"#FFED92","section_duration":0,"is_substep":false,"step":"{\"blocks\":[{\"key\":\"dop3g\",\"text\":\"First, the function will display to you a concatenated image containing the first, center, and last classified image in your image stack. Here, you will manually drag a rectangle to surround the tissue in the image, then double-click. This allows you to crop out excess whitespace from your 3D matrix to save RAM.\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}}],\"entityMap\":{}}","data":null,"protocol_id":97512,"case_id":0,"critical_ids":"","duration":0,"original_id":0,"number":"15","cases":[],"critical":null},{"id":1997142,"guid":"270B4325C4024F388E95370F8043A915","previous_id":1997141,"previous_guid":"323178C650794234A3200833FC779581","section":"\u003cp\u003eConstruct 3D tissue matrix\u003c/p\u003e","section_color":"#FFED92","section_duration":0,"is_substep":false,"step":"{\"blocks\":[{\"key\":\"50vgp\",\"text\":\"Next, the function will load all serial images, crop them, downsample them using the variable sk, and build them into the matrix vol. A z-projection will be created and displayed showing a combination of all non-background classes. This z-projection will be saved inside the folder pthvolume.  \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[{\"style\":\"bold\",\"offset\":94,\"length\":2},{\"style\":\"bold\",\"offset\":129,\"length\":3},{\"style\":\"bold\",\"offset\":282,\"length\":9}],\"entityRanges\":[],\"data\":{}}],\"entityMap\":{}}","data":null,"protocol_id":97512,"case_id":0,"critical_ids":"","duration":0,"original_id":0,"number":"16","cases":[],"critical":null},{"id":1997143,"guid":"A488CA57E50E49E8A461B5218A603F89","previous_id":1997142,"previous_guid":"270B4325C4024F388E95370F8043A915","section":"\u003cp\u003eConstruct 3D tissue matrix\u003c/p\u003e","section_color":"#FFED92","section_duration":0,"is_substep":false,"step":"{\"blocks\":[{\"key\":\"6j45v\",\"text\":\"Additionally, this function will create a .mat file named volume.mat saved inside the subfolder pthvolume. Inside this file will be a variable named vol containing the volumetric tissue labels, rr containing the cropping information defined inside the function, pthclassifiedE the folder containing the registered classified images used to create the volume, imlist containing the filenames of the images comprising the 3D matrix, and sk the downsample factor between the images in imlist and the data in vol.\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[{\"style\":\"bold\",\"offset\":58,\"length\":10},{\"style\":\"bold\",\"offset\":96,\"length\":9},{\"style\":\"bold\",\"offset\":149,\"length\":4},{\"style\":\"bold\",\"offset\":194,\"length\":2},{\"style\":\"bold\",\"offset\":262,\"length\":14},{\"style\":\"bold\",\"offset\":359,\"length\":7},{\"style\":\"bold\",\"offset\":435,\"length\":3},{\"style\":\"bold\",\"offset\":482,\"length\":6},{\"style\":\"bold\",\"offset\":505,\"length\":3}],\"entityRanges\":[],\"data\":{}}],\"entityMap\":{}}","data":null,"protocol_id":97512,"case_id":0,"critical_ids":"","duration":0,"original_id":0,"number":"17","cases":[],"critical":null},{"id":1997145,"guid":"2718181E79F7423A97E21646388D32D4","previous_id":1997143,"previous_guid":"A488CA57E50E49E8A461B5218A603F89","section":"\u003cp\u003eNote: When determining what resolution to make your volumetric matrix, there are a few considerations:\u003c/p\u003e","section_color":"#EA9F6C","section_duration":0,"is_substep":false,"step":"{\"blocks\":[{\"key\":\"2ut3b\",\"text\":\"You may want to make your 3D matrix isometric (same resolution in x, y, and z) to simplify 3D quantifications. In this case, define sk such that your classified images will be downsampled to the spacing between adjacent histological images\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[{\"style\":\"bold\",\"offset\":132,\"length\":2}],\"entityRanges\":[],\"data\":{}}],\"entityMap\":{}}","data":null,"protocol_id":97512,"case_id":0,"critical_ids":"","duration":0,"original_id":0,"number":"18","cases":[],"critical":null},{"id":1997146,"guid":"6CCBBBE46BBA4E8DAE8CDB1187F97D87","previous_id":1997145,"previous_guid":"2718181E79F7423A97E21646388D32D4","section":"\u003cp\u003eNote: When determining what resolution to make your volumetric matrix, there are a few considerations:\u003c/p\u003e","section_color":"#EA9F6C","section_duration":0,"is_substep":false,"step":"{\"blocks\":[{\"key\":\"9dk4d\",\"text\":\"You may want to consider the size of structures you are trying to quantify. If you need to maintain classification of very fine structures (such as thin blood vessels), down sampling too much may eliminate the connectivity between these thin objects.\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}}],\"entityMap\":{}}","data":null,"protocol_id":97512,"case_id":0,"critical_ids":"","duration":0,"original_id":0,"number":"19","cases":[],"critical":null}],"template_id":0,"title":"CODA (part 4): register the deep learning labelled images and Construct 3D tissue matrix | HuBMAP | JHU-TMC","title_html":"CODA (part 4): register the deep learning labelled images and Construct 3D tissue matrix | HuBMAP | JHU-TMC","type_id":1,"units":[{"id":1,"type_id":3,"name":"µL","can_manage":0,"read_only":0},{"id":2,"type_id":3,"name":"mL","can_manage":0,"read_only":0},{"id":3,"type_id":3,"name":"L","can_manage":0,"read_only":0},{"id":4,"type_id":3,"name":"µg","can_manage":0,"read_only":0},{"id":5,"type_id":3,"name":"mg","can_manage":0,"read_only":0},{"id":6,"type_id":3,"name":"g","can_manage":0,"read_only":0},{"id":7,"type_id":3,"name":"kg","can_manage":0,"read_only":0},{"id":8,"type_id":3,"name":"ng","can_manage":0,"read_only":0},{"id":9,"type_id":3,"name":"Hz","can_manage":0,"read_only":0},{"id":10,"type_id":24,"name":"°C","can_manage":0,"read_only":0},{"id":11,"type_id":24,"name":"°К","can_manage":0,"read_only":0},{"id":12,"type_id":24,"name":"°F","can_manage":0,"read_only":0},{"id":13,"type_id":25,"name":"Mass Percent","can_manage":0,"read_only":0},{"id":14,"type_id":25,"name":"% volume","can_manage":0,"read_only":0},{"id":15,"type_id":25,"name":"Mass / % volume","can_manage":0,"read_only":0},{"id":16,"type_id":25,"name":"Parts per Million (PPM)","can_manage":0,"read_only":0},{"id":17,"type_id":25,"name":"Parts per Billion (PPB)","can_manage":0,"read_only":0},{"id":18,"type_id":25,"name":"Parts per Trillion (PPT)","can_manage":0,"read_only":0},{"id":19,"type_id":25,"name":"Mole Fraction","can_manage":0,"read_only":0},{"id":20,"type_id":25,"name":"Mole Percent","can_manage":0,"read_only":0},{"id":21,"type_id":25,"name":"Molarity (M)","can_manage":0,"read_only":1},{"id":22,"type_id":25,"name":"Molarity (M)","can_manage":0,"read_only":0},{"id":23,"type_id":25,"name":"Genome copies per ml","can_manage":0,"read_only":0},{"id":24,"type_id":3,"name":"μV","can_manage":0,"read_only":0},{"id":25,"type_id":3,"name":"ms","can_manage":0,"read_only":0},{"id":26,"type_id":3,"name":"pg","can_manage":0,"read_only":0},{"id":27,"type_id":25,"name":"Molarity dilutions","can_manage":0,"read_only":0},{"id":28,"type_id":25,"name":"millimolar (mM)","can_manage":0,"read_only":0},{"id":29,"type_id":25,"name":"micromolar (µM)","can_manage":0,"read_only":0},{"id":30,"type_id":25,"name":"nanomolar (nM)","can_manage":0,"read_only":0},{"id":31,"type_id":25,"name":"picomolar (pM)","can_manage":0,"read_only":0},{"id":32,"type_id":24,"name":"Room temperature","can_manage":0,"read_only":0},{"id":33,"type_id":30,"name":"rpm","can_manage":0,"read_only":0},{"id":34,"type_id":30,"name":"x g","can_manage":0,"read_only":0},{"id":165,"type_id":24,"name":"On ice","can_manage":0,"read_only":0},{"id":200,"type_id":32,"name":"cm","can_manage":0,"read_only":0},{"id":201,"type_id":32,"name":"mm","can_manage":0,"read_only":0},{"id":202,"type_id":32,"name":"µm","can_manage":0,"read_only":0},{"id":203,"type_id":32,"name":"nm","can_manage":0,"read_only":0},{"id":204,"type_id":25,"name":"mg/mL","can_manage":0,"read_only":0},{"id":205,"type_id":25,"name":"µg/µL","can_manage":0,"read_only":0},{"id":206,"type_id":25,"name":"% (v/v)","can_manage":0,"read_only":0},{"id":207,"type_id":3,"name":"V","can_manage":0,"read_only":0},{"id":1324,"type_id":30,"name":"rcf","can_manage":0,"read_only":0},{"id":1359,"type_id":35,"name":"Bar","can_manage":0,"read_only":0},{"id":1360,"type_id":35,"name":"Pa","can_manage":0,"read_only":0}],"uri":"coda-part-4-register-the-deep-learning-labelled-im-dbgg2jtw","url":"https://www.protocols.io/view/coda-part-4-register-the-deep-learning-labelled-im-dbgg2jtw","version_class":97512,"version_data":{"id":0,"code":"dbgg2jtw","version_class":97512,"parent_id":null,"parent_uri":null,"is_same_owner":false,"is_parent_public":false,"has_pending_merge_request":false,"has_approved_merge_request":false,"merge_request":null},"version_id":0,"version_uri":"coda-part-4-register-the-deep-learning-labelled-im-yxmvme7eog3p/v1","versions":[{"id":97512,"title":"CODA (part 4): register the deep learning labelled images and Construct 3D tissue matrix | HuBMAP | JHU-TMC","title_html":"CODA (part 4): register the deep learning labelled images and Construct 3D tissue matrix | HuBMAP | JHU-TMC","image":{"source":"https://www.protocols.io/img/default_protocol.png","webp_source":null,"placeholder":"https://www.protocols.io/img/default_protocol.png","webp_placeholder":null},"doi":"dx.doi.org/10.17504/protocols.io.yxmvme7eog3p/v1","uri":"coda-part-4-register-the-deep-learning-labelled-im-dbgg2jtw","published_on":1712006997,"modified_on":1712006997,"version_class":97512,"version_id":0,"version_code":"dbgg2jtw","version_uri":"coda-part-4-register-the-deep-learning-labelled-im-yxmvme7eog3p/v1","created_on":1711659804,"categories":null,"type_id":1,"creator":{"name":"Kyu Sang Han","affiliation":"Johns Hopkins University","affiliation_url":"","username":"kyu-sang-han","link":"","image":{"source":"https://content.protocols.io/files/p6x4b7aex.jpg","placeholder":"https://content.protocols.io/files/p6x4b7aex.jpg","webp_source":"https://content.protocols.io/files/p6x3b7aex.webp"}},"stats":{"number_of_comments":0,"last_comment_time":0}}],"warning":""}