{"id":48853,"title":"How to dockerize an R Shiny App","title_html":"<p>How to dockerize an R Shiny App<\/p>","image":{"source":"https:\/\/www.protocols.io\/img\/default_protocol.png","placeholder":"https:\/\/www.protocols.io\/img\/default_protocol.png"},"doi":null,"doi_status":0,"uri":"how-to-dockerize-an-r-shiny-app-btxvnpn6","type_id":1,"template_id":5,"published_on":1617632877,"parent_protocols":[],"parent_collections":[],"cited_protocols":[],"version_id":0,"version_data":{"id":"0","code":"btxvnpn6","parent_id":0,"parent_uri":null,"is_same_owner":false,"has_pending_merge_request":false,"has_approved_merge_request":false},"created_on":1617624081,"modified_on":null,"categories":null,"public":1,"is_unlisted":0,"creator":{"name":"Sonia Garc\u00eda-Ruiz","affiliation":null,"affiliations":[],"username":"m4vle152t1u4tle1","note":null,"link":null,"image":{"source":"\/img\/avatars\/009.png","placeholder":"\/img\/avatars\/009.png"},"badges":[{"id":2,"image":{"source":"\/img\/badges\/bronze.svg","placeholder":"\/img\/badges\/bronze.svg"},"name":"Author"}],"verified":0,"is_verified_user":false,"research_interests":null,"blocked_by_you":false,"blocked_you":false,"hide_following":false},"journal":null,"journal_name":null,"journal_link":null,"article_citation":null,"has_versions":0,"link":"","total_collections":0,"number_of_steps":5,"authors":[{"name":"Sonia Garc\u00eda-Ruiz","affiliation":"University College London, University of London","affiliations":[],"username":"m4vle152t1u4tle1","note":"","link":null,"image":{"source":"\/img\/avatars\/009.png","placeholder":"\/img\/avatars\/009.png"},"badges":[],"verified":1,"is_verified_user":true,"research_interests":null,"blocked_by_you":false,"blocked_you":false,"hide_following":false}],"versions":[],"groups":[{"id":22559,"uri":"ryten-laboratory","title":"Ryten Laboratory","image":{"source":"https:\/\/www.protocols.io\/img\/group_placeholder.png","placeholder":"https:\/\/www.protocols.io\/img\/group_placeholder.png"},"tech_support":{"email":null,"phone":null,"hide_contact":0,"use_email":0,"url":null},"is_member":1,"request":{"id":22559,"uri":"ryten-laboratory","title":"Ryten Laboratory","image":{"source":"https:\/\/www.protocols.io\/img\/group_placeholder.png","placeholder":"https:\/\/www.protocols.io\/img\/group_placeholder.png"},"tech_support":{"email":null,"phone":null,"hide_contact":0,"use_email":0,"url":null},"is_member":1,"description":null,"research_interests":null,"website":null,"location":null,"affiliation":null,"status":{"is_visible":true,"access_level":0},"stats":{"files":[],"total_members":0,"total_followers":0,"total_child_groups":0,"total_parent_groups":0,"has_collaborations":0},"user_status":{"is_member":true,"is_confirmed":true,"is_invited":false,"is_owner":true,"is_admin":false,"is_following":false},"join_link":null,"token":null,"owner":{"name":" ","affiliation":null,"affiliations":[],"username":null,"note":null,"link":null,"image":{"source":null,"placeholder":null},"badges":[],"verified":0,"is_verified_user":false,"research_interests":null,"blocked_by_you":false,"blocked_you":false,"hide_following":false},"is_protocol_requested":0,"is_group_requested":0,"is_my":false,"is_request":false,"is_confirmed":1,"is_declined":0,"requester":{"name":" ","affiliation":null,"affiliation_url":null,"username":null,"link":null},"protocol":{"id":0,"title":"How to dockerize an R Shiny App","title_html":"How to dockerize an R Shiny App","image":{"source":null,"placeholder":null},"doi":null,"doi_status":0,"uri":"how-to-dockerize-an-r-shiny-app-btxvnpn6","type_id":1,"template_id":0,"published_on":null,"stats":{"number_of_views":0,"number_of_steps":0,"number_of_bookmarks":0,"number_of_comments":0,"number_of_exports":0,"number_of_runs":0,"number_of_votes":0,"is_voted":0},"parent_protocols":[],"parent_collections":[],"cited_protocols":[]},"created_on":1617632877,"resolve_on":0,"resolved_user":{"name":" ","affiliation":null,"affiliations":[],"username":null,"note":null,"link":null,"image":{"source":null,"placeholder":null},"badges":[],"verified":0,"is_verified_user":false,"research_interests":null,"blocked_by_you":false,"blocked_you":false,"hide_following":false},"shared":false}}],"is_owner":1,"has_subprotocols":0,"is_subprotocol":0,"is_bookmarked":0,"can_claim_authorship":0,"can_accept_authorship":0,"can_be_copied":1,"can_remove_fork":1,"fork_id":null,"url":"https:\/\/www.protocols.io\/view\/how-to-dockerize-an-r-shiny-app-btxvnpn6","forks_count":{"private":0,"public":0},"access":{"can_view":1,"can_remove":1,"can_add":0,"can_edit":0,"can_publish":0,"can_get_doi":1,"can_share":1,"can_move":1,"can_move_outside":1,"can_transfer":1,"can_download":1,"is_locked":0},"guid":"35885770960611EBAAB753C3F36B589A","state_version_id":993,"steps":[{"id":1155989,"guid":"B4725A70960811EBAAB753C3F36B589A","previous_id":null,"previous_guid":null,"modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"9DA26BF12015434D84CB1DC1BE4CF7B3","order_id":1,"type_id":6,"title":"Section","source":{"title":"Docker installation"}},{"id":1054724,"guid":"85CC335629FF4F1190F72FFD25A06DB3","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\">Make sure you have Docker Engine installed on your Operating System. To install it on CentOS: <\/div><div class = \"text-block\"><a href=\"https:\/\/docs.docker.com\/engine\/install\/centos\" style = \"text-decoration:underline;color:blue;cursor:pointer;\"><span style = \":;\">https:\/\/docs.docker.com\/engine\/install\/centos\/<\/span><\/a><\/div><\/div>"}}],"cases":[],"data":null,"html":null,"section":null,"section_color":"#A492FF","section_duration":0,"critical":null,"critical_id":null,"duration":0},{"id":1155990,"guid":"6BB52DC0960911EBAAB753C3F36B589A","previous_id":1155989,"previous_guid":"B4725A70960811EBAAB753C3F36B589A","modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"5C090E776DF746B5BAA981BF2439F8D7","order_id":1,"type_id":6,"title":"Section","source":{"title":"Docker installation"}},{"id":1054724,"guid":"D58A106F076E450EA0FD2406332E34B7","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\">Prepare the R Shiny App you would like to dockerize. In this example, we are going to use vizER, which can be downloaded from <\/div><div class = \"text-block\"><a href=\"https:\/\/github.com\/SoniaRuiz\/vizer\" style = \"text-decoration:underline;color:blue;cursor:pointer;\"><span style = \":;\">https:\/\/github.com\/SoniaRuiz\/vizer<\/span><\/a><\/div><div class = \"text-block\">.<\/div><div class = \"text-block\"><pre><code><div class = \"text-blocks\"><div class = \"text-block\"><span>git clone <\/span><a href=\"https:\/\/github.com\/SoniaRuiz\/vizer.git\" style = \"text-decoration:underline;color:blue;cursor:pointer;\"><span style = \":;\">https:\/\/github.com\/SoniaRuiz\/vizer.git<\/span><\/a><\/div><\/div><\/code><\/pre><\/div><\/div>"}}],"cases":[],"data":null,"html":null,"section":null,"section_color":"#A492FF","section_duration":0,"critical":null,"critical_id":null,"duration":0},{"id":1155992,"guid":"13D15F60960A11EBAAB753C3F36B589A","previous_id":1155990,"previous_guid":"6BB52DC0960911EBAAB753C3F36B589A","modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"8BDE5723575248088BE091E2E0BBFDF2","order_id":1,"type_id":6,"title":"Section","source":{"title":"Docker installation"}},{"id":1054724,"guid":"0BEFE7BB4E5A4FD6AECF8C2249540EDF","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\">Create a Dockerfile and place it within your app folder, in this example within \".\/vizER\".<\/div><div class = \"text-block\">A Dockerfile is a plain-text and extensionless file, which contains a set of instructions to create a Docker image. The example shown below contains the following commands:<\/div><div class = \"text-block\"><ul style = \"list-style-type:disc;\"><li style = \"counter-reset:ol0;list-style-type:disc;\"><span style = \"font-style:italic;\">FROM: <\/span><span>indicates the base docker image to be used. This pre-existing image contains the installation of the operating system Linux with a basic R environment configuration.<\/span><\/li><li style = \"counter-reset:ol0;list-style-type:disc;\"><span style = \"font-style:italic;\">RUN apt-get update && apt-get install<\/span><span>, indicates the set of dependencies to be installed. These will be all R packages that vizER may need during its execution time.<\/span><\/li><li style = \"counter-reset:ol0;list-style-type:disc;\">COPY, indicates the local files and folders to be copied into the Docker image.<\/li><li style = \"counter-reset:ol0;list-style-type:disc;\"><span style = \"font-style:italic;\">RUN mkdir<\/span><span>, which indicates the folder to be created to contain all vizER's data dependencies. In this case, these data dependencies are too large to be copied within the Docker image; instead, they will be mounted in the indicated folder during the Docker image execution.<\/span><\/li><li style = \"counter-reset:ol0;list-style-type:disc;\"><span style = \"font-style:italic;\">CMD<\/span><span>: R command to execute the Shiny App.<\/span><\/li><\/ul><\/div><div class = \"text-block\"><pre><code><div class = \"text-blocks\"><div class = \"text-block\">FROM openanalytics\/r-base<\/div><div class = \"text-block\">MAINTAINER Sonia Garcia-Ruiz \"s.ruiz@ucl.ac.uk\"<\/div><div class = \"text-block\">RUN apt-get update && apt-get install -y --no-install-recommends \\<\/div><div class = \"text-block\">\tlibxt-dev \\<\/div><div class = \"text-block\">\tlibcairo2-dev \\<\/div><div class = \"text-block\">        libxml2-dev \\<\/div><div class = \"text-block\">        libssl-dev \\<\/div><div class = \"text-block\">        libcurl4-openssl-dev \\<\/div><div class = \"text-block\">        libv8-3.14-dev \\<\/div><div class = \"text-block\">        libsqlite3-dev \\<\/div><div class = \"text-block\">        libmariadb-client-lgpl-dev \\<\/div><div class = \"text-block\">\t\t&& rm -rf \/var\/lib\/apt\/lists\/* \\<\/div><div class = \"text-block\"><span>\t\t&& R -e \"install.packages(c('shiny','rmarkdown','ggpubr','shinyjs','openssl','httr','DT', 'RMySQL','tidyverse','RSQLite'), repos='<\/span><a href=\"http:\/\/cran.rstudio.com\/',\" style = \"text-decoration:underline;color:blue;cursor:pointer;\"><span style = \":;\">http:\/\/cran.rstudio.com\/',<\/span><\/a><span> dependencies=T)\" \\<\/span><\/div><div class = \"text-block\"><span>\t\t&& R -e \"source('<\/span><a href=\"https:\/\/bioconductor.org\/biocLite.R');\" style = \"text-decoration:underline;color:blue;cursor:pointer;\"><span style = \":;\">https:\/\/bioconductor.org\/biocLite.R');<\/span><\/a><span> biocLite('biomaRt'); biocLite('GenomicFeatures'); biocLite('Gviz'); biocLite('regioneR'); biocLite('GenomicScores')\" \\<\/span><\/div><div class = \"text-block\">\t\t&& mkdir \/root\/vizER<\/div><div class = \"text-block\">COPY vizER \/root\/vizER<\/div><div class = \"text-block\">COPY Rprofile.site \/usr\/lib\/R\/etc\/<\/div><div class = \"text-block\">RUN mkdir \/root\/vizER\/vizER_data<\/div><div class = \"text-block\">EXPOSE 3838<\/div><div class = \"text-block\">CMD [\"R\", \"-e\", \"shiny::runApp('\/root\/vizER')\"]<\/div><\/div><\/code><\/pre><\/div><\/div>"}}],"cases":[],"data":null,"html":null,"section":null,"section_color":"#A492FF","section_duration":0,"critical":null,"critical_id":null,"duration":0},{"id":1155993,"guid":"32002170960E11EBAAB753C3F36B589A","previous_id":1155992,"previous_guid":"13D15F60960A11EBAAB753C3F36B589A","modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"FF6A64C74B02421DA7A95110F3EA75C0","order_id":1,"type_id":6,"title":"Section","source":{"title":"Docker installation"}},{"id":1054724,"guid":"FC51AA2B96F7479B9A86D32FF17621F6","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\">Once the Dockerfile has been created, we need to build the Docker image. Please, be aware that before running this command, it is essential to be located within the same folder containing both the Dockerfile and the ShinyApp files (app.R, ui.R, server.R files, etc.):<\/div><div class = \"text-block\"><pre><code><div class = \"text-blocks\"><div class = \"text-block\">sudo docker build -t vizER .<\/div><\/div><\/code><\/pre><\/div><\/div>"}}],"cases":[],"data":null,"html":null,"section":null,"section_color":"#A492FF","section_duration":0,"critical":null,"critical_id":null,"duration":0},{"id":1156044,"guid":"3B39C550961A11EB9A075B5AF854A608","previous_id":1155993,"previous_guid":"32002170960E11EBAAB753C3F36B589A","modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"44576763970841E5A012B29C9AC73F9C","order_id":1,"type_id":6,"title":"Section","source":{"title":"Docker installation"}},{"id":1054724,"guid":"CDB4F347EBD1445CBC5C7CFF487EF322","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\">Finally, we run the docker image:<\/div><div class = \"text-block\"><pre><code><div class = \"text-blocks\"><div class = \"text-block\">sudo docker run -p 3838:3838 vizER<\/div><\/div><\/code><\/pre><\/div><div class = \"text-block\">To include the dependencies folder:<\/div><div class = \"text-block\"><pre><code><div class = \"text-blocks\"><div class = \"text-block\">sudo docker run --rm -p 3838:3838 \\<\/div><div class = \"text-block\">    -v .\/thedependenciesfolder:\/root\/vizER\/vizER_data\/ \\<\/div><div class = \"text-block\">    vizER<\/div><\/div><\/code><\/pre><\/div><\/div>"}}],"cases":[],"data":null,"html":null,"section":null,"section_color":"#A492FF","section_duration":0,"critical":null,"critical_id":null,"duration":0}],"document":"","materials":[],"description":"<div class = \"text-blocks\"><div class = \"text-block\"><span>This protocol contains the steps to dockerize an R Shiny App. The Shiny App used as an example is vizER (<\/span><a href=\"https:\/\/rytenlab.com\/browser\/app\/vizER\" style = \"text-decoration:underline;color:blue;cursor:pointer;\"><span style = \":;\">https:\/\/rytenlab.com\/browser\/app\/vizER<\/span><\/a><span>), a platform that enables the visualisation of individual genes for evidence of reannotation developed by the RytenLab team (<\/span><a href=\"https:\/\/rytenlab.com\" style = \"text-decoration:underline;color:blue;cursor:pointer;\"><span style = \":;\">https:\/\/rytenlab.com\/<\/span><\/a><span>).<\/span><\/div><div class = \"text-block\"><span>vizER was released as part of the publication <\/span><a href=\"https:\/\/advances.sciencemag.org\/content\/6\/24\/eaay8299.full\" style = \"text-decoration:underline;color:blue;cursor:pointer;\"><span style = \":;font-style:italic;\">Incomplete annotation has a disproportionate impact on our understanding of Mendelian and complex neurogenetic disorders<\/span><\/a><\/div><\/div>","changed_on":1617632877}