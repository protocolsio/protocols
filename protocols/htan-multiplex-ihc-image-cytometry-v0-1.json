{"id":47595,"title":"HTAN Multiplex IHC Image Cytometry V0.1","title_html":"<p>HTAN Multiplex IHC Image Cytometry V0.1<\/p>","image":{"source":"https:\/\/s3.amazonaws.com\/protocols-files\/files\/dse3bcedx.jpg","placeholder":"https:\/\/s3.amazonaws.com\/protocols-files\/files\/dse3bcedx.jpg"},"doi":"dx.doi.org\/10.17504\/protocols.io.bsqjndun","doi_status":2,"uri":"htan-multiplex-ihc-image-cytometry-v0-1-bsqjndun","type_id":1,"template_id":5,"published_on":1623200038,"parent_protocols":[],"parent_collections":[],"cited_protocols":[],"version_id":0,"version_data":{"id":"0","code":"bsqjndun","parent_id":0,"parent_uri":null,"is_same_owner":false,"has_pending_merge_request":false,"has_approved_merge_request":false},"created_on":1614148149,"modified_on":null,"categories":null,"public":1,"is_unlisted":0,"creator":{"name":"Shamilene Sivagnanam","affiliation":"Oregon health and Science University, Cell, Developmental, and Cancer Biology Department, Laboratory of Dr. Lisa Coussens, Portland, OR, USA","affiliations":[{"affiliation":"Oregon health and Science University, Cell, Developmental, and Cancer Biology Department, Laboratory of Dr. Lisa Coussens, Portland, OR, USA","url":"","is_default":1}],"username":"shamilene-sivagnanam","note":null,"link":null,"image":{"source":"\/img\/avatars\/017.png","placeholder":"\/img\/avatars\/017.png"},"badges":[{"id":2,"image":{"source":"\/img\/badges\/bronze.svg","placeholder":"\/img\/badges\/bronze.svg"},"name":"Author"}],"verified":0,"is_verified_user":false,"research_interests":null,"blocked_by_you":false,"blocked_you":false,"hide_following":false},"journal":null,"journal_name":null,"journal_link":null,"article_citation":null,"has_versions":0,"link":null,"total_collections":0,"number_of_steps":15,"authors":[{"name":"Shamilene Sivagnanam","affiliation":"Oregon health and Science University, Cell, Developmental, and Cancer Biology Department, Laboratory of Dr. Lisa Coussens, Portland, OR, USA; Department of Computational Biology, Oregon Health and Science University, Portland, OR, USA","affiliations":[],"username":"shamilene-sivagnanam","note":null,"link":null,"image":{"source":"\/img\/avatars\/017.png","placeholder":"\/img\/avatars\/017.png"},"badges":[],"verified":1,"is_verified_user":true,"research_interests":null,"blocked_by_you":false,"blocked_you":false,"hide_following":false},{"name":"Courtney Betts","affiliation":"Oregon health and Science University, Cell, Developmental, and Cancer Biology Department, Laboratory of Dr. Lisa Coussens, Portland, OR, USA","affiliations":[],"username":"courtney-betts","note":null,"link":null,"image":{"source":"\/img\/avatars\/003.png","placeholder":"\/img\/avatars\/003.png"},"badges":[],"verified":1,"is_verified_user":true,"research_interests":null,"blocked_by_you":false,"blocked_you":false,"hide_following":false},{"name":"Lisa Coussens","affiliation":"Professor and Chairwoman, Cell, Developmental and Cancer Biology Department, Hildegard Lamfrom Endowed Chair in Basic Science, Associate Director for Basic Science, Knight Cancer Institute, Oregon ","affiliations":[],"username":null,"note":null,"link":null,"image":{"source":null,"placeholder":null},"badges":[],"verified":0,"is_verified_user":false,"research_interests":null,"blocked_by_you":false,"blocked_you":false,"hide_following":false}],"versions":[],"groups":[{"id":1131,"uri":"ncihtan","title":"NCIHTAN","image":{"source":"https:\/\/s3.amazonaws.com\/protocols-files\/public\/fab68a45de8d96d315263854984f7d75d65fdcb06fee0da0bac494af48356639\/bnnv4csn.png","placeholder":"https:\/\/s3.amazonaws.com\/protocols-files\/public\/fab68a45de8d96d315263854984f7d75d65fdcb06fee0da0bac494af48356639\/bnnv4csn.png"},"tech_support":{"email":"","phone":null,"hide_contact":0,"use_email":0,"url":null},"is_member":1,"request":{"id":1131,"uri":"ncihtan","title":"NCIHTAN","image":{"source":"https:\/\/s3.amazonaws.com\/protocols-files\/public\/fab68a45de8d96d315263854984f7d75d65fdcb06fee0da0bac494af48356639\/bnnv4csn.png","placeholder":"https:\/\/s3.amazonaws.com\/protocols-files\/public\/fab68a45de8d96d315263854984f7d75d65fdcb06fee0da0bac494af48356639\/bnnv4csn.png"},"tech_support":{"email":"","phone":null,"hide_contact":0,"use_email":0,"url":null},"is_member":1,"description":null,"research_interests":null,"website":null,"location":null,"affiliation":null,"status":{"is_visible":true,"access_level":0},"stats":{"files":[],"total_members":0,"total_followers":0,"total_child_groups":0,"total_parent_groups":0,"has_collaborations":0},"user_status":{"is_member":true,"is_confirmed":true,"is_invited":false,"is_owner":false,"is_admin":false,"is_following":false},"join_link":null,"token":null,"owner":{"name":" ","affiliation":null,"affiliations":[],"username":null,"note":null,"link":null,"image":{"source":null,"placeholder":null},"badges":[],"verified":0,"is_verified_user":false,"research_interests":null,"blocked_by_you":false,"blocked_you":false,"hide_following":false},"is_protocol_requested":0,"is_group_requested":0,"is_my":false,"is_request":false,"is_confirmed":1,"is_declined":0,"requester":{"name":" ","affiliation":null,"affiliation_url":null,"username":null,"link":null},"protocol":{"id":0,"title":"HTAN Multiplex IHC Image Cytometry V0.1","title_html":"HTAN Multiplex IHC Image Cytometry V0.1","image":{"source":null,"placeholder":null},"doi":null,"doi_status":0,"uri":"htan-multiplex-ihc-image-cytometry-v0-1-bsqjndun","type_id":1,"template_id":0,"published_on":null,"stats":{"number_of_views":0,"number_of_steps":0,"number_of_bookmarks":0,"number_of_comments":0,"number_of_exports":0,"number_of_runs":0,"number_of_votes":0,"is_voted":0},"parent_protocols":[],"parent_collections":[],"cited_protocols":[]},"created_on":1623200038,"resolve_on":0,"resolved_user":{"name":" ","affiliation":null,"affiliations":[],"username":null,"note":null,"link":null,"image":{"source":null,"placeholder":null},"badges":[],"verified":0,"is_verified_user":false,"research_interests":null,"blocked_by_you":false,"blocked_you":false,"hide_following":false},"shared":false}}],"is_owner":1,"has_subprotocols":0,"is_subprotocol":0,"is_bookmarked":0,"can_claim_authorship":0,"can_accept_authorship":0,"can_be_copied":1,"can_remove_fork":1,"fork_id":null,"url":"https:\/\/www.protocols.io\/view\/htan-multiplex-ihc-image-cytometry-v0-1-bsqjndun","forks_count":{"private":0,"public":0},"access":{"can_view":1,"can_remove":0,"can_add":0,"can_edit":0,"can_publish":0,"can_get_doi":0,"can_share":1,"can_move":1,"can_move_outside":1,"can_transfer":1,"can_download":1,"is_locked":0},"guid":"E853A859646A4A41A3D9AD19D88C52DE","state_version_id":225,"steps":[{"id":1132574,"guid":"ADC3E4FC0A034521B67B73F58CFFD105","previous_id":null,"previous_guid":null,"modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"AD6BAC202FCC435287DB986B10D01751","order_id":1,"type_id":6,"title":"Section","source":{"title":"File prep and Folder Structure"}},{"id":1054724,"guid":"C694EB5EA8644C5AAE843C68FBCE850A","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\"><span style = \"font-weight:bold;\">FOLDER AND FILE NAMING CONVENTION<\/span><\/div><div class = \"text-block\">Make sure folder and file naming convention is consistent throughout the entire study. Filenaming convention should be used when saving images during acquisition. <\/div><\/div>"}},{"id":1054725,"guid":"9F9A4A3BD7BB49B18497FF39C7CEB6B4","order_id":2,"type_id":26,"title":"notes","source":{"id":0,"parent_id":0,"uri":"","title":"","body":"<div class = \"text-blocks\"><div class = \"text-block\"><span style = \"font-weight:bold;\">NAMING SLIDE FOLDERS AND IMAGE FILES<\/span><\/div><div class = \"text-block\">Each slide folder in a cohort batch should maintain some consistent format of letters and numbers:<\/div><div class = \"text-block\"><span style = \"font-weight:bold;\">Example slide folder name: 1 letter, 6 numbers<\/span><\/div><div class = \"text-block\">H342253<\/div><div class = \"text-block\">H342259<\/div><div class = \"text-block\">Each newly scanned image from one slide should be named with the following file naming convention at acquisition:<\/div><div class = \"text-block\">Initials_StudyID_UniqueSlideID_PanelName_CycleRound_Marker.SVS<\/div><div class = \"text-block\"><span style = \"font-weight:bold;\">Example file name:<\/span><\/div><div class = \"text-block\">GG_HTAN1_H342253_D18_C01R1_PD1.svs<\/div><div class = \"text-block\">GG_HTAN1_H342253_D18_C01R2_PDL1.svs<\/div><\/div>","created_on":0,"changed_on":0,"creator":{"name":" ","affiliation":null,"affiliations":[],"username":"","note":null,"link":null,"image":{"source":"","placeholder":""},"badges":[],"verified":0,"is_verified_user":false,"research_interests":null,"blocked_by_you":false,"blocked_you":false,"hide_following":false},"comments":[]}}],"cases":[],"data":null,"html":null,"section":null,"section_color":"#A492FF","section_duration":0,"critical":null,"critical_id":null,"duration":0},{"id":1132575,"guid":"8592F764E8ED41C7BAA2D99B29E0C70A","previous_id":1132574,"previous_guid":"ADC3E4FC0A034521B67B73F58CFFD105","modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"E2154806D0B64E3EA86423E9C03C78A9","order_id":1,"type_id":6,"title":"Section","source":{"title":"File prep and Folder Structure"}},{"id":1054724,"guid":"420E1E557BE943BFA8FEB8407A0AF5AC","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\"><span style = \"font-weight:bold;\">SET UP FOLDER STRUCTURE<\/span><\/div><div class = \"text-block\">The pipeline is optimal for batches of slides that run from a 'Parent' folder, that is the study or batch directory.<\/div><div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/s3.amazonaws.com\/protocols-files\/files\/dse5bcedx.jpg\" \/><\/div><div class = \"text-block\">The study folder structure should be organized as the cohort\/study\/batch of slides as the parent folder, with each slide within the study containing all marker files with no duplicate scans of markers. <\/div><div class = \"text-block\">There should be an initial hematoxylin, a second hematoxylin after antigen retrieval, and a third hematoxylin at the end of the panel - see mIHC wet lab protocol for details: <\/div><div class = \"text-block\">Below is an example of the folder structure of a study called HTAN1 that contains 1 slide (H342253), 17 marker images, and 3 hematoxylin stained images. <\/div><\/div>"}},{"id":1054725,"guid":"5C25C053A22E4B81B0B576161A9654B4","order_id":2,"type_id":1,"title":"description","source":{"description":"<div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/s3.amazonaws.com\/protocols-files\/files\/dse5bcedx.jpg\" \/><\/div>"}},{"id":1054726,"guid":"23756E382F9242918DD0522CC1128726","order_id":3,"type_id":26,"title":"notes","source":{"id":0,"parent_id":0,"uri":"","title":"","body":"<div class = \"text-blocks\"><div class = \"text-block\"><span style = \"font-weight:bold;\">Example study folder structure:<\/span><\/div><div class = \"text-block\">\u251c\u2500\u2500 HTAN1 (Parent Study)<\/div><div class = \"text-block\">\u2502\u00a0\u00a0 \u251c\u2500\u2500 H342253 (Slide 1)<\/div><div class = \"text-block\">\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 GG_HTAN1_H342253_D18_C00R1_HEM.svs<\/div><div class = \"text-block\">\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 GG_HTAN1_H342253_D18_C01R1_PD1.svs<\/div><div class = \"text-block\">\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 GG_HTAN1_H342253_D18_C01R2_PDL1.svs<\/div><div class = \"text-block\">\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 GG_HTAN1_H342253_D18_C01R3_HEM.svs<\/div><div class = \"text-block\">\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 GG_HTAN1_H342253_D18_C02R1_HLADPDQDR.svs<\/div><div class = \"text-block\">\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 GG_HTAN1_H342253_D18_C02R2_DCLAMP.svs<\/div><div class = \"text-block\">\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 GG_HTAN1_H342253_D18_C03R1_CD3.svs<\/div><div class = \"text-block\">\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 GG_HTAN1_H342253_D18_C03R2_CD45.svs<\/div><div class = \"text-block\">\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 GG_HTAN1_H342253_D18_C04R1_CD8.svs<\/div><div class = \"text-block\">\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 GG_HTAN1_H342253_D18_C05R1_GRZB.svs<\/div><div class = \"text-block\">\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 GG_HTAN1_H342253_D18_C05R2_CD20.svs<\/div><div class = \"text-block\">\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 GG_HTAN1_H342253_D18_C06R1_CD68.svs<\/div><div class = \"text-block\">\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 GG_HTAN1_H342253_D18_C07R1_CD66B.svs<\/div><div class = \"text-block\">\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 GG_HTAN1_H342253_D18_C07R2_CD11C.svs<\/div><div class = \"text-block\">\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 GG_HTAN1_H342253_D18_C08R1_CD163-001.svs<\/div><div class = \"text-block\">\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 GG_HTAN1_H342253_D18_C09R1_EOMES.svs<\/div><div class = \"text-block\">\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 GG_HTAN1_H342253_D18_C10R1_FOXP3.svs<\/div><div class = \"text-block\">\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 GG_HTAN1_H342253_D18_C11R1_KI67.svs<\/div><div class = \"text-block\">\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 GG_HTAN1_H342253_D18_C11R2_PANCK.svs<\/div><div class = \"text-block\">\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 GG_HTAN1_H342253_D18_C11R3_HEM.svs<\/div><\/div>","created_on":0,"changed_on":0,"creator":{"name":" ","affiliation":null,"affiliations":[],"username":"","note":null,"link":null,"image":{"source":"","placeholder":""},"badges":[],"verified":0,"is_verified_user":false,"research_interests":null,"blocked_by_you":false,"blocked_you":false,"hide_following":false},"comments":[]}}],"cases":[],"data":null,"html":null,"section":null,"section_color":"#A492FF","section_duration":0,"critical":null,"critical_id":null,"duration":0},{"id":1132576,"guid":"7BFB3AFD3C2A4C5D85990EA8D802F97E","previous_id":1132575,"previous_guid":"8592F764E8ED41C7BAA2D99B29E0C70A","modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"81FBA7578103429A97B03F9767CB1DCC","order_id":1,"type_id":6,"title":"Section","source":{"title":"Get Code and Required Software "}},{"id":1054724,"guid":"5AD437C6B0E2408FA4C904A74E25054F","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\"><span style = \"font-weight:bold;\">DOWNLOAD SOFTWARE AND CODE<\/span><\/div><div class = \"text-block\">Download or clone the MultiplexIHC_Code.zip file that contains all the functions and code for image processing. Save and unzip this folder somewhere other than your Downloads directory.<\/div><div class = \"text-block\">git@github.com:Sivoyer\/MultiplexIHC_Code.git<\/div><div class = \"text-block\">\u251c\u2500\u2500 AEC_CMYK_ColorDecon.ijm<\/div><div class = \"text-block\">\u251c\u2500\u2500 CP_DiscoveryPanelTemplate.cpproj<\/div><div class = \"text-block\">\u251c\u2500\u2500 CommandLine<\/div><div class = \"text-block\">\u2502\u00a0\u00a0 \u251c\u2500\u2500 AEC_CMYK_ColorDecon.txt<\/div><div class = \"text-block\">\u2502\u00a0\u00a0 \u251c\u2500\u2500 CL_Registration<\/div><div class = \"text-block\">\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 get_image_sets.m<\/div><div class = \"text-block\">\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 parse_xml.m<\/div><div class = \"text-block\">\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 register_SURF.m<\/div><div class = \"text-block\">\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 run_mIHC_registration.m<\/div><div class = \"text-block\">\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 sort_regions.m<\/div><div class = \"text-block\">\u2502\u00a0\u00a0 \u2514\u2500\u2500 Nuclei_BinaryMask.txt<\/div><div class = \"text-block\">\u251c\u2500\u2500 Nuclei_BinaryMask.ijm<\/div><div class = \"text-block\">\u251c\u2500\u2500 README.md<\/div><div class = \"text-block\">\u2514\u2500\u2500 Registration<\/div><div class = \"text-block\">\u251c\u2500\u2500 get_image_sets.m<\/div><div class = \"text-block\">\u251c\u2500\u2500 mIHC_Registration.m<\/div><div class = \"text-block\">\u251c\u2500\u2500 parse_xml.m<\/div><div class = \"text-block\">\u251c\u2500\u2500 register_SURF.m<\/div><div class = \"text-block\">\u2514\u2500\u2500 sort_regions.m<\/div><div class = \"text-block\">In addition to this code, you will also need the following software installed:<\/div><div class = \"text-block\"><span style = \"font-weight:bold;\">Registration is performed in Matlab R2018b or higher:<\/span><\/div><div class = \"text-block\">Additional toolboxes required: Computer Vision Toolbox<\/div><div class = \"text-block\"><span style = \"font-weight:bold;\">Color Deconvolution and Nuclei Segmentation is performed in FIJI:<\/span><\/div><div class = \"text-block\">Additional files required: <\/div><div class = \"text-block\">To install this .class file, drag and drop into FIJI bar, then close and restart the program.<\/div><div class = \"text-block\"><span style = \"font-weight:bold;\">Single Cell Quantification is performed in Cell Profiler 3:<\/span><\/div><\/div>"}},{"id":1054725,"guid":"807B5990E25011EAB7B4734BE94EA34E","order_id":2,"type_id":8,"title":"software","source":{"name":"Multiplex IHC Code","developer":"","repository":"","link":"https:\/\/github.com\/Sivoyer\/MultiplexIHC_Code","os_name":"","os_version":""}},{"id":1054726,"guid":"D0028AB0E25011EAB7B4734BE94EA34E","order_id":3,"type_id":8,"title":"software","source":{"name":"MatLab","developer":"","repository":"","link":"https:\/\/www.mathworks.com","os_name":"","os_version":""}},{"id":1054727,"guid":"FDF367F0E25011EAB7B4734BE94EA34E","order_id":4,"type_id":8,"title":"software","source":{"name":"FIJI (FIJI Is Just ImageJ)","developer":"","repository":"","link":"https:\/\/imagej.net\/Fiji\/Downloads","os_name":"","os_version":""}},{"id":1054728,"guid":"6A0EF8B0189211EBB1EC5BFF7D227895","order_id":5,"type_id":23,"title":"file","source":{"source":"https:\/\/s3.amazonaws.com\/protocols-files\/private\/be87055278f667df8be1b3fd32deba053265a7156a05916529399b9465fd44c2\/cppfbcedx.class","placeholder":"","original_name":"RGB_to_CMYK.class"}},{"id":1054729,"guid":"2667B2E0E25111EAB7B4734BE94EA34E","order_id":6,"type_id":8,"title":"software","source":{"name":"Cell Profiler","developer":"","repository":"","link":"https:\/\/cellprofiler.org\/","os_name":"","os_version":""}}],"cases":[],"data":null,"html":null,"section":null,"section_color":"#94EBFF","section_duration":0,"critical":null,"critical_id":null,"duration":0},{"id":1132577,"guid":"E9981430917449FE9F027CF67D25FF78","previous_id":1132576,"previous_guid":"7BFB3AFD3C2A4C5D85990EA8D802F97E","modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"DF3E7129F7FC41E085453FF2211A675D","order_id":1,"type_id":6,"title":"Section","source":{"title":"Pipeline Overview"}},{"id":1054724,"guid":"CF07C31733A748539AB8CE8EBFC10625","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\"><span style = \"font-weight:bold;\">PIPELINE OVERVIEW<\/span><\/div><div class = \"text-block\">Once file names and folder structure is properly formatted for mIHC image processing, batch analysis can be performed. For every slide, multiple regions can be selected, avoiding regions of tissue deformation, necrosis, or other artifact or trouble tissue regions. <\/div><div class = \"text-block\">The image processing workflow utilizes steps commonly found in biological image analysis that have been optimized for brightfield RGB multplexIHC images with AEC chromogen and hematoxylin. Although image processing can be completely automated, it is highly recommended that each step is checked to ensure data is as expected and is of high enough quality to continue processing. The modular steps allow for QC and adjustments at each major step. <\/div><div class = \"text-block\"><span style = \"font-weight:bold;\">Brief Description of Image Processing Workflow <\/span><\/div><div class = \"text-block\">Each region is registered to the final stained hematoxylin image from the same area, aligning each image such that major shifts due to repetitive scanning are adjusted for. Color deconvolution separates the AEC conjugated Ab signal from background. Single cell nuclei segmentation identifies cell areas using hematoxylin stain. Each identified cell is measured for mean intensity of every signal extracted marker.<\/div><div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/s3.amazonaws.com\/protocols-files\/files\/dse9bcedx.jpg\" \/><\/div><\/div>"}},{"id":1054725,"guid":"30509E99646C4203999D00F92E9EA9F4","order_id":2,"type_id":1,"title":"description","source":{"description":"<div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/s3.amazonaws.com\/protocols-files\/files\/dse9bcedx.jpg\" \/><\/div>"}}],"cases":[],"data":null,"html":null,"section":null,"section_color":"#84CE84","section_duration":0,"critical":null,"critical_id":null,"duration":0},{"id":1132578,"guid":"81AB44BFBE2C44CF88266BA2E4593AD2","previous_id":1132577,"previous_guid":"E9981430917449FE9F027CF67D25FF78","modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"6D142287AC0E4B35BD5012F590CEF136","order_id":1,"type_id":6,"title":"Section","source":{"title":"Region of Interest Selection"}},{"id":1054724,"guid":"B71936BC26CC46B78E1FF6F704A3FA2E","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\"><span style = \"font-weight:bold;\">SELECT REGIONS OF INTEREST <\/span><\/div><div class = \"text-block\">Regions are annotated in Aperio ImageScope, available for Windows only.<\/div><div class = \"text-block\"><span style = \"font-weight:bold;\">Annotating Regions on final hematoxylin<\/span><\/div><div class = \"text-block\">Regions of interest are annotated on the last hematoxylin image to ensure that only cells maintained throughout all staining cycles and rounds are evaluated in downstream analysis. <\/div><div class = \"text-block\"><span style = \"font-style:italic;\">Tissue areas that are lost, deformed, folded, or of poor quality should be excluded from analysis. <\/span><\/div><\/div>"}},{"id":1054725,"guid":"35B0B8F0C56E11EA89E0EF5CF86E4301","order_id":2,"type_id":8,"title":"software","source":{"name":"ImageScope","developer":"Leica, Aperio","repository":"","link":"https:\/\/www.leicabiosystems.com\/digital-pathology\/manage\/aperio-imagescope\/","os_name":"","os_version":""}},{"id":1054726,"guid":"3C44E5F0635D45DE8AF3B08F57AABC4C","order_id":3,"type_id":26,"title":"notes","source":{"id":0,"parent_id":0,"uri":"","title":"","body":"<div class = \"text-blocks\"><div class = \"text-block\"><span style = \"font-weight:bold;\">DRAWING REGIONS IN IMAGESCOPE<\/span><\/div><div class = \"text-block\"><span style = \"font-weight:bold;\">1. <\/span><span>Open the last cycle hematoxylin image in ImageScope. <\/span><\/div><div class = \"text-block\"><span>        <\/span><span style = \"vertical-align:super;vertical-align:sub;font-weight:bold;\">Example: <\/span><span style = \"vertical-align:super;vertical-align:sub;\"> GG_HTAN<\/span><span style = \"vertical-align:sub;\">1_H<\/span><span style = \"vertical-align:super;vertical-align:sub;\">342259_D18_<\/span><span style = \"vertical-align:super;vertical-align:sub;font-weight:bold;\">C11R3<\/span><span style = \"vertical-align:super;vertical-align:sub;\">_HEM.svs<\/span><\/div><div class = \"text-block\"><span style = \"font-weight:bold;\">2.<\/span><span> Select the rectangle tool for annotating boxes.<\/span><\/div><div class = \"text-block\"><span style = \"font-weight:bold;\">3.<\/span><span> Draw boxes on areas of tissue that are of good quality (no folds, tissue loss, tissue deformation<\/span><\/div><div class = \"text-block\">       - Box sizes can be uniformly sized in settings, but only square\/rectangle regions accepted.<\/div><div class = \"text-block\">       - Boxes should consist of tissue area with <= ~65000 cells <\/div><div class = \"text-block\">         (constraint of ROI cell classification downstream if using FCS Express Image Cytometry) <\/div><div class = \"text-block\"><span style = \"font-weight:bold;\">4. <\/span><span>When ROIs have been annotated, you can view the list of them on the Annotations - Detailed View in ImageScope<\/span><\/div><div class = \"text-block\"><span>For more instructions on using Aperio ImageScope please see the manual: <\/span><a href=\"#\" style = \"text-decoration:underline;color:blue;cursor:pointer;\"><span style = \":;\"> <\/span><\/a><span style = \":;\"> <\/span><\/div><div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/s3.amazonaws.com\/protocols-files\/files\/dsfbbcedx.jpg\" \/><\/div><div class = \"text-block\"><span style = \"font-weight:bold;\">5.<\/span><span> Close the SVS file and you will be prompted to save annotations. Select yes, and ImageScope will save an XML with the same filename as the image it was drawn on (last hem). <\/span><span style = \"font-weight:bold;\">Do not rename or move this file out of the slide folder containing the SVS images. <\/span><\/div><\/div>","created_on":0,"changed_on":0,"creator":{"name":" ","affiliation":null,"affiliations":[],"username":"","note":null,"link":null,"image":{"source":"","placeholder":""},"badges":[],"verified":0,"is_verified_user":false,"research_interests":null,"blocked_by_you":false,"blocked_you":false,"hide_following":false},"comments":[]}}],"cases":[],"data":null,"html":null,"section":null,"section_color":"#d0021b","section_duration":0,"critical":null,"critical_id":null,"duration":0},{"id":1132579,"guid":"E6D82333B24347C087A78859777B0118","previous_id":1132578,"previous_guid":"81AB44BFBE2C44CF88266BA2E4593AD2","modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"9435010C03354464986FB98E099EC2FA","order_id":1,"type_id":6,"title":"Section","source":{"title":"Workflow Options"}},{"id":1054724,"guid":"785019B2D49041189BF752AF44E55624","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\"><span style = \"font-weight:bold;\">Pipeline Run Options<\/span><\/div><div class = \"text-block\">This can be run using the software interfaces (code free), or by terminal. Instructions for both methods are listed below:<\/div><\/div>"}}],"cases":[{"guid":"0BF65D4241D047B585A722F8577DC130","step_guid":"E6D82333B24347C087A78859777B0118","title":"Run mIHC Image Processing via Command Line","short_title":null,"description":"{\"blocks\":[{\"key\":\"cn1qo\",\"text\":\"MacOS\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}}],\"entityMap\":{}}","first_step_id":1132580,"first_step_guid":"E0954077FF794230BC6E73C1AA407373"},{"guid":"B133DBFB109448B19DD735B3BD29A64A","step_guid":"E6D82333B24347C087A78859777B0118","title":"Run mIHC Image Processing via Software Interface","short_title":null,"description":"{\"blocks\":[{\"key\":\"8i44s\",\"text\":\"Windows or MacOS\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}}],\"entityMap\":{}}","first_step_id":1132585,"first_step_guid":"1B0A713E55454C3295FBA425DFC7E88B"}],"data":null,"html":null,"section":null,"section_color":"#FFED92","section_duration":0,"critical":null,"critical_id":null,"duration":0},{"id":1132580,"guid":"E0954077FF794230BC6E73C1AA407373","previous_id":1132579,"previous_guid":"E6D82333B24347C087A78859777B0118","modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"F2AB392345C54DCABF80D56F3708EA0B","order_id":1,"type_id":6,"title":"Section","source":{"title":"Image Registration"}},{"id":1054724,"guid":"F2707EA2D67045C2B1A1EE63B6B50FBA","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\"><div class = \"justify\" style = \"text-align:center\"><\/div><\/div><div class = \"text-block\"><span style = \"font-weight:bold;\">IMAGE REGISTRATION<\/span><\/div><div class = \"text-block\"><span style = \"font-weight:bold;\">How registration works:<\/span><\/div><div class = \"text-block\">Image registration is performed in Matlab. Each marker image is registered to the last cycle target hematoxylin image. Keypoints are identified on the blue channel of the hematoxylin image and the blue channel of the AEC marker image.<\/div><div class = \"text-block\">If not enough matching keypoints are found, other single RGB channels are checked for more keypoints, and the channels with the highest strongest matching indexed keypoints are used. A similarity based geometric transform is generated and applied to each channel of the marker image and merged. The registered RGB image is saved as a TIFF inside an automatically generated 'Registered_Regions' folder created in the slide\/region folder.<\/div><div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/s3.amazonaws.com\/protocols-files\/files\/dsffbcedx.jpg\" \/><\/div><div class = \"text-block\"><ul style = \"list-style-type:disc;\"><li style = \"counter-reset:ol0;list-style-type:disc;\"><span>Replace <\/span><span style = \"font-style:italic;\"><path\/to\/matlab><\/span><span> with the path to your matlab application. For macOS, it is likely: <\/span><span style = \"font-style:italic;\">\/Applications\/MATLAB_R2018b.app\/bin\/matlab<\/span><\/li><li style = \"counter-reset:ol0;list-style-type:disc;\"><\/li><li style = \"counter-reset:ol0;list-style-type:disc;\"><span>Replace <\/span><span style = \"font-style:italic;\"><path\/to\/matlab\/code-dir><\/span><span> with the path to the location where you saved the MultiplexIHC_RegistrationCode directory.<\/span><\/li><li style = \"counter-reset:ol0;list-style-type:disc;\"><\/li><li style = \"counter-reset:ol0;list-style-type:disc;\"><span>Replace <\/span><span style = \"font-style:italic;\"><path\/to\/Parent-dir><\/span><span> with the path to your Parent directory containing all slides to be registered.<\/span><\/li><\/ul><\/div><div class = \"text-block\"><ul style = \"list-style-type:disc;\"><li style = \"counter-reset:ol0;list-style-type:disc;\"><span>Replace <\/span><span style = \"font-style:italic;\"><path\/to\/matlab\/code-dir><\/span><span> with the path to the location where you saved the MultiplexIHC_RegistrationCode directory.<\/span><\/li><li style = \"counter-reset:ol0;list-style-type:disc;\"><\/li><li style = \"counter-reset:ol0;list-style-type:disc;\"><span>Replace <\/span><span style = \"font-style:italic;\"><path\/to\/Parent-dir><\/span><span> with the path to your Parent directory containing all slides to be registered.<\/span><\/li><\/ul><\/div><div class = \"text-block\"><ul style = \"list-style-type:disc;\"><\/ul><\/div><div class = \"text-block\"><span style = \"font-weight:bold;\">Example:<\/span><\/div><div class = \"text-block\"><pre><code><div class = \"text-blocks\"><div class = \"text-block\">\"\/Applications\/MATLAB_R2018b.app\/bin\/matlab\" -nodesktop -nosplash -r \"cd('\/Users\/sivagnan\/MultiplexIHC_Code\/CommandLine\/CL_Registration');run_mIHC_registration('\/Users\/sivagnan\/PROJECTS\/Cohort1');exit;\"<\/div><\/div><\/code><\/pre><\/div><\/div>"}},{"id":1054725,"guid":"C60651F7DFE043858648649BA9EFE181","order_id":2,"type_id":1,"title":"description","source":{"description":"<div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/s3.amazonaws.com\/protocols-files\/files\/dsffbcedx.jpg\" \/><\/div>"}},{"id":1054726,"guid":"7493A710DDEE11EAB7B4734BE94EA34E","order_id":3,"type_id":15,"title":"command","source":{"id":8628,"name":"\"<\/path\/to\/matlab>\" -nodesktop -nosplash -r \"(cd('<\/path\/to\/matlab\/code-dir>');run_mIHC_registration('<\/path\/to\/Parent-dir>');exit\"","command_name":"Run MultiplexIHC Registration","command":"code template to run matlab registration from linux mac on command line","os_name":"macOS High Sierra","os_version":"10.13.6"}}],"cases":[],"data":null,"html":null,"section":null,"section_color":"#f8e71c","section_duration":0,"critical":null,"critical_id":null,"duration":0},{"id":1132581,"guid":"892AEAA0B0044076A4AE18F5A8FD8D17","previous_id":1132580,"previous_guid":"E0954077FF794230BC6E73C1AA407373","modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"3019D467964041B0BD7F9D95B5F0F872","order_id":1,"type_id":6,"title":"Section","source":{"title":"Image Registration Quality Control"}},{"id":1054724,"guid":"774C3A4F06324C3D8DE1BEEED383BFB3","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\"><span style = \"font-weight:bold;\">REGISTRATION QC<\/span><\/div><div class = \"text-block\">When registration is complete, you will see a Registered_Regions directory created inside each slide folder with an ROI folder for each region box annotation. Each ROIxx folder contains all marker images for that region with reg_ prepended to the filename.<\/div><div class = \"text-block\"><span>A new folder called <\/span><span style = \"font-weight:bold;\">'Registration_Check'<\/span><span> will be created in the Parent directory that contains low resolution images of all registered regions for every slide in the batch. Each low res image will have '<\/span><span style = \"font-weight:bold;\">regck_' <\/span><span>prepended to the filename. This image set can be used to quickly check the images for gross misregistration or images that were were false registered (passed but should have failed). Regions or stains that did not adequately register well enough for quantification due to tissue deformation or loss are removed from further analysis.<\/span><\/div><div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/s3.amazonaws.com\/protocols-files\/files\/dsfhbcedx.jpg\" \/><\/div><div class = \"text-block\">If registration failed for a marker or region, you will see a 'Redo_ROI' folder inside the slide folder containing the failed marker region and the hematoxylin region that failed registration. <\/div><div class = \"text-block\">Images that failed registration can be excluded from further downstream analysis, or manually registered. See Troubleshooting guide ### for how to register images - 'Manual Registration' XXX.<\/div><\/div>"}},{"id":1054725,"guid":"6D5EBE467B854FDF8C660ADE8FFD2692","order_id":2,"type_id":1,"title":"description","source":{"description":"<div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/s3.amazonaws.com\/protocols-files\/files\/dsfhbcedx.jpg\" \/><\/div>"}}],"cases":[],"data":null,"html":null,"section":null,"section_color":"#50e3c2","section_duration":0,"critical":null,"critical_id":null,"duration":0},{"id":1132582,"guid":"FD4A4727D375479392A8CCA3511C5A28","previous_id":1132581,"previous_guid":"892AEAA0B0044076A4AE18F5A8FD8D17","modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"4C1EBCD0BBCA416CAAB1B5F3CE7D3CB5","order_id":1,"type_id":6,"title":"Section","source":{"title":"Signal Extraction"}},{"id":1054724,"guid":"9F0016A8DC1B4D518814F7A7269F96E9","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\"><span style = \"font-weight:bold;\">AEC COLOR DECONVOLUTION<\/span><\/div><div class = \"text-block\">Color deconvolution separates the AEC signal from the tissue background to quantify signal.<\/div><div class = \"text-block\">AEC signal is extracted using an RGB to CMYK conversion which utilizes a maximum gray component replacement to subtract the lowest gray level from all channels. AEC chromogen signal is separated into the \u2018Y\u2019 and 'M' channels and the 8-bit image channels are added together. Pixel results greater than 255 are set to 255. The middle 90% of pixels are rescaled to 0-255 (Pham et al. 2007). <\/div><div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/s3.amazonaws.com\/protocols-files\/files\/dsfjbcedx.jpg\" \/><\/div><div class = \"text-block\"><span style = \"font-weight:bold;\">EXAMPLE:<\/span><\/div><div class = \"text-block\"><pre><code><div class = \"text-blocks\"><div class = \"text-block\">Java -jar \/Applications\/Fiji.app\/jars\/ij-1.52p.jar -ijpath \/Applications\/Fiji.app -batch \/Users\/sivagnan\/MultiplexIHC_Code_072020\/CommandLine\/AEC_CMYK_ColorDecon.txt \/Users\/sivagnan\/PROJECTS\/Cohort1\/<\/div><\/div><\/code><\/pre><\/div><div class = \"text-block\">The script runs on the Parent directory and creates a directory in each slide called 'Processed' with ROI folders inside; same folder structure as 'Registered_Regions'.  Each generated image will have 'V_' prepended to the filename. <\/div><div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/s3.amazonaws.com\/protocols-files\/files\/dsfmbcedx.jpg\" \/><\/div><\/div>"}},{"id":1054725,"guid":"9041ED62CD5F49858EE764669226DAA5","order_id":2,"type_id":1,"title":"description","source":{"description":"<div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/s3.amazonaws.com\/protocols-files\/files\/dsfjbcedx.jpg\" \/><\/div>"}},{"id":1054726,"guid":"456582B0E0BE11EAB7B4734BE94EA34E","order_id":3,"type_id":15,"title":"command","source":{"id":8629,"name":"Java -jar <\/path\/to\/ij-xx.jar> -ijpath <\/path\/to\/Fiji.app> -batch <\/path\/to\/AEC_CMYK_ColorDecon.txt>  <\/path\/to\/Parent-dir\/>","command_name":"Run FIJI Macro","command":"code template to run FIJI macros from mac on command line","os_name":"MacOS HighSierra","os_version":"10.13.6"}},{"id":1054727,"guid":"2AF19CE0515F489E8D756205D67E4502","order_id":4,"type_id":1,"title":"description","source":{"description":"<div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/s3.amazonaws.com\/protocols-files\/files\/dsfmbcedx.jpg\" \/><\/div>"}}],"cases":[],"data":null,"html":null,"section":null,"section_color":"#7ed321","section_duration":0,"critical":null,"critical_id":null,"duration":0},{"id":1132585,"guid":"1B0A713E55454C3295FBA425DFC7E88B","previous_id":1132579,"previous_guid":"E6D82333B24347C087A78859777B0118","modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"E8EECE29C7314DF8BD5B57D50FB6520E","order_id":1,"type_id":6,"title":"Section","source":{"title":"Image Registration"}},{"id":1054724,"guid":"0BEAA31BA76C458C8E9000564A15490D","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\"><div class = \"justify\" style = \"text-align:center\"><\/div><\/div><div class = \"text-block\"><span style = \"font-weight:bold;\">IMAGE REGISTRATION<\/span><\/div><div class = \"text-block\"><span style = \"font-weight:bold;\">How registration works:<\/span><\/div><div class = \"text-block\">Image registration is performed in Matlab. Each marker image is registered to the last cycle target hematoxylin image. Keypoints are identified on the blue channel of the hematoxylin image and the blue channel of the AEC marker image.<\/div><div class = \"text-block\">If not enough matching keypoints are found, other single RGB channels are checked for more keypoints, and the channels with the highest strongest matching indexed keypoints are used. A similarity based geometric transform is generated and applied to each channel of the marker image, then merged back into an RGB image. The registered RGB image is saved as a TIFF inside an automatically generated 'Registered_Regions' folder created in the slide\/region folder.<\/div><div class = \"text-block\"><div class = \"justify\" style = \"text-align:center\"><\/div><\/div><div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/s3.amazonaws.com\/protocols-files\/files\/dsfpbcedx.jpg\" \/><\/div><div class = \"text-block\"><span style = \"font-weight:bold;\">Registration Steps:<\/span><\/div><div class = \"text-block\"><span style = \"font-weight:bold;\">1.<\/span><span> Open Matlab and set working path by selecting the 'choose folder' icon and set the path to the location you saved the MultiplexIHC_Code directory. On the left panel called 'Current Folder' you will see the files listed in gray. <\/span><\/div><div class = \"text-block\"><span style = \"font-weight:bold;\">2.<\/span><span> Right click on the MultplexIHC_Code directory in the 'Current Folder' panel and select 'Add to Path' > 'Selected Folders and Subfolders'. They will turn from gray to black indicating they are available. <\/span><\/div><div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/s3.amazonaws.com\/protocols-files\/files\/dsfrbcedx.jpg\" \/><\/div><\/div>"}},{"id":1054725,"guid":"B39DB4BE0B474E6BA89AA1B38790C912","order_id":2,"type_id":1,"title":"description","source":{"description":"<div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/s3.amazonaws.com\/protocols-files\/files\/dsfpbcedx.jpg\" \/><\/div>"}},{"id":1054726,"guid":"F859E1C503E2458C907CFB89E18F2D00","order_id":3,"type_id":1,"title":"description","source":{"description":"<div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/s3.amazonaws.com\/protocols-files\/files\/dsfrbcedx.jpg\" \/><\/div>"}},{"id":1054727,"guid":"D8A717ACC4484DBB83A9D7A5BDA18729","order_id":4,"type_id":26,"title":"notes","source":{"id":0,"parent_id":0,"uri":"","title":"","body":"<div class = \"text-blocks\"><div class = \"text-block\"><span style = \"font-weight:bold;\">RUNNING MATLAB REGISTRATION<\/span><\/div><div class = \"text-block\"><span style = \"font-weight:bold;\">1.<\/span><span> Double click <\/span><span style = \"font-weight:bold;\">mIHC_Registration.m<\/span><span> file from the Current Folder panel and open in the editor.<\/span><\/div><div class = \"text-block\"><span style = \"font-weight:bold;\">2. <\/span><span>In the EDITOR tab, click <\/span><span style = \"font-weight:bold;\">'Run'<\/span><span> to start the script<\/span><\/div><div class = \"text-block\"><span style = \"font-weight:bold;\">3. <\/span><span>At the file prompt, select the <\/span><span style = \"font-weight:bold;\">Parent folder<\/span><span> containing your slide folders.<\/span><\/div><\/div>","created_on":0,"changed_on":0,"creator":{"name":" ","affiliation":null,"affiliations":[],"username":"","note":null,"link":null,"image":{"source":"","placeholder":""},"badges":[],"verified":0,"is_verified_user":false,"research_interests":null,"blocked_by_you":false,"blocked_you":false,"hide_following":false},"comments":[]}}],"cases":[],"data":null,"html":null,"section":null,"section_color":"#f8e71c","section_duration":0,"critical":null,"critical_id":null,"duration":0},{"id":1132586,"guid":"FE81AC41ABB94BDD908B5686726B7620","previous_id":1132585,"previous_guid":"1B0A713E55454C3295FBA425DFC7E88B","modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"9D2496A6B53845A29BFF58CE770FE8E9","order_id":1,"type_id":6,"title":"Section","source":{"title":"Image Registration QC"}},{"id":1054724,"guid":"B04C2151E6814FEB98876BB605451ED2","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\"><span style = \"font-weight:bold;\">REGISTRATION QC<\/span><\/div><div class = \"text-block\">When registration is complete, you will see a Registered_Regions directory created inside each slide folder with an ROI folder for each region box annotation. Each ROIxx folder contains all marker images for that region with reg_ prepended to the filename.<\/div><div class = \"text-block\"><span>A new folder called <\/span><span style = \"font-weight:bold;\">'Registration_Check'<\/span><span> will be created in the Parent directory that contains low resolution images of all registered regions for every slide in the batch. Each low res image will have '<\/span><span style = \"font-weight:bold;\">regck_' <\/span><span>prepended to the filename. This image set can be used to quickly check the images for gross mis-registration or images that were were false registered (passed but should have failed). Regions or stains that did not adequately register well enough for quantification due to tissue deformation or loss are removed from further analysis.<\/span><\/div><div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/s3.amazonaws.com\/protocols-files\/files\/dsftbcedx.jpg\" \/><\/div><div class = \"text-block\">If registration failed for a marker or region, you will see a 'Redo_ROI' folder inside the slide folder containing the failed marker region and the hematoxylin region that failed registration. <\/div><div class = \"text-block\">Images that failed registration can be excluded from further downstream analysis, or manually registered by selecting matching keypoints from both images. See Troubleshooting guide ### for how to register images - 'Manual Registration' XXX.<\/div><\/div>"}},{"id":1054725,"guid":"E8CA002CB5A84E10B15CCE74692098FC","order_id":2,"type_id":1,"title":"description","source":{"description":"<div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/s3.amazonaws.com\/protocols-files\/files\/dsftbcedx.jpg\" \/><\/div>"}}],"cases":[],"data":null,"html":null,"section":null,"section_color":"#50e3c2","section_duration":0,"critical":null,"critical_id":null,"duration":0},{"id":1132587,"guid":"8E0B01FC48B640048679E660AAA60D97","previous_id":1132586,"previous_guid":"FE81AC41ABB94BDD908B5686726B7620","modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"D36DB770A2CC4C069BE372517A0685F2","order_id":1,"type_id":6,"title":"Section","source":{"title":"Signal Extraction"}},{"id":1054724,"guid":"62DB03B607DB4141A198781FD8BC38BD","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\"><span style = \"font-weight:bold;\">AEC COLOR DECONVOLUTION<\/span><\/div><div class = \"text-block\">Color deconvolution separates the AEC signal from the tissue background to quantify signal.<\/div><div class = \"text-block\">AEC signal is extracted using an RGB to CMYK conversion which utilizes a maximum gray component replacement to subtract the lowest gray level from all channels. AEC chromogen signal is separated into the \u2018Y\u2019 and 'M' channels and the 8-bit image channels are added together. Pixel results greater than 255 are set to 255. The middle 90% of pixels are rescaled to 0-255 (Pham et al. 2007). <\/div><div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/s3.amazonaws.com\/protocols-files\/files\/dsfvbcedx.jpg\" \/><\/div><div class = \"text-block\">The script runs on the Parent directory and creates a directory in each slide called 'Processed' with ROI folders inside; same folder structure as 'Registered_Regions'.  Each generated image will have 'V_' prepended to the filename. <\/div><div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/s3.amazonaws.com\/protocols-files\/files\/dsfzbcedx.jpg\" \/><\/div><\/div>"}},{"id":1054725,"guid":"F1B582F78FC74DE8A8A99B35E112538F","order_id":2,"type_id":1,"title":"description","source":{"description":"<div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/s3.amazonaws.com\/protocols-files\/files\/dsfvbcedx.jpg\" \/><\/div>"}},{"id":1054726,"guid":"C0F0ACD02B8D400E9EB9995F7AFAE807","order_id":3,"type_id":26,"title":"notes","source":{"id":0,"parent_id":0,"uri":"","title":"","body":"<div class = \"text-blocks\"><div class = \"text-block\"><span style = \"font-weight:bold;\">Running Color Deconvolution in FIJI<\/span><\/div><div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/s3.amazonaws.com\/protocols-files\/files\/dsfxbcedx.jpg\" \/><\/div><div class = \"text-block\"><span style = \"font-weight:bold;\">1. <\/span><span>Open FIJI<\/span><\/div><div class = \"text-block\"><span style = \"font-weight:bold;\">2. <\/span><span>On the menu bar, select <\/span><span style = \"font-weight:bold;\">Plugins > Macros > Run...<\/span><\/div><div class = \"text-block\"><span style = \"font-weight:bold;\">3. <\/span><span>At the file prompt, select the <\/span><span style = \"font-weight:bold;\">AEC_ColorDeconCMYK.ijm<\/span><span> file located in the MultiplexIHC_Code directory.<\/span><\/div><div class = \"text-block\"><span style = \"font-weight:bold;\">4.<\/span><span> At the next file prompt, select the <\/span><span style = \"font-weight:bold;\">Parent folder<\/span><span> of your study.<\/span><\/div><\/div>","created_on":0,"changed_on":0,"creator":{"name":" ","affiliation":null,"affiliations":[],"username":"","note":null,"link":null,"image":{"source":"","placeholder":""},"badges":[],"verified":0,"is_verified_user":false,"research_interests":null,"blocked_by_you":false,"blocked_you":false,"hide_following":false},"comments":[]}},{"id":1054727,"guid":"F4AEAEDF505E4D1F95CB0071A307D64D","order_id":4,"type_id":1,"title":"description","source":{"description":"<div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/s3.amazonaws.com\/protocols-files\/files\/dsfzbcedx.jpg\" \/><\/div>"}}],"cases":[],"data":null,"html":null,"section":null,"section_color":"#7ed321","section_duration":0,"critical":null,"critical_id":null,"duration":0},{"id":1132588,"guid":"F40CD3977B8E4A2D9F551EFB00FF1AB2","previous_id":1132587,"previous_guid":"8E0B01FC48B640048679E660AAA60D97","modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"D2474EB6D6AE4E36B7F5D93767F1B2DC","order_id":1,"type_id":6,"title":"Section","source":{"title":"Nuclei Segmentation"}},{"id":1054724,"guid":"3EB742763D1E4EF287BDE0EE87FA29A4","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\"><span style = \"font-weight:bold;\">NUCLEI SEGMENTATION<\/span><\/div><div class = \"text-block\">Segmentation is performed on the last cycle hematoxylin to ensure that only cells maintained throughout all staining cycles are evaluated downstream. If using the first hematoxylin, tissue and cells lost during the staining process will result in false negatives.<\/div><div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/s3.amazonaws.com\/protocols-files\/files\/dsf5bcedx.jpg\" \/><\/div><div class = \"text-block\">The FIJI macro is optimized to identify nuclei from hematoxylin only stained tissue. The macro uses the Color_Deconvolution [H AEC] vector in FIJI to first isolate hematoxylin OD, followed by additional filtering steps for background subtraction and signal cleaning. Objects are segmented by finding point maxima within a given *noise tolerance limited to pixels within Otsu thresholding.  Segmented objects go through a series of EDM watershed and erosion-dilation steps to generate the final binary mask.<\/div><div class = \"text-block\"><span style = \"font-style:italic;\">*Noise\u00a0Tolerance: The expected difference in signal to noise. <\/span><span>Maxima are ignored if they do not stand out from the surroundings by more than this value. A threshold is set at the maximum value minus noise tolerance and the contiguous area around the maximum above the threshold is analyzed. <\/span><\/div><\/div>"}},{"id":1054725,"guid":"5E4B1009D4DC45DFA26CCB928F9412F0","order_id":2,"type_id":1,"title":"description","source":{"description":"<div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/s3.amazonaws.com\/protocols-files\/files\/dsf5bcedx.jpg\" \/><\/div>"}},{"id":1054726,"guid":"9A01E9761C0146A1AB9A044D14A4734A","order_id":3,"type_id":26,"title":"notes","source":{"id":0,"parent_id":0,"uri":"","title":"","body":"<div class = \"text-blocks\"><div class = \"text-block\"><span style = \"font-weight:bold;\">Running nuclei segmentation in FIJI<\/span><\/div><div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/s3.amazonaws.com\/protocols-files\/files\/dsf3bcedx.jpg\" \/><\/div><div class = \"text-block\"><span style = \"font-weight:bold;\">1. <\/span><span>Open FIJI<\/span><\/div><div class = \"text-block\"><span style = \"font-weight:bold;\">2. <\/span><span>On the menu bar, select <\/span><span style = \"font-weight:bold;\">Plugins > Macros > Run...<\/span><\/div><div class = \"text-block\"><span style = \"font-weight:bold;\">3. <\/span><span>At the file prompt, select the <\/span><span style = \"font-weight:bold;\">Nuclei_BinaryMask.ijm<\/span><span> file located in the MultiplexIHC_Code directory.<\/span><\/div><div class = \"text-block\"><span style = \"font-weight:bold;\">4.<\/span><span> At the next file prompt, select the <\/span><span style = \"font-weight:bold;\">Parent folder<\/span><span> of your study.<\/span><\/div><div class = \"text-block\"><span style = \"font-weight:bold;\">5.<\/span><span> At the Noise parameter prompt, input your expected noise tolerance or try the default setting.<\/span><\/div><\/div>","created_on":0,"changed_on":0,"creator":{"name":" ","affiliation":null,"affiliations":[],"username":"","note":null,"link":null,"image":{"source":"","placeholder":""},"badges":[],"verified":0,"is_verified_user":false,"research_interests":null,"blocked_by_you":false,"blocked_you":false,"hide_following":false},"comments":[]}}],"cases":[],"data":null,"html":null,"section":null,"section_color":"#EA9F6C","section_duration":0,"critical":null,"critical_id":null,"duration":0},{"id":1132589,"guid":"1650C8FB5ED243DE85E1EF37C345F1AE","previous_id":1132588,"previous_guid":"F40CD3977B8E4A2D9F551EFB00FF1AB2","modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"943CE6278F164094856AC296B14917B6","order_id":1,"type_id":6,"title":"Section","source":{"title":"Single Cell Measurements"}},{"id":1054724,"guid":"D7BAB246B6524C59B608BF9EFDD45C76","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\"><span style = \"font-weight:bold;\">SINGLE CELL MEASUREMENTS<\/span><\/div><div class = \"text-block\">Single cell measurements are performed in Cell Profiler. Although there are many methods to measure mean intensity values for masked objects, this workflow utilizes Cell Profiler due to the output compatibility with FCS Express Image Cytometry for single cell classification. Measurements necessary for single cell gating are mean intensity for each marker, object area, object index, and object centroid X,Y location coordinates. <\/div><div class = \"text-block\">There are specific nomenclature that is required in order for the Cell Profiler output file to work properly in FCS Express Image Cytometry.<\/div><div class = \"text-block\">See the attached document on how to use the template Cell Profiler project, which can be found in the MultiplexIHC_Code directory. <\/div><\/div>"}},{"id":1054725,"guid":"369FFF50188E11EB8209E909188562B4","order_id":2,"type_id":23,"title":"file","source":{"source":"https:\/\/s3.amazonaws.com\/protocols-files\/private\/be87055278f667df8be1b3fd32deba053265a7156a05916529399b9465fd44c2\/cppabcedx.pdf","placeholder":"","original_name":"CellProfiler_TemplateInstructions.pdf"}}],"cases":[],"data":null,"html":null,"section":null,"section_color":"#eb39d9","section_duration":0,"critical":null,"critical_id":null,"duration":0},{"id":1132590,"guid":"182C27D0766A11EBB4706BDA1DFBB817","previous_id":1132582,"previous_guid":"FD4A4727D375479392A8CCA3511C5A28","modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"3B5D9BBAB34F496AA33B052C4BEB24B5","order_id":1,"type_id":6,"title":"Section","source":{"title":"Signal Extraction"}},{"id":1054724,"guid":"21D092CC9D61488A83429982D55FEE2E","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\"><span style = \"font-weight:bold;\">CONVERT TO OME.TIFF<\/span><\/div><div class = \"text-block\">The 'V_' prepended images are your registered, signal extracted, single channel 8-bit final image. Each set of images within an ROI can be converted into a single ome.tif using bioformats. <\/div><\/div>"}}],"cases":[],"data":null,"html":null,"section":null,"section_color":"#7ed321","section_duration":0,"critical":null,"critical_id":null,"duration":0}],"document":"","materials":[],"description":"<div class = \"text-blocks\"><div class = \"text-block\">Understanding immune complexity within the tumor microenvironment provides valuable insight to tumor-immune composition, spatial interactions, and the immune system's reaction to therapy allowing us to better understand response and resistance at the interface of the tumor and host. <\/div><div class = \"text-block\"><span>Multiplex IHC allows for the simultaneous detection of multiple Ab targets in the same tissue section using published methods previously described<\/span><span style = \"vertical-align:super;\">1,2<\/span><span>.This protocol contains detailed instructions on how to prepare files and run the image processing pipeline for mIHC SVS images in a GUI or command line, making it accessible to biologist and labs without computational specialty. <\/span><\/div><div class = \"text-block\"><span style = \"vertical-align:sub;\">REFERENCES<\/span><\/div><div class = \"text-block\"><ol style = \"list-style-type: decimal;\"><li style = \"counter-reset:ol0;\"><span>Tsujikawa, Takahiro, et al. \"Quantitative multiplex immunohistochemistry reveals myeloid-inflamed tumor-immune complexity associated with poor prognosis.\"<\/span><span style = \"font-style:italic;\">Cell reports<\/span><span>19.1 (2017): 203-217<\/span><\/li><li style = \"counter-reset:ol0;\"><span>Banik, Grace, et al. \"High-dimensional multiplexed immunohistochemical characterization of immune contexture in human cancers.\"<\/span><span style = \"font-style:italic;\">Methods in enzymology<\/span><span>635 (2020): 1-20.<\/span><\/li><\/ol><\/div><\/div>","changed_on":1623200038}