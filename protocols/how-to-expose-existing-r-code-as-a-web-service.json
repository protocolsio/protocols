{"id":48982,"title":"How to expose existing R code as a web service","title_html":"<p>How to expose existing R code as a web service<\/p>","image":{"source":"https:\/\/www.protocols.io\/img\/default_protocol.png","placeholder":"https:\/\/www.protocols.io\/img\/default_protocol.png"},"doi":null,"doi_status":0,"uri":"how-to-expose-existing-r-code-as-a-web-service-bt3wnqpe","type_id":1,"template_id":5,"published_on":1617893225,"parent_protocols":[],"parent_collections":[],"cited_protocols":[],"version_id":1,"version_data":{"id":"1","code":"bt3wnqpe","parent_id":48941,"parent_uri":"how-to-expose-existing-r-code-as-a-web-service-bt2mnqc6","is_same_owner":true,"has_pending_merge_request":false,"has_approved_merge_request":true},"created_on":1617893071,"modified_on":null,"categories":null,"public":1,"is_unlisted":0,"creator":{"name":"Sonia Garc\u00eda-Ruiz","affiliation":null,"affiliations":[],"username":"m4vle152t1u4tle1","note":null,"link":"https:\/\/rytenlab.com\/swagger\/index.html","image":{"source":"\/img\/avatars\/009.png","placeholder":"\/img\/avatars\/009.png"},"badges":[{"id":2,"image":{"source":"\/img\/badges\/bronze.svg","placeholder":"\/img\/badges\/bronze.svg"},"name":"Author"}],"verified":0,"is_verified_user":false,"research_interests":null,"blocked_by_you":false,"blocked_you":false,"hide_following":false},"journal":null,"journal_name":null,"journal_link":null,"article_citation":null,"has_versions":0,"link":"https:\/\/rytenlab.com\/swagger\/index.html","total_collections":0,"number_of_steps":4,"authors":[{"name":"Sonia Garc\u00eda-Ruiz","affiliation":"University College London, University of London","affiliations":[],"username":"m4vle152t1u4tle1","note":null,"link":null,"image":{"source":"\/img\/avatars\/009.png","placeholder":"\/img\/avatars\/009.png"},"badges":[],"verified":1,"is_verified_user":true,"research_interests":null,"blocked_by_you":false,"blocked_you":false,"hide_following":false}],"versions":[],"groups":[{"id":22559,"uri":"ryten-laboratory","title":"Ryten Laboratory","image":{"source":"https:\/\/www.protocols.io\/img\/group_placeholder.png","placeholder":"https:\/\/www.protocols.io\/img\/group_placeholder.png"},"tech_support":{"email":null,"phone":null,"hide_contact":0,"use_email":0,"url":null},"is_member":1,"request":{"id":22559,"uri":"ryten-laboratory","title":"Ryten Laboratory","image":{"source":"https:\/\/www.protocols.io\/img\/group_placeholder.png","placeholder":"https:\/\/www.protocols.io\/img\/group_placeholder.png"},"tech_support":{"email":null,"phone":null,"hide_contact":0,"use_email":0,"url":null},"is_member":1,"description":null,"research_interests":null,"website":null,"location":null,"affiliation":null,"status":{"is_visible":true,"access_level":0},"stats":{"files":[],"total_members":0,"total_followers":0,"total_child_groups":0,"total_parent_groups":0,"has_collaborations":0},"user_status":{"is_member":true,"is_confirmed":true,"is_invited":false,"is_owner":true,"is_admin":false,"is_following":false},"join_link":null,"token":null,"owner":{"name":" ","affiliation":null,"affiliations":[],"username":null,"note":null,"link":null,"image":{"source":null,"placeholder":null},"badges":[],"verified":0,"is_verified_user":false,"research_interests":null,"blocked_by_you":false,"blocked_you":false,"hide_following":false},"is_protocol_requested":0,"is_group_requested":0,"is_my":false,"is_request":false,"is_confirmed":1,"is_declined":0,"requester":{"name":" ","affiliation":null,"affiliation_url":null,"username":null,"link":null},"protocol":{"id":0,"title":"How to expose existing R code as a web service","title_html":"How to expose existing R code as a web service","image":{"source":null,"placeholder":null},"doi":null,"doi_status":0,"uri":"how-to-expose-existing-r-code-as-a-web-service-bt3wnqpe","type_id":1,"template_id":0,"published_on":null,"stats":{"number_of_views":0,"number_of_steps":0,"number_of_bookmarks":0,"number_of_comments":0,"number_of_exports":0,"number_of_runs":0,"number_of_votes":0,"is_voted":0},"parent_protocols":[],"parent_collections":[],"cited_protocols":[]},"created_on":1617803852,"resolve_on":0,"resolved_user":{"name":" ","affiliation":null,"affiliations":[],"username":null,"note":null,"link":null,"image":{"source":null,"placeholder":null},"badges":[],"verified":0,"is_verified_user":false,"research_interests":null,"blocked_by_you":false,"blocked_you":false,"hide_following":false},"shared":false}}],"is_owner":1,"has_subprotocols":0,"is_subprotocol":0,"is_bookmarked":0,"can_claim_authorship":0,"can_accept_authorship":0,"can_be_copied":1,"can_remove_fork":1,"fork_id":null,"url":"https:\/\/www.protocols.io\/view\/how-to-expose-existing-r-code-as-a-web-service-bt3wnqpe","forks_count":{"private":0,"public":0},"access":{"can_view":1,"can_remove":1,"can_add":0,"can_edit":0,"can_publish":0,"can_get_doi":1,"can_share":1,"can_move":1,"can_move_outside":1,"can_transfer":1,"can_download":1,"is_locked":0},"guid":"695BA4980325469BA68806CF9307273E","state_version_id":23,"steps":[{"id":1158849,"guid":"812F27E041CE49B7B62A4B9F59D092F8","previous_id":null,"previous_guid":null,"modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"C96A78E260EE4357900110740F27E59C","order_id":1,"type_id":6,"title":"Section","source":{"title":""}},{"id":1054724,"guid":"06430857E050472194BAC2029273D56F","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\">First, we install the R package <\/div><div class = \"text-block\"><a href=\"https:\/\/www.rplumber.io\/\" style = \"text-decoration:underline;color:blue;cursor:pointer;\"><span style = \":;\">Plumber<\/span><\/a><\/div><div class = \"text-block\">. To install the latest stable version from CRAN, we can type the following R command:<\/div><div class = \"text-block\"><pre><code><div class = \"text-blocks\"><div class = \"text-block\">install.packages(\"plumber\")<\/div><\/div><\/code><\/pre><\/div><\/div>"}}],"cases":[],"data":null,"html":null,"section":null,"section_color":"","section_duration":0,"critical":null,"critical_id":null,"duration":0},{"id":1158850,"guid":"6DEEF3CB72E943F48089E7D21C826B0B","previous_id":1158849,"previous_guid":"812F27E041CE49B7B62A4B9F59D092F8","modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"581EC77B0B0A45C8A6BA0D11784BCD18","order_id":1,"type_id":6,"title":"Section","source":{"title":""}},{"id":1054724,"guid":"73547B3B312B40629D626BE9F1218E1A","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\">The next step will consist of creating the API specification to expose our R methods of interest. In this case, we are going to expose the method 'CoExpNets::getNetworkCategories()' from the CoExpNets family of R packages (<\/div><div class = \"text-block\"><a href=\"https:\/\/github.com\/juanbot\/CoExpNets\" style = \"text-decoration:underline;color:blue;cursor:pointer;\"><span style = \":;\">https:\/\/github.com\/juanbot\/CoExpNets<\/span><\/a><\/div><div class = \"text-block\">). This step might sound daunting, but it is very straightforward: we only need to generate an R file to include on it all methods we would like to expose through the web API. <\/div><div class = \"text-block\">In this example, the contents of the new API R file (let's call it 'api.R') should look as follows:<\/div><div class = \"text-block\"><pre><code><div class = \"text-blocks\"><div class = \"text-block\">#' @get \/getNetworkCategories #this is the name we will type as part of the URL on our browser when calling the API method<\/div><div class = \"text-block\">function(){ <\/div><div class = \"text-block\">print(\"getNetworkCategories() GET method has requested!\") # a friendly message<\/div><div class = \"text-block\">CoExpNets::getNetworkCategories() # calling the R method<\/div><div class = \"text-block\">} <\/div><\/div><\/code><\/pre><\/div><\/div>"}}],"cases":[],"data":null,"html":null,"section":null,"section_color":"","section_duration":0,"critical":null,"critical_id":null,"duration":0},{"id":1158851,"guid":"471C21646D834C7D80D455D8D16C26EB","previous_id":1158850,"previous_guid":"6DEEF3CB72E943F48089E7D21C826B0B","modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"FEBE470499954D08A6D9C11622F102D2","order_id":1,"type_id":6,"title":"Section","source":{"title":""}},{"id":1054724,"guid":"DCB8AA4A2DDE4AD08640BCA581D04670","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\">Once changes have been saved, the next step would consist of running the web API. To do so, we first need to choose an empty port, open an R console and type the following commands:<\/div><div class = \"text-block\"><pre><code><div class = \"text-blocks\"><div class = \"text-block\">## Code to load CoExpNets libraries<\/div><div class = \"text-block\">library(CoExpNets)<\/div><div class = \"text-block\">library(CoExpROSMAP)<\/div><div class = \"text-block\">CoExpROSMAP::initDb(mandatory=T)<\/div><div class = \"text-block\">## Code to expose the API<\/div><div class = \"text-block\">library(plumber) <\/div><div class = \"text-block\">pr(\"\/pathtoyourfile\/api.R\") %>% pr_run(port=8080)<\/div><\/div><\/code><\/pre><\/div><\/div>"}}],"cases":[],"data":null,"html":null,"section":null,"section_color":"","section_duration":0,"critical":null,"critical_id":null,"duration":0},{"id":1158852,"guid":"5614C339F4E348E3BD60053BBDF3CC76","previous_id":1158851,"previous_guid":"471C21646D834C7D80D455D8D16C26EB","modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"50A76474884546E8A05B7DDB471E8AD6","order_id":1,"type_id":6,"title":"Section","source":{"title":""}},{"id":1054724,"guid":"7AAEF5E858A14A049581A60ED98FCC0D","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\">Finally, we test the API:<\/div><div class = \"text-block\"><pre><code><div class = \"text-blocks\"><div class = \"text-block\">curl \"localhost:8080\/getNetworkCategories\"<\/div><\/div><\/code><\/pre><\/div><div class = \"text-block\"><pre><code><div class = \"text-blocks\"><div class = \"text-block\">http:\/\/localhost:8080\/getNetworkCategories<\/div><\/div><\/code><\/pre><\/div><div class = \"text-block\">In both cases, the response should be similar to:<\/div><div class = \"text-block\"><pre><code><div class = \"text-blocks\"><div class = \"text-block\">[\"CoExpROSMAP\"]<\/div><\/div><\/code><\/pre><\/div><\/div>"}}],"cases":[],"data":null,"html":null,"section":null,"section_color":"","section_duration":0,"critical":null,"critical_id":null,"duration":0}],"document":"","materials":[],"description":"<div class = \"text-blocks\"><div class = \"text-block\"><span>This protocol shows how to expose any existing R method as a web service. The code shown here has been used as part of the development of the CoExp Web Application <\/span><a href=\"https:\/\/rytenlab.com\/coexp\" style = \"text-decoration:underline;color:blue;cursor:pointer;\"><span style = \":;\">https:\/\/rytenlab.com\/coexp\/<\/span><\/a><span>. For further information on CoExp Web, please see our paper: <\/span><a href=\"https:\/\/www.frontiersin.org\/articles\/10.3389\/fgene.2021.630187\/full\" style = \"text-decoration:underline;color:blue;cursor:pointer;\"><span style = \":;\">https:\/\/www.frontiersin.org\/articles\/10.3389\/fgene.2021.630187\/full<\/span><\/a><\/div><div class = \"text-block\"><span>The R methods used in this protocol correspond to the family of CoExpNets R packages (<\/span><a href=\"https:\/\/github.com\/juanbot\/CoExpNets\" style = \"text-decoration:underline;color:blue;cursor:pointer;\"><span style = \":;\">https:\/\/github.com\/juanbot\/CoExpNets<\/span><\/a><span>).<\/span><\/div><\/div>","changed_on":1617893225}