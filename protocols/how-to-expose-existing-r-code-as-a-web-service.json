{"id":48941,"title":"How to expose existing R code as a web service","title_html":"<p>How to expose existing R code as a web service<\/p>","image":{"source":"https:\/\/www.protocols.io\/img\/default_protocol.png","placeholder":"https:\/\/www.protocols.io\/img\/default_protocol.png"},"doi":null,"doi_status":0,"uri":"how-to-expose-existing-r-code-as-a-web-service-bt2mnqc6","type_id":1,"template_id":5,"published_on":1617803852,"parent_protocols":[],"parent_collections":[],"cited_protocols":[],"version_id":0,"version_data":{"id":"0","code":"bt2mnqc6","parent_id":0,"parent_uri":null,"is_same_owner":false,"has_pending_merge_request":false,"has_approved_merge_request":false},"created_on":1617790647,"modified_on":null,"categories":null,"public":1,"is_unlisted":0,"creator":{"name":"Sonia Garc\u00eda-Ruiz","affiliation":null,"affiliations":[],"username":"m4vle152t1u4tle1","note":null,"link":"https:\/\/rytenlab.com\/swagger\/index.html","image":{"source":"\/img\/avatars\/009.png","placeholder":"\/img\/avatars\/009.png"},"badges":[{"id":2,"image":{"source":"\/img\/badges\/bronze.svg","placeholder":"\/img\/badges\/bronze.svg"},"name":"Author"}],"verified":0,"is_verified_user":false,"research_interests":null,"blocked_by_you":false,"blocked_you":false,"hide_following":false},"journal":null,"journal_name":null,"journal_link":null,"article_citation":null,"has_versions":0,"link":"https:\/\/rytenlab.com\/swagger\/index.html","total_collections":0,"number_of_steps":4,"authors":[{"name":"Sonia Garc\u00eda-Ruiz","affiliation":"University College London, University of London","affiliations":[],"username":"m4vle152t1u4tle1","note":"","link":null,"image":{"source":"\/img\/avatars\/009.png","placeholder":"\/img\/avatars\/009.png"},"badges":[],"verified":1,"is_verified_user":true,"research_interests":null,"blocked_by_you":false,"blocked_you":false,"hide_following":false}],"versions":[],"groups":[{"id":22559,"uri":"ryten-laboratory","title":"Ryten Laboratory","image":{"source":"https:\/\/www.protocols.io\/img\/group_placeholder.png","placeholder":"https:\/\/www.protocols.io\/img\/group_placeholder.png"},"tech_support":{"email":null,"phone":null,"hide_contact":0,"use_email":0,"url":null},"is_member":1,"request":{"id":22559,"uri":"ryten-laboratory","title":"Ryten Laboratory","image":{"source":"https:\/\/www.protocols.io\/img\/group_placeholder.png","placeholder":"https:\/\/www.protocols.io\/img\/group_placeholder.png"},"tech_support":{"email":null,"phone":null,"hide_contact":0,"use_email":0,"url":null},"is_member":1,"description":null,"research_interests":null,"website":null,"location":null,"affiliation":null,"status":{"is_visible":true,"access_level":0},"stats":{"files":[],"total_members":0,"total_followers":0,"total_child_groups":0,"total_parent_groups":0,"has_collaborations":0},"user_status":{"is_member":true,"is_confirmed":true,"is_invited":false,"is_owner":true,"is_admin":false,"is_following":false},"join_link":null,"token":null,"owner":{"name":" ","affiliation":null,"affiliations":[],"username":null,"note":null,"link":null,"image":{"source":null,"placeholder":null},"badges":[],"verified":0,"is_verified_user":false,"research_interests":null,"blocked_by_you":false,"blocked_you":false,"hide_following":false},"is_protocol_requested":0,"is_group_requested":0,"is_my":false,"is_request":false,"is_confirmed":1,"is_declined":0,"requester":{"name":" ","affiliation":null,"affiliation_url":null,"username":null,"link":null},"protocol":{"id":0,"title":"How to expose existing R code as a web service","title_html":"How to expose existing R code as a web service","image":{"source":null,"placeholder":null},"doi":null,"doi_status":0,"uri":"how-to-expose-existing-r-code-as-a-web-service-bt2mnqc6","type_id":1,"template_id":0,"published_on":null,"stats":{"number_of_views":0,"number_of_steps":0,"number_of_bookmarks":0,"number_of_comments":0,"number_of_exports":0,"number_of_runs":0,"number_of_votes":0,"is_voted":0},"parent_protocols":[],"parent_collections":[],"cited_protocols":[]},"created_on":1617803852,"resolve_on":0,"resolved_user":{"name":" ","affiliation":null,"affiliations":[],"username":null,"note":null,"link":null,"image":{"source":null,"placeholder":null},"badges":[],"verified":0,"is_verified_user":false,"research_interests":null,"blocked_by_you":false,"blocked_you":false,"hide_following":false},"shared":false}}],"is_owner":1,"has_subprotocols":0,"is_subprotocol":0,"is_bookmarked":0,"can_claim_authorship":0,"can_accept_authorship":0,"can_be_copied":1,"can_remove_fork":1,"fork_id":null,"url":"https:\/\/www.protocols.io\/view\/how-to-expose-existing-r-code-as-a-web-service-bt2mnqc6","forks_count":{"private":0,"public":0},"access":{"can_view":1,"can_remove":1,"can_add":0,"can_edit":0,"can_publish":0,"can_get_doi":1,"can_share":1,"can_move":1,"can_move_outside":1,"can_transfer":1,"can_download":1,"is_locked":0},"guid":"546F6680978A11EB85A197D87F6345D2","state_version_id":649,"steps":[{"id":1157844,"guid":"8BA60680979F11EB85A197D87F6345D2","previous_id":null,"previous_guid":null,"modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"59DC81FCD1A047D7822059C580EBB085","order_id":1,"type_id":6,"title":"Section","source":{"title":""}},{"id":1054724,"guid":"925D4B9FF0EE4A04986F226FF5A71B73","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\">First, we install the R package <\/div><div class = \"text-block\"><a href=\"https:\/\/www.rplumber.io\/\" style = \"text-decoration:underline;color:blue;cursor:pointer;\"><span style = \":;\">Plumber<\/span><\/a><\/div><div class = \"text-block\">. To install the latest stable version from CRAN, we can type the following R command:<\/div><div class = \"text-block\"><pre><code><div class = \"text-blocks\"><div class = \"text-block\">install.packages(\"plumber\")<\/div><\/div><\/code><\/pre><\/div><\/div>"}}],"cases":[],"data":null,"html":null,"section":null,"section_color":"","section_duration":0,"critical":null,"critical_id":null,"duration":0},{"id":1157845,"guid":"CFE297A0979F11EB85A197D87F6345D2","previous_id":1157844,"previous_guid":"8BA60680979F11EB85A197D87F6345D2","modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"7873E74DB45A4C8186FB40A8065D642C","order_id":1,"type_id":6,"title":"Section","source":{"title":""}},{"id":1054724,"guid":"195CE189B2EF416CBB3DE36CACC0A9B0","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\">The next step will consist of creating the API specification to expose our R methods of interest. In this case, we are going to expose the method 'CoExpNets::getNetworkCategories()' from the CoExpNets family of R packages (<\/div><div class = \"text-block\"><a href=\"https:\/\/github.com\/juanbot\/CoExpNets\" style = \"text-decoration:underline;color:blue;cursor:pointer;\"><span style = \":;\">https:\/\/github.com\/juanbot\/CoExpNets<\/span><\/a><\/div><div class = \"text-block\">). This step might sound daunting, but it is very straightforward: we only need to generate an R file to include on it all methods we would like to expose through the web API. <\/div><div class = \"text-block\">In this example, the contents of the new API R file (let's call it 'api.R') should look as follows:<\/div><div class = \"text-block\"><pre><code><div class = \"text-blocks\"><div class = \"text-block\">#' @get \/getNetworkCategories #this is the name we will type as part of the URL on our browser when calling the API method<\/div><div class = \"text-block\">function(){ <\/div><div class = \"text-block\">print(\"getNetworkCategories() GET method has requested!\") # a friendly message<\/div><div class = \"text-block\">CoExpNets::getNetworkCategories() # calling the R method<\/div><div class = \"text-block\">} <\/div><\/div><\/code><\/pre><\/div><\/div>"}}],"cases":[],"data":null,"html":null,"section":null,"section_color":"","section_duration":0,"critical":null,"critical_id":null,"duration":0},{"id":1157854,"guid":"1905520097A111EB85A197D87F6345D2","previous_id":1157845,"previous_guid":"CFE297A0979F11EB85A197D87F6345D2","modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"B3DC5CB619874B0DB7B19BC97B1E452E","order_id":1,"type_id":6,"title":"Section","source":{"title":""}},{"id":1054724,"guid":"CCE81282EAB046F5A2231B03B252D447","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\">Once changes have been saved, the next step would consist of running the web API. To do so, we first need to choose an empty port, open an R console and type the following commands:<\/div><div class = \"text-block\"><pre><code><div class = \"text-blocks\"><div class = \"text-block\">## Code to load CoExpNets libraries<\/div><div class = \"text-block\">library(CoExpNets)<\/div><div class = \"text-block\">library(CoExpROSMAP)<\/div><div class = \"text-block\">CoExpROSMAP::initDb(mandatory=T)<\/div><div class = \"text-block\">## Code to expose the API<\/div><div class = \"text-block\">library(plumber) <\/div><div class = \"text-block\">pr(\"\/pathtoyourfile\/api.R\") %>% pr_run(port=8080)<\/div><\/div><\/code><\/pre><\/div><\/div>"}}],"cases":[],"data":null,"html":null,"section":null,"section_color":"","section_duration":0,"critical":null,"critical_id":null,"duration":0},{"id":1157855,"guid":"DD27480097A111EB85A197D87F6345D2","previous_id":1157854,"previous_guid":"1905520097A111EB85A197D87F6345D2","modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"5CD06B7BBB1143CF8FDD16A52BFB425A","order_id":1,"type_id":6,"title":"Section","source":{"title":""}},{"id":1054724,"guid":"F008C8C00F28418EB2638AECEEB3664E","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\">Finally, we test the API:<\/div><div class = \"text-block\"><pre><code><div class = \"text-blocks\"><div class = \"text-block\">curl \"localhost:8080\/getNetworkCategories\"<\/div><\/div><\/code><\/pre><\/div><div class = \"text-block\"><pre><code><div class = \"text-blocks\"><div class = \"text-block\">http:\/\/localhost:8080\/getNetworkCategories<\/div><\/div><\/code><\/pre><\/div><div class = \"text-block\">In both cases, the response should be similar to:<\/div><div class = \"text-block\"><pre><code><div class = \"text-blocks\"><div class = \"text-block\">[\"CoExpROSMAP\"]<\/div><\/div><\/code><\/pre><\/div><\/div>"}}],"cases":[],"data":null,"html":null,"section":null,"section_color":"","section_duration":0,"critical":null,"critical_id":null,"duration":0}],"document":"","materials":[],"description":"<div class = \"text-blocks\"><div class = \"text-block\"><span>This protocol shows how to expose any existing R method as a web service. The code shown here has been used as part of the development of the CoExp Web Application <\/span><a href=\"https:\/\/rytenlab.com\/coexp\" style = \"text-decoration:underline;color:blue;cursor:pointer;\"><span style = \":;\">https:\/\/rytenlab.com\/coexp\/<\/span><\/a><span>. For further information on CoExp Web, please see our paper: <\/span><a href=\"https:\/\/www.frontiersin.org\/articles\/10.3389\/fgene.2021.630187\/full\" style = \"text-decoration:underline;color:blue;cursor:pointer;\"><span style = \":;\">https:\/\/www.frontiersin.org\/articles\/10.3389\/fgene.2021.630187\/full<\/span><\/a><\/div><div class = \"text-block\"><span>The R methods used in this protocol correspond to the family of CoExpNets R packages (<\/span><a href=\"https:\/\/github.com\/juanbot\/CoExpNets\" style = \"text-decoration:underline;color:blue;cursor:pointer;\"><span style = \":;\">https:\/\/github.com\/juanbot\/CoExpNets<\/span><\/a><span>).<\/span><\/div><\/div>","changed_on":1617803852}