{"access":{"can_view":true,"can_edit":false,"can_remove":false,"can_add":false,"can_publish":false,"can_get_doi":false,"can_share":true,"can_move":true,"can_move_outside":true,"can_transfer":true,"can_download":true,"is_locked":false},"authors":[{"name":"miriam.goldman  ","affiliation":"Data Science and Biotechnology, Gladstone Institutes, San Francisco, CA, USA, ; Biomedical Informatics, University of California San Francisco, San Francisco, CA","affiliation_url":null,"username":"n4qle1y1r1x4tle1","link":null,"image":{"source":"/img/avatars/006.png","placeholder":"/img/avatars/006.png","webp_source":""},"note":"","is_verified_user":true},{"name":"chunyu.zhao  ","affiliation":"Data Science, Chan Zuckerberg Biohub, San Francisco, CA, USA, ; Data Science and Biotechnology, Gladstone Institutes, San Francisco, CA, USA","affiliation_url":null,"username":"n4qle1w1s115sle1","link":null,"image":{"source":"/img/avatars/008.png","placeholder":"/img/avatars/008.png","webp_source":""},"note":"","is_verified_user":true}],"before_start":"","book_chapter":null,"can_accept_authorship":false,"can_be_copied":true,"can_claim_authorship":false,"can_remove_fork":false,"can_sign":false,"child_steps":{},"cited_protocols":[],"collection_items":[],"created_on":1659032323,"creator":{"name":"miriam.goldman ","affiliation":"","affiliation_url":null,"username":"n4qle1y1r1x4tle1","link":null,"image":{"source":"/img/avatars/006.png","placeholder":"/img/avatars/006.png","webp_source":""},"badges":[{"id":3,"name":"Power author!","image":{"source":"/img/badges/silver.svg","placeholder":"/img/badges/silver.svg"}},{"id":6,"name":"Science accelerator","image":{"source":"/img/badges/accelerator.svg","placeholder":"/img/badges/accelerator.svg"}}],"affiliations":[]},"description":"{\"blocks\":[{\"key\":\"9smb4\",\"text\":\"This protocol describes how to build a MIDASDB from a custom collection of genomes and perform SNV metagenotyping with it. Other MIDAS2 commands can also be run with the new database. Single-sample SNV metagenotyping is shown as an example. There are three steps: construct a custom rep-genome database for a collection of representative genomes of interest, build a bowtie2 index, and execute run_snps command with the prebuilt bowtie2 index.\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}}],\"entityMap\":{}}","disclaimer":"","document":"","documents":[],"doi":"dx.doi.org/10.17504/protocols.io.dm6gpbp65lzp/v1","doi_status":2,"fork_id":null,"fork_info":null,"forks":[],"funders":[],"groups":[],"guid":"B545D6D00EA111ED90DC09C4B4EE86A7","guidelines":"","has_references":false,"has_versions":false,"id":67837,"image":{"source":"https://www.protocols.io/img/default_protocol.png","webp_source":null,"placeholder":"https://www.protocols.io/img/default_protocol.png","webp_placeholder":null},"image_attribution":"","in_trash":false,"is_bookmarked":false,"is_contact_suspended":false,"is_content_confidential":false,"is_content_warning":false,"is_doi_reserved":false,"is_in_pending_publishing":false,"is_in_transfer":false,"is_owner":true,"is_research":false,"is_retracted":false,"is_shared_directly":false,"is_subprotocol":null,"is_unlisted":false,"item_id":978261,"journal":null,"journals":[],"keywords":null,"last_modified":1659119275,"link":"","location":null,"manuscript_citation":"","materials":[],"materials_text":"","ownership_history":null,"parent_collections":[{"id":67834,"title":"MIDAS 2 Protocol","title_html":null,"image":{"source":"https://www.protocols.io/img/default_protocol.png","webp_source":null,"placeholder":"https://www.protocols.io/img/default_protocol.png","webp_placeholder":null},"doi":"dx.doi.org/10.17504/protocols.io.6qpvr6jzpvmk/v1","uri":"midas-2-protocol-ceg2tbye","published_on":1659119272,"modified_on":0,"version_class":0,"version_id":0,"version_code":"","version_uri":"","created_on":1659032164,"categories":null,"creator":{"name":"miriam.goldman ","affiliation":null,"affiliation_url":null,"username":"n4qle1y1r1x4tle1","link":null,"image":{"source":"/img/avatars/006.png","placeholder":"/img/avatars/006.png","webp_source":""}},"stats":null}],"parent_protocols":[],"peer_reviewed":false,"public":true,"public_fork_note":"","published_on":1659119275,"references":[],"related_equipments":[],"reserved_doi":"","retraction_reason":null,"shared_access_id":16,"show_comparison":false,"sign_info":null,"state_version_id":44,"stats":{"is_voted":false,"number_of_views":0,"number_of_steps":5,"number_of_bookmarks":0,"number_of_comments":0,"number_of_bookmarked_comments":0,"number_of_steps_comments":0,"number_of_protocol_comments":0,"number_of_exports":0,"number_of_runs":0,"number_of_votes":0,"number_of_reagents":0,"number_of_equipments":0,"number_of_collections":1,"number_of_forks":{"private":0,"public":0},"number_of_accessible_forks":0},"status":{"id":1,"info":""},"steps":[{"id":1449201,"guid":"554564F00EA411ED902F3369173792AB","previous_id":0,"previous_guid":null,"section":"","section_color":"","section_duration":0,"is_substep":false,"step":"{\"blocks\":[{\"key\":\"cudfu\",\"text\":\"Download the example genome collection folder from Zenodo to the work directory (midas2_protocol)\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"3h9ui\",\"text\":\" \",\"type\":\"atomic\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[{\"key\":0,\"offset\":0,\"length\":1}],\"data\":{}},{\"key\":\"e7sr5\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"clund\",\"text\":\" \",\"type\":\"atomic\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[{\"key\":1,\"offset\":0,\"length\":1}],\"data\":{}},{\"key\":\"5srpf\",\"text\":\"MIDAS2 reserves the --midasdb_name newdb for building any new MIDASDB, and the custom MIDASDB will be built at --midasdb_dir midasdb_custom\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}}],\"entityMap\":{\"0\":{\"type\":\"command\",\"mutability\":\"IMMUTABLE\",\"data\":{\"id\":10649,\"name\":\"wget https://zenodo.org/record/6774976/files/midasdb_custom.zip\\nunzip midasdb_custom.zip\",\"os_name\":null,\"os_version\":null,\"command_name\":\"\",\"description\":null,\"can_edit\":1,\"guid\":\"6920B5100EA411ED902F3369173792AB\"}},\"1\":{\"type\":\"notes\",\"mutability\":\"IMMUTABLE\",\"data\":{\"blocks\":[{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[{\"length\":21,\"offset\":97,\"style\":\"italic\"},{\"length\":26,\"offset\":141,\"style\":\"italic\"}],\"key\":\"1vhhs\",\"text\":\"We have prepared two genomes for two species from the 21 NCBI genomes in the HMP mock community: Staphylococcus aureus (GCF_000013425.1) and Staphylococcus epidermidis (GCF_006094375.1) for this protocol.\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"d9mj6\",\"text\":\"genomes.tsv: the table-of-contents file specifying the assignment of representative genomes to species. We randomly assign each species a six-digit species_id.\",\"type\":\"unordered-list-item\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"cooie\",\"text\":\"cleaned_imports/: the FASTA file of each representative genome, saved in the directory \\u003cspecies\\u003e/\\u003cgenome\\u003e/\\u003cgenome\\u003e.fna.\",\"type\":\"unordered-list-item\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"5ol5u\",\"text\":\"metadata.tsv: taxonomic assignment of the randomly assigned species_id.\",\"type\":\"unordered-list-item\"}],\"entityMap\":{}}}}}","data":null,"protocol_id":67837,"case_id":0,"critical_ids":"","duration":0,"original_id":0,"number":"1","cases":[],"critical":null},{"id":1449202,"guid":"773FD1D00EA411ED902F3369173792AB","previous_id":1449201,"previous_guid":"554564F00EA411ED902F3369173792AB","section":"","section_color":"","section_duration":0,"is_substep":false,"step":"{\"blocks\":[{\"key\":\"90b8r\",\"text\":\"Construct rep-genome component of MIDASDB\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"920fo\",\"text\":\"Annotate all the genomes and build the files needed for the rep-genome database. These commands should be executed in the work directory midas2_protocol.\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"b51hc\",\"text\":\" \",\"type\":\"atomic\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[{\"key\":0,\"offset\":0,\"length\":1}],\"data\":{}},{\"key\":\"bjdm\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"18dae\",\"text\":\" \",\"type\":\"atomic\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[{\"key\":1,\"offset\":0,\"length\":1}],\"data\":{}},{\"key\":\"fbrna\",\"text\":\"There are two command-line parameters that users need to pass:\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"9cv86\",\"text\":\"--debug: keep the local file after successfully build the database\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"54o8a\",\"text\":\"--force: re-build the database even if one already exists locally\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}}],\"entityMap\":{\"0\":{\"type\":\"command\",\"mutability\":\"IMMUTABLE\",\"data\":{\"id\":10650,\"name\":\"midas2 annotate_genome --species all \\\\\\n  --midasdb_name newdb --midasdb_dir midasdb_custom \\\\\\n  --debug --force\",\"os_name\":null,\"os_version\":null,\"command_name\":\"\",\"description\":null,\"can_edit\":1,\"guid\":\"8A5F4C000EA411ED902F3369173792AB\"}},\"1\":{\"type\":\"command\",\"mutability\":\"IMMUTABLE\",\"data\":{\"id\":10651,\"name\":\"midas2 build_midasdb --generate_gene_feature \\\\\\n  --genomes all \\\\\\n  --midasdb_name newdb --midasdb_dir midasdb_custom \\\\\\n  --debug --force\",\"os_name\":null,\"os_version\":null,\"command_name\":\"\",\"description\":null,\"can_edit\":1,\"guid\":\"98114F100EA411ED902F3369173792AB\"}}}}","data":null,"protocol_id":67837,"case_id":0,"critical_ids":"","duration":0,"original_id":0,"number":"2","cases":[],"critical":null},{"id":1449203,"guid":"A06767300EA411ED902F3369173792AB","previous_id":1449202,"previous_guid":"773FD1D00EA411ED902F3369173792AB","section":"","section_color":"","section_duration":0,"is_substep":false,"step":"{\"blocks\":[{\"key\":\"13adj\",\"text\":\"Build one bowtie2 index with the representative genomes.\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"f2et\",\"text\":\" \",\"type\":\"atomic\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[{\"key\":0,\"offset\":0,\"length\":1}],\"data\":{}},{\"key\":\"80tof\",\"text\":\"We build therep-genome bowtie2 index for the two species specified via --species_list to the local directory bt2_index_custom/. Note we need to provide the custom MIDASDB midasdb_custom/ to –-midasdb_dir.\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"apdq9\",\"text\":\"Users can also specify --bt2_indexes_name pangenomes specify to build the bowtie2 index for pangenomes.\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}}],\"entityMap\":{\"0\":{\"type\":\"command\",\"mutability\":\"IMMUTABLE\",\"data\":{\"id\":10652,\"name\":\"midas2 build_bowtie2db \\\\\\n  --midasdb_name newdb --midasdb_dir midasdb_custom \\\\\\n  --species_list 100001,100002 \\\\\\n  --bt2_indexes_name repgenomes \\\\\\n  --bt2_indexes_dir bt2_index_custom \\\\\\n  --num_cores 8\",\"os_name\":null,\"os_version\":null,\"command_name\":\"\",\"description\":null,\"can_edit\":1,\"guid\":\"AD9100600EA411ED902F3369173792AB\"}}}}","data":null,"protocol_id":67837,"case_id":0,"critical_ids":"","duration":0,"original_id":0,"number":"3","cases":[],"critical":null},{"id":1449204,"guid":"B58C4E500EA411ED902F3369173792AB","previous_id":1449203,"previous_guid":"A06767300EA411ED902F3369173792AB","section":"","section_color":"","section_duration":0,"is_substep":false,"step":"{\"blocks\":[{\"key\":\"4aa63\",\"text\":\"Execute run_snps with the rep-genome database. For each sample, this code performs single-sample SNV calling for all the species in the bowtie2 database without any species filters (--select_threshold=-1). The number of CPUs used is specified via --num_cores 8. \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"cgn6r\",\"text\":\" \",\"type\":\"atomic\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[{\"key\":0,\"offset\":0,\"length\":1}],\"data\":{}},{\"key\":\"9n6ld\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}}],\"entityMap\":{\"0\":{\"type\":\"command\",\"mutability\":\"IMMUTABLE\",\"data\":{\"id\":10653,\"name\":\"for sample_name in SRR172902 SRR172903\\ndo\\n    midas2 run_snps \\\\\\n    --sample_name ${sample_name} \\\\\\n    -1 reads/${sample_name}.fastq.gz \\\\\\n    --midasdb_name newdb --midasdb_dir midasdb_custom \\\\\\n    --prebuilt_bowtie2_indexes bt2_index_custom/repgenomes \\\\\\n    --prebuilt_bowtie2_species bt2_index_custom/repgenomes.species \\\\\\n    --select_threshold=-1 \\\\\\n    --num_cores 8 midas2_output_custom\\ndone\",\"os_name\":null,\"os_version\":null,\"command_name\":\"\",\"description\":null,\"can_edit\":1,\"guid\":\"CE893F800EA411ED902F3369173792AB\"}}}}","data":null,"protocol_id":67837,"case_id":0,"critical_ids":"","duration":0,"original_id":0,"number":"4","cases":[],"critical":null},{"id":1449205,"guid":"D3085F000EA411ED902F3369173792AB","previous_id":1449204,"previous_guid":"B58C4E500EA411ED902F3369173792AB","section":"","section_color":"","section_duration":0,"is_substep":false,"step":"{\"blocks\":[{\"key\":\"dq1e\",\"text\":\"Confirm midas2 run_snps has finished successfully.\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"38upr\",\"text\":\"Once the single-sample SNV analysis is complete without any reported error, check for the output files (see Basic Protocol 3).\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}}],\"entityMap\":{}}","data":null,"protocol_id":67837,"case_id":0,"critical_ids":"","duration":0,"original_id":0,"number":"5","cases":[],"critical":null}],"template_id":5,"title":"Support Protocol 2: Metagenotyping with a Custom Collection of Genomes","title_html":"Support Protocol 2: Metagenotyping with a Custom Collection of Genomes","type_id":1,"units":[{"id":1,"type_id":3,"name":"µL","can_manage":0},{"id":2,"type_id":3,"name":"mL","can_manage":0},{"id":3,"type_id":3,"name":"L","can_manage":0},{"id":4,"type_id":3,"name":"µg","can_manage":0},{"id":5,"type_id":3,"name":"mg","can_manage":0},{"id":6,"type_id":3,"name":"g","can_manage":0},{"id":7,"type_id":3,"name":"kg","can_manage":0},{"id":8,"type_id":3,"name":"ng","can_manage":0},{"id":9,"type_id":3,"name":"Hz","can_manage":0},{"id":10,"type_id":24,"name":"°C","can_manage":0},{"id":11,"type_id":24,"name":"°К","can_manage":0},{"id":12,"type_id":24,"name":"°F","can_manage":0},{"id":13,"type_id":25,"name":"Mass Percent","can_manage":0},{"id":14,"type_id":25,"name":"% volume","can_manage":0},{"id":15,"type_id":25,"name":"Mass / % volume","can_manage":0},{"id":16,"type_id":25,"name":"Parts per Million (PPM)","can_manage":0},{"id":17,"type_id":25,"name":"Parts per Billion (PPB)","can_manage":0},{"id":18,"type_id":25,"name":"Parts per Trillion (PPT)","can_manage":0},{"id":19,"type_id":25,"name":"Mole Fraction","can_manage":0},{"id":20,"type_id":25,"name":"Mole Percent","can_manage":0},{"id":21,"type_id":25,"name":"Molarity (M)","can_manage":0},{"id":22,"type_id":25,"name":"Molarity (m)","can_manage":0},{"id":23,"type_id":25,"name":"Genome copies per ml","can_manage":0},{"id":24,"type_id":3,"name":"μV","can_manage":0},{"id":25,"type_id":3,"name":"ms","can_manage":0},{"id":26,"type_id":3,"name":"pg","can_manage":0},{"id":27,"type_id":25,"name":"Molarity dilutions","can_manage":0},{"id":28,"type_id":25,"name":"millimolar (mM)","can_manage":0},{"id":29,"type_id":25,"name":"micromolar (µM)","can_manage":0},{"id":30,"type_id":25,"name":"nanomolar (nM)","can_manage":0},{"id":31,"type_id":25,"name":"picomolar (pM)","can_manage":0},{"id":32,"type_id":24,"name":"Room temperature","can_manage":0},{"id":33,"type_id":30,"name":"rpm","can_manage":0},{"id":34,"type_id":30,"name":"x g","can_manage":0},{"id":165,"type_id":24,"name":"On ice","can_manage":0},{"id":200,"type_id":32,"name":"cm","can_manage":0},{"id":201,"type_id":32,"name":"mm","can_manage":0},{"id":202,"type_id":32,"name":"µm","can_manage":0},{"id":203,"type_id":32,"name":"nm","can_manage":0},{"id":204,"type_id":25,"name":"mg/mL","can_manage":0},{"id":205,"type_id":25,"name":"µg/µL","can_manage":0},{"id":206,"type_id":25,"name":"% (v/v)","can_manage":0},{"id":1324,"type_id":30,"name":"rcf","can_manage":0},{"id":1359,"type_id":35,"name":"Bar","can_manage":0},{"id":1360,"type_id":35,"name":"Pa","can_manage":0}],"uri":"support-protocol-2-metagenotyping-with-a-custom-co-ceg5tby6","url":"https://www.protocols.io/view/support-protocol-2-metagenotyping-with-a-custom-co-ceg5tby6","version_class":67837,"version_data":{"id":0,"code":"ceg5tby6","version_class":67837,"parent_id":null,"parent_uri":null,"is_same_owner":false,"is_parent_public":false,"has_pending_merge_request":false,"has_approved_merge_request":false,"merge_request":null},"version_id":0,"version_uri":"support-protocol-2-metagenotyping-with-a-custom-co-dm6gpbp65lzp/v1","versions":[{"id":67837,"title":"Support Protocol 2: Metagenotyping with a Custom Collection of Genomes","title_html":"Support Protocol 2: Metagenotyping with a Custom Collection of Genomes","image":{"source":"https://www.protocols.io/img/default_protocol.png","webp_source":null,"placeholder":"https://www.protocols.io/img/default_protocol.png","webp_placeholder":null},"doi":"dx.doi.org/10.17504/protocols.io.dm6gpbp65lzp/v1","uri":"support-protocol-2-metagenotyping-with-a-custom-co-ceg5tby6","published_on":1659119275,"modified_on":1659119275,"version_class":67837,"version_id":0,"version_code":"ceg5tby6","version_uri":"support-protocol-2-metagenotyping-with-a-custom-co-dm6gpbp65lzp/v1","created_on":1659032323,"categories":null,"creator":{"name":"miriam.goldman ","affiliation":null,"affiliation_url":null,"username":"n4qle1y1r1x4tle1","link":null,"image":{"source":"/img/avatars/006.png","placeholder":"/img/avatars/006.png","webp_source":""}},"stats":{"number_of_comments":0,"last_comment_time":0}}],"warning":""}