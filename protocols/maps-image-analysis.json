{"id":43973,"title":"MAPS image analysis","title_html":"<p>MAPS image analysis<\/p>","image":{"source":"https:\/\/www.protocols.io\/img\/default_protocol.png","placeholder":"https:\/\/www.protocols.io\/img\/default_protocol.png"},"doi":"dx.doi.org\/10.17504\/protocols.io.bn7dmhi6","doi_status":2,"uri":"maps-image-analysis-bn7dmhi6","type_id":1,"template_id":5,"published_on":1604078634,"parent_protocols":[],"parent_collections":[],"cited_protocols":[],"version_id":0,"version_data":{"id":"0","code":"bn7dmhi6","parent_id":0,"parent_uri":null,"is_same_owner":false,"has_pending_merge_request":false,"has_approved_merge_request":false},"created_on":1603930916,"modified_on":null,"categories":null,"public":1,"is_unlisted":0,"creator":{"name":"jessechao ","affiliation":null,"affiliations":[],"username":"m4ule152q1y4yle1","note":null,"link":null,"image":{"source":"\/img\/avatars\/008.png","placeholder":"\/img\/avatars\/008.png"},"badges":[{"id":2,"image":{"source":"\/img\/badges\/bronze.svg","placeholder":"\/img\/badges\/bronze.svg"},"name":"Author"}],"verified":0,"is_verified_user":false,"research_interests":null,"blocked_by_you":false,"blocked_you":false,"hide_following":false},"journal":null,"journal_name":null,"journal_link":null,"article_citation":null,"has_versions":0,"link":null,"total_collections":0,"number_of_steps":10,"authors":[{"name":"jessechao ","affiliation":"1.\tDepartment of Cellular and Physiological Sciences, Life Sciences Institute, University of British Columbia, Vancouver, Canada, V6T1Z3 ","affiliations":[],"username":"m4ule152q1y4yle1","note":null,"link":null,"image":{"source":"\/img\/avatars\/008.png","placeholder":"\/img\/avatars\/008.png"},"badges":[],"verified":1,"is_verified_user":true,"research_interests":null,"blocked_by_you":false,"blocked_you":false,"hide_following":false}],"versions":[],"groups":[{"id":12697,"uri":"university-of-british-columbia","title":"University of British Columbia","image":{"source":"https:\/\/www.protocols.io\/img\/group_placeholder.png","placeholder":"https:\/\/www.protocols.io\/img\/group_placeholder.png"},"tech_support":{"email":null,"phone":null,"hide_contact":0,"use_email":0,"url":null},"is_member":1,"request":{"id":12697,"uri":"university-of-british-columbia","title":"University of British Columbia","image":{"source":"https:\/\/www.protocols.io\/img\/group_placeholder.png","placeholder":"https:\/\/www.protocols.io\/img\/group_placeholder.png"},"tech_support":{"email":null,"phone":null,"hide_contact":0,"use_email":0,"url":null},"is_member":1,"description":null,"research_interests":null,"website":null,"location":null,"affiliation":null,"status":{"is_visible":true,"access_level":0},"stats":{"files":[],"total_members":0,"total_followers":0,"total_child_groups":0,"total_parent_groups":0,"has_collaborations":0},"user_status":{"is_member":true,"is_confirmed":true,"is_invited":false,"is_owner":true,"is_admin":false,"is_following":false},"join_link":null,"token":null,"owner":{"name":" ","affiliation":null,"affiliations":[],"username":null,"note":null,"link":null,"image":{"source":null,"placeholder":null},"badges":[],"verified":0,"is_verified_user":false,"research_interests":null,"blocked_by_you":false,"blocked_you":false,"hide_following":false},"is_protocol_requested":0,"is_group_requested":0,"is_my":false,"is_request":false,"is_confirmed":1,"is_declined":0,"requester":{"name":" ","affiliation":null,"affiliation_url":null,"username":null,"link":null},"protocol":{"id":0,"title":"MAPS image analysis","title_html":"MAPS image analysis","image":{"source":null,"placeholder":null},"doi":null,"doi_status":0,"uri":"maps-image-analysis-bn7dmhi6","type_id":1,"template_id":0,"published_on":null,"stats":{"number_of_views":0,"number_of_steps":0,"number_of_bookmarks":0,"number_of_comments":0,"number_of_exports":0,"number_of_runs":0,"number_of_votes":0,"is_voted":0},"parent_protocols":[],"parent_collections":[],"cited_protocols":[]},"created_on":1604078634,"resolve_on":0,"resolved_user":{"name":" ","affiliation":null,"affiliations":[],"username":null,"note":null,"link":null,"image":{"source":null,"placeholder":null},"badges":[],"verified":0,"is_verified_user":false,"research_interests":null,"blocked_by_you":false,"blocked_you":false,"hide_following":false},"shared":false}}],"is_owner":1,"has_subprotocols":0,"is_subprotocol":0,"is_bookmarked":0,"can_claim_authorship":0,"can_accept_authorship":0,"can_be_copied":1,"can_remove_fork":1,"fork_id":null,"url":"https:\/\/www.protocols.io\/view\/maps-image-analysis-bn7dmhi6","forks_count":{"private":0,"public":0},"access":{"can_view":1,"can_remove":0,"can_add":0,"can_edit":0,"can_publish":0,"can_get_doi":0,"can_share":1,"can_move":1,"can_move_outside":1,"can_transfer":1,"can_download":1,"is_locked":0},"guid":"2EB6AB80197A11EBBCC201CCF7845578","state_version_id":514,"steps":[{"id":1065548,"guid":"C0940FA0197C11EBBCC201CCF7845578","previous_id":null,"previous_guid":null,"modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"B1DF4002E30A482BAF0780C947842C16","order_id":1,"type_id":6,"title":"Section","source":{"title":"Setting up required environment and packages"}},{"id":1054724,"guid":"D08725D5A66B45BEAD29B6627089EFEE","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\">Navigate to <\/div><div class = \"text-block\"><a href=\"https:\/\/github.com\/jessecanada\/MAPS\" style = \"text-decoration:underline;color:blue;cursor:pointer;\"><span style = \":;\">https:\/\/github.com\/jessecanada\/MAPS<\/span><\/a><\/div><div class = \"text-block\">, download the repository. <\/div><\/div>"}}],"cases":[],"data":null,"html":null,"section":null,"section_color":"#A492FF","section_duration":0,"critical":null,"critical_id":null,"duration":0},{"id":1065596,"guid":"82EA0B50199511EBBCC201CCF7845578","previous_id":1065548,"previous_guid":"C0940FA0197C11EBBCC201CCF7845578","modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"66ECD1EE725E4DD6A1B62C2B2288249C","order_id":1,"type_id":6,"title":"Section","source":{"title":"Setting up required environment and packages"}},{"id":1054724,"guid":"EFE85003BDB14E76B5E670ABB5AF7E5B","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\">The following commands assume that you are using conda (or Anaconda) to manage your python packages and that you are on a Unix type system (Linux or OSX).<\/div><\/div>"}}],"cases":[],"data":null,"html":null,"section":null,"section_color":"#A492FF","section_duration":0,"critical":null,"critical_id":null,"duration":0},{"id":1065598,"guid":"FC0416C0199511EBBCC201CCF7845578","previous_id":1065596,"previous_guid":"82EA0B50199511EBBCC201CCF7845578","modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"EB467DBDDBEA4164B51CCE5942EE277A","order_id":1,"type_id":6,"title":"Section","source":{"title":"Setting up required environment and packages"}},{"id":1054724,"guid":"C78909B6E47D489E99E54C4D30D4EC35","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\">Use the following commands in terminal:<\/div><div class = \"text-block\">Now you are ready to rock and roll. For additional details, see <\/div><div class = \"text-block\"><a href=\"https:\/\/docs.conda.io\/projects\/conda\/en\/latest\/user-guide\/tasks\/manage-environments.html\" style = \"text-decoration:underline;color:blue;cursor:pointer;\"><span style = \":;\">https:\/\/docs.conda.io\/projects\/conda\/en\/latest\/user-guide\/tasks\/manage-environments.html<\/span><\/a><\/div><\/div>"}},{"id":1054725,"guid":"FC4111901A0A11EBBCC201CCF7845578","order_id":2,"type_id":15,"title":"command","source":{"id":8096,"name":"conda create -n myenv python=3","command_name":"create virtual environment","command":"Create a new virtual python environment using conda. Replace \"myenv\" with your own preferred name.","os_name":"Mac OS","os_version":"any"}},{"id":1054726,"guid":"38694E801A0B11EBBCC201CCF7845578","order_id":3,"type_id":15,"title":"command","source":{"id":8097,"name":"conda activate myenv","command_name":"activate virtual environment","command":"","os_name":"Mac OS","os_version":"any"}},{"id":1054727,"guid":"4E4180101A0B11EBBCC201CCF7845578","order_id":4,"type_id":15,"title":"command","source":{"id":8098,"name":"conda install --file requirements.txt","command_name":"install required packages","command":null,"os_name":"Mac OS","os_version":null}},{"id":1054728,"guid":"71DC2F701A0B11EBBCC201CCF7845578","order_id":5,"type_id":15,"title":"command","source":{"id":8099,"name":"conda deactivate","command_name":"exit virtual environment","command":"Use this command at the end of your work session.","os_name":"Mac OS","os_version":null}}],"cases":[],"data":null,"html":null,"section":null,"section_color":"#A492FF","section_duration":0,"critical":null,"critical_id":null,"duration":0},{"id":1065603,"guid":"9A353860199611EBBCC201CCF7845578","previous_id":1065598,"previous_guid":"FC0416C0199511EBBCC201CCF7845578","modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"5B31F34063E64133917C13D5EB564BC3","order_id":1,"type_id":6,"title":"Section","source":{"title":"Step 1 - image QC"}},{"id":1054724,"guid":"91CB3E6379A745EE9FD718F33C3CFF74","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\">Open \"MAPS_1_img-QC.ipynb\" in Jupiter Notebook and follow the steps in the notebook to remove blurry images.<\/div><\/div>"}}],"cases":[],"data":null,"html":null,"section":null,"section_color":"#94EBFF","section_duration":0,"critical":null,"critical_id":null,"duration":0},{"id":1065607,"guid":"13B7E1F0199D11EBBCC201CCF7845578","previous_id":1065603,"previous_guid":"9A353860199611EBBCC201CCF7845578","modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"5B21135B1DCB4F6BB974C4F76F6DB761","order_id":1,"type_id":6,"title":"Section","source":{"title":"Step 2 - cell detection"}},{"id":1054724,"guid":"6D22C28BDDC644A3BB2904A8B677E920","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\">Follow this quick start guide to build your first object detection model on Azure. (link: <\/div><div class = \"text-block\"><a href=\"https:\/\/docs.microsoft.com\/en-us\/azure\/cognitive-services\/custom-vision-service\/get-started-build-detector\" style = \"text-decoration:underline;color:blue;cursor:pointer;\"><span style = \":;\">https:\/\/docs.microsoft.com\/en-us\/azure\/cognitive-services\/custom-vision-service\/get-started-build-detector<\/span><\/a><\/div><div class = \"text-block\">)<\/div><div class = \"text-block\">Note that you can augment the training images you create on Azure. To do this, follow the optional training augmentation step below.<\/div><div class = \"text-block\">Take note of the endpoint, training key, prediction key, resource ID and project ID.<\/div><\/div>"}}],"cases":[],"data":null,"html":null,"section":null,"section_color":"#84CE84","section_duration":0,"critical":null,"critical_id":null,"duration":0},{"id":1065608,"guid":"190187F0199E11EBBCC201CCF7845578","previous_id":1066099,"previous_guid":"4090CAA01A0D11EBBCC201CCF7845578","modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"F8FD8F65AA8549E289FB8FB9C7B2CBBE","order_id":1,"type_id":6,"title":"Section","source":{"title":"Step 2 - cell detection"}},{"id":1054724,"guid":"A2576741D0E546BA92EA3943988CCA21","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\">Open \"MAPS_2_cell-detection.ipynb\". We would recommend opening this notebook on Google Colab. Follow the steps in the notebook to crop out individual cells.<\/div><\/div>"}}],"cases":[],"data":null,"html":null,"section":null,"section_color":"#84CE84","section_duration":0,"critical":null,"critical_id":null,"duration":0},{"id":1065609,"guid":"56574860199E11EBBCC201CCF7845578","previous_id":1065608,"previous_guid":"190187F0199E11EBBCC201CCF7845578","modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"2BBA23A79BE543939DC476BEB6B96DDA","order_id":1,"type_id":6,"title":"Section","source":{"title":"Step 3 - phenotype discovery"}},{"id":1054724,"guid":"84B3FD06DCA848E69FF33B597B2B851D","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\">There are two options here. To use the method in Figure 5A, open \"MAPS_3_conv_stacking.ipynb\" and follow the instructions in the notebook to generate cell galleries. Alternatively, to use the method in Figure 5C (i.e. deep autoencoder), open \"MAPS_3_autoencoder.ipynb\" and follow the steps in the notebook. Again, we recommend opening the notebooks in Colab.<\/div><\/div>"}}],"cases":[],"data":null,"html":null,"section":null,"section_color":"#FFED92","section_duration":0,"critical":null,"critical_id":null,"duration":0},{"id":1066095,"guid":"A9C1AF101A0A11EBBCC201CCF7845578","previous_id":1065609,"previous_guid":"56574860199E11EBBCC201CCF7845578","modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"808B8F32458B4AA59C57FBB36EB4158F","order_id":1,"type_id":6,"title":"Section","source":{"title":"Step 3 - phenotype discovery"}},{"id":1054724,"guid":"46387BA462624038B0C0A9B74CA17743","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\">After generating cell galleries for wild type and a few variants, carefully inspect them to decide how many classes of localizations you need to classify.<\/div><\/div>"}}],"cases":[],"data":null,"html":null,"section":null,"section_color":"#FFED92","section_duration":0,"critical":null,"critical_id":null,"duration":0},{"id":1066096,"guid":"8A2317101A0B11EBBCC201CCF7845578","previous_id":1066095,"previous_guid":"A9C1AF101A0A11EBBCC201CCF7845578","modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"22800CAACB2A43A6B7A360CC63335763","order_id":1,"type_id":6,"title":"Section","source":{"title":"Step 4 - phenotype classification"}},{"id":1054724,"guid":"5299E493CC0547028D14FBC0AB8D8F1E","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\">Gather the cropped individual cell images. Open \"MAPS_4_phenotype_classification.ipynb\" and follow the instructions in the notebook to make predictions and classify phenotypes. Again, we recommend opening this notebook on Colab. In the end you will get a .csv file containing predictions for each cell.<\/div><div class = \"text-block\">Congratulations, you've made it to the end!<\/div><\/div>"}}],"cases":[],"data":null,"html":null,"section":null,"section_color":"#EA9F6C","section_duration":0,"critical":null,"critical_id":null,"duration":0},{"id":1066099,"guid":"4090CAA01A0D11EBBCC201CCF7845578","previous_id":1065607,"previous_guid":"13B7E1F0199D11EBBCC201CCF7845578","modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"33468B26FD5B44C382DA0DB0C12E39B9","order_id":1,"type_id":6,"title":"Section","source":{"title":"Step 2 - cell detection"}},{"id":1054724,"guid":"F63EB4964909448B8D4E3FADB1F32F9F","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\">(optional) Once you have labeled ~100 training images, you can perform training augmentation to boost the performance of your model. Note that it is always better to label more training images.<\/div><div class = \"text-block\">Open \"MAPS_2.1_training_augmentation.ipynb\". We recommend opening this notebook on Google Colab so that you don't need to install additional packages<\/div><\/div>"}}],"cases":[],"data":null,"html":null,"section":null,"section_color":"#84CE84","section_duration":0,"critical":null,"critical_id":null,"duration":0}],"document":null,"materials":[],"description":null,"changed_on":1604078634}