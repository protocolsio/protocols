{"id":52999,"title":"Structure-from-motion multi-view photogrammetry applied to linear-scan sediment cores images","title_html":"<p>Structure-from-motion multi-view photogrammetry applied to linear-scan sediment cores images<\/p>","image":{"source":"https:\/\/s3.amazonaws.com\/protocols-files\/files\/eb7cbbhyf.jpg","placeholder":"https:\/\/s3.amazonaws.com\/protocols-files\/files\/eb7cbbhyf.jpg"},"doi":null,"doi_status":0,"uri":"structure-from-motion-multi-view-photogrammetry-ap-bxzfpp3n","type_id":1,"template_id":1,"published_on":1630833932,"parent_protocols":[],"parent_collections":[],"cited_protocols":[],"version_id":1,"version_data":{"id":1,"code":"bxzfpp3n","parent_id":41103,"parent_uri":"structure-from-motion-multi-view-photogrammetry-ap-bkdpks5n","has_pending_merge_request":0,"has_approved_merge_request":1},"created_on":1630833586,"modified_on":null,"categories":null,"public":1,"is_unlisted":0,"creator":{"name":" ","affiliation":null,"affiliations":[],"username":null,"note":null,"link":null,"image":{"source":null,"placeholder":null},"badges":[],"verified":0,"is_verified_user":false,"research_interests":null,"blocked_by_you":false,"blocked_you":false,"hide_following":false},"journal":null,"journal_name":null,"journal_link":null,"article_citation":null,"has_versions":0,"link":null,"total_collections":0,"number_of_steps":21,"authors":[{"name":"Kevin Jacq","affiliation":"Universit\u00e9 Savoie Mont Blanc","affiliations":[],"username":"kevin-jacq","note":null,"link":null,"image":{"source":"\/img\/avatars\/010.png","placeholder":"\/img\/avatars\/010.png"},"badges":[],"verified":1,"is_verified_user":true,"research_interests":null,"blocked_by_you":false,"blocked_you":false,"hide_following":false},{"name":"William Rapuc","affiliation":"Universit\u00e9 Savoie Mont Blanc","affiliations":[],"username":"w2y274w2s213","note":null,"link":null,"image":{"source":"\/img\/avatars\/011.png","placeholder":"\/img\/avatars\/011.png"},"badges":[],"verified":1,"is_verified_user":true,"research_interests":null,"blocked_by_you":false,"blocked_you":false,"hide_following":false},{"name":"Claire Blanchet","affiliation":"Universit\u00e9 Savoie Mont Blanc","affiliations":[],"username":null,"note":null,"link":null,"image":{"source":null,"placeholder":null},"badges":[],"verified":0,"is_verified_user":false,"research_interests":null,"blocked_by_you":false,"blocked_you":false,"hide_following":false},{"name":"Estelle Ployon","affiliation":"Universit\u00e9 Grenoble Alpes","affiliations":[],"username":null,"note":null,"link":null,"image":{"source":null,"placeholder":null},"badges":[],"verified":0,"is_verified_user":false,"research_interests":null,"blocked_by_you":false,"blocked_you":false,"hide_following":false},{"name":"Cecile Pignol","affiliation":"Universit\u00e9 Savoie Mont Blanc","affiliations":[],"username":"cecile-pignol","note":null,"link":null,"image":{"source":"\/img\/avatars\/006.png","placeholder":"\/img\/avatars\/006.png"},"badges":[],"verified":1,"is_verified_user":true,"research_interests":null,"blocked_by_you":false,"blocked_you":false,"hide_following":false},{"name":"Didier Coquin","affiliation":"Universit\u00e9 Savoie Mont Blanc","affiliations":[],"username":null,"note":null,"link":null,"image":{"source":null,"placeholder":null},"badges":[],"verified":0,"is_verified_user":false,"research_interests":null,"blocked_by_you":false,"blocked_you":false,"hide_following":false},{"name":"Bernard Fanget","affiliation":"Universit\u00e9 Savoie Mont Blanc","affiliations":[],"username":null,"note":null,"link":null,"image":{"source":null,"placeholder":null},"badges":[],"verified":0,"is_verified_user":false,"research_interests":null,"blocked_by_you":false,"blocked_you":false,"hide_following":false}],"versions":[],"groups":[],"is_owner":1,"has_subprotocols":0,"is_subprotocol":0,"is_bookmarked":0,"can_claim_authorship":0,"can_accept_authorship":0,"can_be_copied":1,"can_remove_fork":1,"fork_id":null,"url":"https:\/\/www.protocols.io\/view\/structure-from-motion-multi-view-photogrammetry-ap-bxzfpp3n","forks_count":{"private":0,"public":0},"access":{"can_view":1,"can_remove":1,"can_add":0,"can_edit":0,"can_publish":0,"can_get_doi":1,"can_share":1,"can_move":1,"can_move_outside":1,"can_transfer":1,"can_download":1,"is_locked":0},"guid":"ADF16FA2FFD147DA9F4F8A3214455BCA","state_version_id":5,"steps":[{"id":1245907,"guid":"0737A7D7768844A6B83FC9F074E58B43","previous_id":null,"previous_guid":null,"modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"C61121C8EB97421DAFE6B6C4D243519F","order_id":1,"type_id":6,"title":"Section","source":{"title":"General description of the acquisition bench"}},{"id":1054724,"guid":"0C87EBD6C9D54CA2AD86969ACD0226BB","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/s3.amazonaws.com\/protocols-files\/files\/eb7ebbhyf.jpg\" \/><\/div><br\/><br\/><\/div>"}},{"id":1054725,"guid":"D7CD8E1AB43D438BA2639B8DD543FEA9","order_id":2,"type_id":1,"title":"description","source":{"description":"<div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/s3.amazonaws.com\/protocols-files\/files\/eb7ebbhyf.jpg\" \/><\/div>"}}],"cases":[],"data":null,"html":null,"section":null,"section_color":"#A492FF","section_duration":0,"critical":null,"critical_id":null,"duration":0},{"id":1245908,"guid":"2DC7712B0BE24B92900650B9A0C2C89B","previous_id":1245907,"previous_guid":"0737A7D7768844A6B83FC9F074E58B43","modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"AC4BD720EE2F45B686BFBB0F6D4AFABB","order_id":1,"type_id":6,"title":"Section","source":{"title":"General description of the acquisition bench"}},{"id":1054724,"guid":"B1D565306F234578A6AF95814090B861","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><br\/><div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/s3.amazonaws.com\/protocols-files\/files\/eb7gbbhyf.jpg\" \/><\/div><br\/><br\/><\/div>"}},{"id":1054725,"guid":"97666A21E13B41178019048221D8ED0B","order_id":2,"type_id":1,"title":"description","source":{"description":"<div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/s3.amazonaws.com\/protocols-files\/files\/eb7gbbhyf.jpg\" \/><\/div>"}}],"cases":[],"data":null,"html":null,"section":null,"section_color":"#A492FF","section_duration":0,"critical":null,"critical_id":null,"duration":0},{"id":1245909,"guid":"00EC8D9A4140435DB6B21316274D67F3","previous_id":1245908,"previous_guid":"2DC7712B0BE24B92900650B9A0C2C89B","modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"570F5410B33D44E0AAFC915895236281","order_id":1,"type_id":6,"title":"Section","source":{"title":"Camera acquisition parameters and calibration"}},{"id":1054724,"guid":"A971746897244F08988E5F2C7BC5D2B9","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><br\/><br\/><\/div>"}},{"id":1054725,"guid":"6494EA0BDF7F4ABFB58D187BD393F120","order_id":2,"type_id":19,"title":"safety","source":{"body":"<div class = \"text-blocks\"><div class = \"text-block\">It is important that the parameters related to the camera (shutter speed, aperture, etc.) are fixed throughout the acquisition. The autofocus must also be disabled.<\/div><\/div>","link":""}}],"cases":[],"data":null,"html":null,"section":null,"section_color":"#94EBFF","section_duration":0,"critical":null,"critical_id":null,"duration":0},{"id":1245910,"guid":"14D7672D9E3A4929850A193B2A4E25A7","previous_id":1245909,"previous_guid":"00EC8D9A4140435DB6B21316274D67F3","modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"EF6E1639C37D428D9E2602264CB79531","order_id":1,"type_id":6,"title":"Section","source":{"title":"Camera acquisition parameters and calibration"}},{"id":1054724,"guid":"B8C95172979A4B6F9D2D82D4EF5A1BC3","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\">With the chosen acquisition parameters, the camera must be calibrated in two steps:<\/div><\/div>"}}],"cases":[],"data":null,"html":null,"section":null,"section_color":"#94EBFF","section_duration":0,"critical":null,"critical_id":null,"duration":0},{"id":1245911,"guid":"6E19D58877934577B2A6A9CC35FCB1FE","previous_id":1245910,"previous_guid":"14D7672D9E3A4929850A193B2A4E25A7","modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"3BA1ED95A89F4EC2B9C359D8B3789121","order_id":1,"type_id":6,"title":"Section","source":{"title":"Camera acquisition parameters and calibration"}},{"id":1054724,"guid":"A7F7CE28E1ED4CF7B230322F0AE9BEDE","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\">The first is to perform a white balance, in order to obtain relevant colors according to the lighting, this is called radiometric correction.<\/div><\/div>"}}],"cases":[],"data":null,"html":null,"section":null,"section_color":"#94EBFF","section_duration":0,"critical":null,"critical_id":null,"duration":0},{"id":1245912,"guid":"2923EEB93B464FA393EBA2E48BC87D43","previous_id":1245911,"previous_guid":"6E19D58877934577B2A6A9CC35FCB1FE","modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"AC703525E4454C6D8204AF433EAAC166","order_id":1,"type_id":6,"title":"Section","source":{"title":"Camera acquisition parameters and calibration"}},{"id":1054724,"guid":"43ED8C2694B54C7C801887A3A74EE663","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\">The second consists in taking pictures of a checkerboard from several angles and over the entire surface acquired by the camera. This allows to correct the images for geometric distortions induced by the lens that imply that the pixels are not square.<\/div><br\/><div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/s3.amazonaws.com\/protocols-files\/files\/eb7sbbhyf.jpg\" \/><\/div><br\/><div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/s3.amazonaws.com\/protocols-files\/files\/eb7ubbhyf.jpg\" \/><\/div><br\/><div class = \"text-block\">The Agisoft Lens software uses these checkerboard images to estimate the corrections to be applied to the images.<\/div><br\/><div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/s3.amazonaws.com\/protocols-files\/files\/eb7ibbhyf.jpg\" \/><\/div><br\/><div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/s3.amazonaws.com\/protocols-files\/files\/eb7kbbhyf.jpg\" \/><\/div><br\/><div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/s3.amazonaws.com\/protocols-files\/files\/eb7nbbhyf.jpg\" \/><\/div><br\/><div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/s3.amazonaws.com\/protocols-files\/files\/eb7qbbhyf.jpg\" \/><\/div><br\/><br\/><\/div>"}},{"id":1054725,"guid":"126B3151F04641A68C3D8589E6399E78","order_id":2,"type_id":1,"title":"description","source":{"description":"<div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/s3.amazonaws.com\/protocols-files\/files\/eb7sbbhyf.jpg\" \/><\/div>"}},{"id":1054726,"guid":"F864C30A2EC84D5A8E96D2C7D8ECD29C","order_id":3,"type_id":1,"title":"description","source":{"description":"<div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/s3.amazonaws.com\/protocols-files\/files\/eb7ubbhyf.jpg\" \/><\/div>"}},{"id":1054727,"guid":"6A57F374854740F18CAD33A6BC0D74E7","order_id":4,"type_id":1,"title":"description","source":{"description":"<div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/s3.amazonaws.com\/protocols-files\/files\/eb7ibbhyf.jpg\" \/><\/div>"}},{"id":1054728,"guid":"709F4BFE3992456DB737B67DB9830044","order_id":5,"type_id":1,"title":"description","source":{"description":"<div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/s3.amazonaws.com\/protocols-files\/files\/eb7kbbhyf.jpg\" \/><\/div>"}},{"id":1054729,"guid":"4B8EDB4800334EB5B2CC22F000A72FD4","order_id":6,"type_id":1,"title":"description","source":{"description":"<div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/s3.amazonaws.com\/protocols-files\/files\/eb7nbbhyf.jpg\" \/><\/div>"}},{"id":1054730,"guid":"2151BCEF9776476986A4C6D522A6A69B","order_id":7,"type_id":1,"title":"description","source":{"description":"<div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/s3.amazonaws.com\/protocols-files\/files\/eb7qbbhyf.jpg\" \/><\/div>"}}],"cases":[],"data":null,"html":null,"section":null,"section_color":"#94EBFF","section_duration":0,"critical":null,"critical_id":null,"duration":0},{"id":1245913,"guid":"8FEA6D749C854956AD9FC7DF5EFEF00C","previous_id":1245912,"previous_guid":"2923EEB93B464FA393EBA2E48BC87D43","modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"EBF717A840F84015891C0F7F99A06E56","order_id":1,"type_id":6,"title":"Section","source":{"title":"Recommendations on coded markers and their georeferencing"}},{"id":1054724,"guid":"79A6F8AD637A4606BFF4A35D4431BD61","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\">The method described in this protocol relies on markers placed on rulers along the sample to create a planar spatial reference (z=0).<\/div><div class = \"text-block\">The Agisoft Photoscan or Metashape software proposes a list of markers all different which will be automatically recognized by the software. <\/div><div class = \"text-block\">These markers must be placed in a regular way so as to be present on three successive images to allow a good registration of the images and at a size not exceeding 30 pixels for the central circle. In our case, the markers are 10 cm apart and have a diameter of 1 cm.<\/div><br\/><br\/><br\/><br\/><\/div>"}},{"id":1054725,"guid":"B5FCBDC19EB048AC92166DC39767E519","order_id":2,"type_id":19,"title":"safety","source":{"body":"<div class = \"text-blocks\"><div class = \"text-block\">Markers should be printed on a material that does not get damaged and remains clean from sediment and water. They should also not be plastified as this will reflect light, and the algorithm will be distorted. For these reasons, we decided to use a mat adhesive paper.<\/div><\/div>","link":""}},{"id":1054726,"guid":"99DC2A836BD14DFCAF81AB1577E2A5E5","order_id":3,"type_id":19,"title":"safety","source":{"body":"<div class = \"text-blocks\"><div class = \"text-block\">These targets should be cut in squares and not in circles, keeping in mind that the targets are circles on a white background.<\/div><\/div>","link":""}},{"id":1054727,"guid":"657E9C8CC26247F2A63A2F9091DABE94","order_id":4,"type_id":19,"title":"safety","source":{"body":"<div class = \"text-blocks\"><div class = \"text-block\">If a marker is damaged, it will probably be necessary to replace it with a new one that must be different from the others.<\/div><\/div>","link":""}}],"cases":[],"data":null,"html":null,"section":null,"section_color":"#84CE84","section_duration":0,"critical":null,"critical_id":null,"duration":0},{"id":1245914,"guid":"C6D3730D86614915A78EDE06F060EBCA","previous_id":1245913,"previous_guid":"8FEA6D749C854956AD9FC7DF5EFEF00C","modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"DF9FF477EB3E4B369EC769555720E859","order_id":1,"type_id":6,"title":"Section","source":{"title":"Recommendations on coded markers and their georeferencing"}},{"id":1054724,"guid":"8859B8BA6DC1410BA05A9D534A36D2CE","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\">Each marker, defined by the software, is numbered and must be georeferenced to constrain the models with this landmark created with the rules and markers.<\/div><div class = \"text-block\">The georeferencing is performed by measuring the position of the marker's center relative to a point defined as the origin. In our case, the origin was chosen as one of the corners of the sedimentary core frame by the rulers.<\/div><div class = \"text-block\">The marker numbers and their positions are recorded in a csv file which will be used by the software.<\/div><div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/s3.amazonaws.com\/protocols-files\/files\/eb7wbbhyf.jpg\" \/><\/div><br\/><br\/><\/div>"}},{"id":1054725,"guid":"A149B067632D45D8B377F91D6A6DB384","order_id":2,"type_id":1,"title":"description","source":{"description":"<div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/s3.amazonaws.com\/protocols-files\/files\/eb7wbbhyf.jpg\" \/><\/div>"}}],"cases":[],"data":null,"html":null,"section":null,"section_color":"#84CE84","section_duration":0,"critical":null,"critical_id":null,"duration":0},{"id":1245915,"guid":"25E41C95A7134BB88F3FE31F20AD2C67","previous_id":1245914,"previous_guid":"C6D3730D86614915A78EDE06F060EBCA","modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"29984A9AF2EC41438BB89676D5D7EA2D","order_id":1,"type_id":6,"title":"Section","source":{"title":"Image acquisition"}},{"id":1054724,"guid":"1F57E3F75DC24E80B282C1E2C2C06CE0","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\">The acquisition of the images must be carried out to have sufficient overlap between the successive images. <\/div><div class = \"text-block\">In our case, we have chosen an overlap of 75% so that each point of the sample is present on 4 images.<\/div><\/div>"}}],"cases":[],"data":null,"html":null,"section":null,"section_color":"#FFED92","section_duration":0,"critical":null,"critical_id":null,"duration":0},{"id":1245916,"guid":"3F54587E36474293B4B0AD8AD464F0F4","previous_id":1245915,"previous_guid":"25E41C95A7134BB88F3FE31F20AD2C67","modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"619E4B55508E42DEB1DB2F376B25F525","order_id":1,"type_id":6,"title":"Section","source":{"title":"Creation of the orthoimage"}},{"id":1054724,"guid":"2818E415DE5F4ED09B74411AD52D6852","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\">1) Importing images<\/div><div class = \"text-block\">Select the images with the \"Add Photos\" icon in the Workspace tab or in Workflow > Add Photos...<\/div><\/div>"}}],"cases":[],"data":null,"html":null,"section":null,"section_color":"#EA9F6C","section_duration":0,"critical":null,"critical_id":null,"duration":0},{"id":1245917,"guid":"603B8BE2FB474D72B03E1F54AF929DA6","previous_id":1245916,"previous_guid":"3F54587E36474293B4B0AD8AD464F0F4","modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"80AB6F3EBF1643DE8C0A865CA5573CC6","order_id":1,"type_id":6,"title":"Section","source":{"title":"Creation of the orthoimage"}},{"id":1054724,"guid":"D387DDBB4A564C5AB48D7C7C2088955D","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\">2) Corrections with camera settings<\/div><div class = \"text-block\">Now that the images have been loaded, they need to be corrected with the camera settings. You have to import them by going to Tools > Camera Calibration...<\/div><br\/><div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/s3.amazonaws.com\/protocols-files\/files\/eb7ybbhyf.jpg\" \/><\/div><br\/><div class = \"text-block\">Then load the parameters with the \"load\" icon. Set the calibration to be applied to all images by checking the box.<\/div><br\/><div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/s3.amazonaws.com\/protocols-files\/files\/eb72bbhyf.jpg\" \/><\/div><br\/><br\/><\/div>"}},{"id":1054725,"guid":"BE38F2FC83214444BA6B41C4B2915776","order_id":2,"type_id":1,"title":"description","source":{"description":"<div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/s3.amazonaws.com\/protocols-files\/files\/eb7ybbhyf.jpg\" \/><\/div>"}},{"id":1054726,"guid":"5BD5C0F5CF3142C3A2A3123D61D66CB5","order_id":3,"type_id":1,"title":"description","source":{"description":"<div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/s3.amazonaws.com\/protocols-files\/files\/eb72bbhyf.jpg\" \/><\/div>"}}],"cases":[],"data":null,"html":null,"section":null,"section_color":"#EA9F6C","section_duration":0,"critical":null,"critical_id":null,"duration":0},{"id":1245918,"guid":"9677101B67C647849F62118EBC184F4A","previous_id":1245917,"previous_guid":"603B8BE2FB474D72B03E1F54AF929DA6","modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"EDF9DB0F35FF4B7F81B67DEB408A2333","order_id":1,"type_id":6,"title":"Section","source":{"title":"Creation of the orthoimage"}},{"id":1054724,"guid":"678AE03AF92040D5A31D888795B34F55","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\">3) Marker detection<\/div><div class = \"text-block\">Two methods can be used to detect and georeference the markers. One automatic and one semi-automatic.<\/div><\/div>"}}],"cases":[],"data":null,"html":null,"section":null,"section_color":"#EA9F6C","section_duration":0,"critical":null,"critical_id":null,"duration":0},{"id":1245919,"guid":"3974C3F0E2844F5395A4C0C825A10681","previous_id":1245918,"previous_guid":"9677101B67C647849F62118EBC184F4A","modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"7EE2BEA53FFB403D8B24E25116368555","order_id":1,"type_id":6,"title":"Section","source":{"title":"Creation of the orthoimage"}},{"id":1054724,"guid":"681520A7DF544571BE889581E12975B1","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\">Automatic method:<\/div><div class = \"text-block\">A Python script has been developed to detect the markers and retrieve their positions in the csv file previously created in step 6.<\/div><div class = \"text-block\"><a href=\"https:\/\/github.com\/JacqKevin\/RGB_PhotoScanOrthorectification\" style = \"text-decoration:underline;color:blue;cursor:pointer;\"><span style = \":;\">It can be found on github<\/span><\/a><\/div><div class = \"text-block\">. <\/div><br\/><br\/><div class = \"text-block\">Load the script that will automatically detect the markers and associate them with their coordinates (x, y, z). To do this go to Tools > Run Script...<\/div><br\/><div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/s3.amazonaws.com\/protocols-files\/files\/eb74bbhyf.jpg\" \/><\/div><br\/><div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/s3.amazonaws.com\/protocols-files\/files\/eb76bbhyf.jpg\" \/><\/div><br\/><br\/><\/div>"}},{"id":1054725,"guid":"80A4E8E232E74EADB2D3BB8848EACFAF","order_id":2,"type_id":19,"title":"safety","source":{"body":"<div class = \"text-blocks\"><div class = \"text-block\">It is possible that this script must be corrected, because in the case of a change of version of the Agisoft software, the command tags may be different.<\/div><\/div>","link":""}},{"id":1054726,"guid":"329B1E8652E6447AB6B90AB4B52BB302","order_id":3,"type_id":1,"title":"description","source":{"description":"<div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/s3.amazonaws.com\/protocols-files\/files\/eb74bbhyf.jpg\" \/><\/div>"}},{"id":1054727,"guid":"E881B1B4A29E438EB3549C279D505904","order_id":4,"type_id":1,"title":"description","source":{"description":"<div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/s3.amazonaws.com\/protocols-files\/files\/eb76bbhyf.jpg\" \/><\/div>"}}],"cases":[],"data":null,"html":null,"section":null,"section_color":"#EA9F6C","section_duration":0,"critical":null,"critical_id":null,"duration":0},{"id":1245920,"guid":"537ACDF817BA4A368871D9D8F16F4707","previous_id":1245919,"previous_guid":"3974C3F0E2844F5395A4C0C825A10681","modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"65CECC58020643CDB4E5DFE0AE2BA281","order_id":1,"type_id":6,"title":"Section","source":{"title":"Creation of the orthoimage"}},{"id":1054724,"guid":"581ED7F95D1845AA8DF154D905EFD9F8","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\">Semi-automatic method:<\/div><div class = \"text-block\">Markers can be detected in Tools > Markers > Detect markers...<\/div><br\/><div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/s3.amazonaws.com\/protocols-files\/files\/eb78bbhyf.jpg\" \/><\/div><br\/><div class = \"text-block\"> Then define the markers to be detected according to those that have been printed and placed on the rulers.<\/div><br\/><div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/s3.amazonaws.com\/protocols-files\/files\/eb8abbhyf.jpg\" \/><\/div><br\/><br\/><div class = \"text-block\"> After the markers have been detected, it is necessary to manually enter their positions in x,y, and z in meters.<\/div><br\/><div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/s3.amazonaws.com\/protocols-files\/files\/eb8cbbhyf.jpg\" \/><\/div><br\/><br\/><\/div>"}},{"id":1054725,"guid":"38295A5A22984B4FB46EFC4A980090D3","order_id":2,"type_id":1,"title":"description","source":{"description":"<div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/s3.amazonaws.com\/protocols-files\/files\/eb78bbhyf.jpg\" \/><\/div>"}},{"id":1054726,"guid":"2D96BA904FE84F9B98921B8526C4866E","order_id":3,"type_id":1,"title":"description","source":{"description":"<div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/s3.amazonaws.com\/protocols-files\/files\/eb8abbhyf.jpg\" \/><\/div>"}},{"id":1054727,"guid":"2755F7FFB0DD436788A1B3A355BA98FE","order_id":4,"type_id":1,"title":"description","source":{"description":"<div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/s3.amazonaws.com\/protocols-files\/files\/eb8cbbhyf.jpg\" \/><\/div>"}}],"cases":[],"data":null,"html":null,"section":null,"section_color":"#EA9F6C","section_duration":0,"critical":null,"critical_id":null,"duration":0},{"id":1245921,"guid":"79FD1FC804C344F09E9270E5B092A046","previous_id":1245920,"previous_guid":"537ACDF817BA4A368871D9D8F16F4707","modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"CEA0A7381F744118A83752DE9ED3CE8B","order_id":1,"type_id":6,"title":"Section","source":{"title":"Creation of the orthoimage"}},{"id":1054724,"guid":"8356FAADA3E4496B8E6CCC0AFADCB917","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\">Now that everything has been calibrated and the markers defined, it is necessary to follow the order of the Workflow for the creation of the orthoimage.<\/div><br\/><div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/s3.amazonaws.com\/protocols-files\/files\/eb8ebbhyf.jpg\" \/><\/div><br\/><div class = \"text-block\">The different stages of the model are visible in the Workspace tab (bottom left) by unrolling Chunk:<\/div><br\/><div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/s3.amazonaws.com\/protocols-files\/files\/eb8gbbhyf.jpg\" \/><\/div><br\/><br\/><\/div>"}},{"id":1054725,"guid":"1D5BF86A2B144B12999054967C5E1669","order_id":2,"type_id":1,"title":"description","source":{"description":"<div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/s3.amazonaws.com\/protocols-files\/files\/eb8ebbhyf.jpg\" \/><\/div>"}},{"id":1054726,"guid":"F4696156693047A5B8AB5F91A7DA52B4","order_id":3,"type_id":1,"title":"description","source":{"description":"<div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/s3.amazonaws.com\/protocols-files\/files\/eb8gbbhyf.jpg\" \/><\/div>"}}],"cases":[],"data":null,"html":null,"section":null,"section_color":"#EA9F6C","section_duration":0,"critical":null,"critical_id":null,"duration":0},{"id":1245922,"guid":"015C804AF6154C5CA10F017389092074","previous_id":1245921,"previous_guid":"79FD1FC804C344F09E9270E5B092A046","modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"ACB48342654048C9AA85C2551A46778C","order_id":1,"type_id":6,"title":"Section","source":{"title":"Creation of the orthoimage"}},{"id":1054724,"guid":"5A92C89417AB4E58BEF325A6A597B775","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\">4) Registration and assembly<\/div><\/div>"}}],"cases":[],"data":null,"html":null,"section":null,"section_color":"#EA9F6C","section_duration":0,"critical":null,"critical_id":null,"duration":0},{"id":1245923,"guid":"ABD26850846D44ADB8EE472B671E24D7","previous_id":1245922,"previous_guid":"015C804AF6154C5CA10F017389092074","modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"1953336DCFCA402CAE0A8D332441DEC4","order_id":1,"type_id":6,"title":"Section","source":{"title":"Creation of the orthoimage"}},{"id":1054724,"guid":"412A80E01C63487F82EE5BB551BDED41","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\">The first step is the alignment of the images which estimates the analog pixels between them, the positions of the cameras and creates tie points that correspond to the connection points between the images.<\/div><div class = \"text-block\">Go to Workflow > Align Photos... then select settings.<\/div><br\/><div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/s3.amazonaws.com\/protocols-files\/files\/eb8ibbhyf.jpg\" \/><\/div><br\/><div class = \"text-block\">This step is the most important. It is important to check that, following these calculations, the reconstruction is horizontal. If a curved shape appear, it is a well-known \u201cdome or arc effect\u201d due to the miss-estimations of pixel positions in x, y, and z typical of linear image acquisition.<\/div><div class = \"text-block\">To do this, use the radius of the sphere to rotate the model, by staying pressed with the left click, you can rotate it. There may be some points that are not correct, they will not prevent the continuation of the steps. The main thing is that the model is horizontal.<\/div><div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/s3.amazonaws.com\/protocols-files\/files\/eb8kbbhyf.jpg\" \/><\/div><br\/><div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/s3.amazonaws.com\/protocols-files\/files\/eb8nbbhyf.jpg\" \/><\/div><br\/><div class = \"text-block\">The reconstruction error of the marker positions is also estimated, allowing to estimate areas where new control points have to be added manually to optimize the model. To add control points, select locations on images with right click > Create Marker and right click > Place Marker for the following images to associate a marker to multiple images. It may be necessary to de-align the images, before aligning them with the new control points.<\/div><br\/><div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/s3.amazonaws.com\/protocols-files\/files\/eb8qbbhyf.jpg\" \/><\/div><br\/><br\/><\/div>"}},{"id":1054725,"guid":"296D5DEE6963419F9578FA345CAA74B9","order_id":2,"type_id":1,"title":"description","source":{"description":"<div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/s3.amazonaws.com\/protocols-files\/files\/eb8ibbhyf.jpg\" \/><\/div>"}},{"id":1054726,"guid":"B29F16C56D3543648256936814CA5CB0","order_id":3,"type_id":1,"title":"description","source":{"description":"<div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/s3.amazonaws.com\/protocols-files\/files\/eb8kbbhyf.jpg\" \/><\/div>"}},{"id":1054727,"guid":"17C59DCB1F88478C9D24188B53F7C773","order_id":4,"type_id":1,"title":"description","source":{"description":"<div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/s3.amazonaws.com\/protocols-files\/files\/eb8nbbhyf.jpg\" \/><\/div>"}},{"id":1054728,"guid":"DD02ED1053D04C9D8ED9BA03898B8C6C","order_id":5,"type_id":1,"title":"description","source":{"description":"<div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/s3.amazonaws.com\/protocols-files\/files\/eb8qbbhyf.jpg\" \/><\/div>"}}],"cases":[],"data":null,"html":null,"section":null,"section_color":"#EA9F6C","section_duration":0,"critical":null,"critical_id":null,"duration":0},{"id":1245924,"guid":"FFA4EC143FF54DA5BA38B3A75602F511","previous_id":1245923,"previous_guid":"ABD26850846D44ADB8EE472B671E24D7","modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"B7B7E70A547C42098493185FF998C666","order_id":1,"type_id":6,"title":"Section","source":{"title":"Creation of the orthoimage"}},{"id":1054724,"guid":"F9A5398FBCB048F19B1BDC730ECF2DDD","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\">The second step is the dense cloud that estimates a reconstruction of the depth of each photo and determines its coordinates with the multiview stereo correspondence and the previous estimate of the image geometry.<\/div><div class = \"text-block\">To calculate the dense cloud, go to Workflow > Build Dense Cloud.<\/div><br\/><div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/s3.amazonaws.com\/protocols-files\/files\/eb8sbbhyf.jpg\" \/><\/div><br\/><br\/><\/div>"}},{"id":1054725,"guid":"9AEC36F155254971A327BB60E6B871CA","order_id":2,"type_id":1,"title":"description","source":{"description":"<div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/s3.amazonaws.com\/protocols-files\/files\/eb8sbbhyf.jpg\" \/><\/div>"}}],"cases":[],"data":null,"html":null,"section":null,"section_color":"#EA9F6C","section_duration":0,"critical":null,"critical_id":null,"duration":0},{"id":1245925,"guid":"95EFBDF2A1994084AE5897F6506FF797","previous_id":1245924,"previous_guid":"FFA4EC143FF54DA5BA38B3A75602F511","modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"D22DBB5254214D04A289DEFF1842195A","order_id":1,"type_id":6,"title":"Section","source":{"title":"Creation of the orthoimage"}},{"id":1054724,"guid":"0FCB50028BA84BE4B86589AD4009BBCE","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\">5) Mesh and orthorectification:<\/div><br\/><\/div>"}}],"cases":[],"data":null,"html":null,"section":null,"section_color":"#EA9F6C","section_duration":0,"critical":null,"critical_id":null,"duration":0},{"id":1245926,"guid":"A7CA27674C2A4457988B7A4DD8BE5C21","previous_id":1245925,"previous_guid":"95EFBDF2A1994084AE5897F6506FF797","modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"49D25922572A47EE9DAB8D6A2665941A","order_id":1,"type_id":6,"title":"Section","source":{"title":"Creation of the orthoimage"}},{"id":1054724,"guid":"08518705308F47E7B3A7B7AEBA0F4D1A","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\">The algorithm then uses the points of the dense cloud to generate a closed surface with triangular surfaces, this step is called meshing.<\/div><div class = \"text-block\">It can be made with Workflow > Build Mesh...<\/div><br\/><div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/s3.amazonaws.com\/protocols-files\/files\/eb8ubbhyf.jpg\" \/><\/div><br\/><div class = \"text-block\">Look at the result of the 3D model. In the case of a very dark image it means that the model is upside down, otherwise the model is in the right direction. This is to be taken into account in the next step.<\/div><div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/s3.amazonaws.com\/protocols-files\/files\/eb8wbbhyf.jpg\" \/><\/div><br\/><div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/s3.amazonaws.com\/protocols-files\/files\/eb8ybbhyf.jpg\" \/><\/div><br\/><br\/><\/div>"}},{"id":1054725,"guid":"205C56AC4713482BA93940ECE9205F43","order_id":2,"type_id":1,"title":"description","source":{"description":"<div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/s3.amazonaws.com\/protocols-files\/files\/eb8ubbhyf.jpg\" \/><\/div>"}},{"id":1054726,"guid":"8AD7E3A4DE674FC5A1ABEAF2877DEDFC","order_id":3,"type_id":1,"title":"description","source":{"description":"<div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/s3.amazonaws.com\/protocols-files\/files\/eb8wbbhyf.jpg\" \/><\/div>"}},{"id":1054727,"guid":"DF59CD019C8D49FEBC535C00C485D7C6","order_id":4,"type_id":1,"title":"description","source":{"description":"<div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/s3.amazonaws.com\/protocols-files\/files\/eb8ybbhyf.jpg\" \/><\/div>"}}],"cases":[],"data":null,"html":null,"section":null,"section_color":"#EA9F6C","section_duration":0,"critical":null,"critical_id":null,"duration":0},{"id":1245927,"guid":"1FEE11449FD045EA95AF4E596A811110","previous_id":1245926,"previous_guid":"A7CA27674C2A4457988B7A4DD8BE5C21","modified_on":0,"protocol_id":0,"components":[{"id":1054723,"guid":"B6C558D5C0814167A73CCC3B2C3F46F6","order_id":1,"type_id":6,"title":"Section","source":{"title":"Creation of the orthoimage"}},{"id":1054724,"guid":"F11DBE80B2CD45069EB80747CBB58552","order_id":1,"type_id":1,"title":"description","source":{"description":"<div class = \"text-blocks\"><div class = \"text-block\">Finally, the orthorectified image is estimated from the projection of the colored mesh in a 2D space to correct perspective image and projection distortions.<\/div><div class = \"text-block\">To perform this step, go to Workflow > Build Orthomosaic...<\/div><div class = \"text-block\">If the model is in the right direction then select the default settings, otherwise change Top XY to Bottom XY.<\/div><br\/><div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/s3.amazonaws.com\/protocols-files\/files\/eb82bbhyf.jpg\" \/><\/div><br\/><div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/s3.amazonaws.com\/protocols-files\/files\/eb84bbhyf.jpg\" \/><\/div><br\/><div class = \"text-block\">Finally it is possible to export the orthophoto with File > Export Orthomosaic > Export JPEG\/TIFF\/png...<\/div><\/div>"}},{"id":1054725,"guid":"B1314CE84B314BAF9870E8113B8D36DD","order_id":2,"type_id":1,"title":"description","source":{"description":"<div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/s3.amazonaws.com\/protocols-files\/files\/eb82bbhyf.jpg\" \/><\/div>"}},{"id":1054726,"guid":"956C41C526014504ABD4DDDEBC7FDAD9","order_id":3,"type_id":1,"title":"description","source":{"description":"<div style = \"text-align :; float : ;\"><img style = \"\" src = \"https:\/\/s3.amazonaws.com\/protocols-files\/files\/eb84bbhyf.jpg\" \/><\/div>"}}],"cases":[],"data":null,"html":null,"section":null,"section_color":"#EA9F6C","section_duration":0,"critical":null,"critical_id":null,"duration":0}],"document":"","materials":[],"description":"<div class = \"text-blocks\"><div class = \"text-block\">Image acquisition is the first step to save primary color information for environmental samples before disturbing them with other, mainly destructive analyses. The improvement of RGB cameras and image processing algorithms allows to obtain a metrically calibrated image at high resolution called ortho-image. The way to obtain this image requires the processing of several raw images acquired along the sample. We propose a semi-automatic method that uses metrically calibrated targets to create the ortho-image with Agisoft Photoscan or Metashape software.<\/div><div class = \"text-block\">HAL Id : hal-03257581, version 1<\/div><div class = \"text-block\">DOI : 10.1007\/s10933-021-00204-x<\/div><\/div>","changed_on":1630833932}