{"access":{"can_view":true,"can_edit":false,"can_remove":false,"can_add":false,"can_publish":false,"can_get_doi":false,"can_share":true,"can_move":true,"can_move_outside":true,"can_transfer":true,"can_download":true,"limited_run":false,"limited_private_links":false,"limited_blind_links":false,"is_locked":false},"authors":[{"name":"Moritz Negwer","affiliation":"Radboudumc Nijmegen","affiliation_url":null,"username":"m4yle1w1w105vle1","link":null,"image":{"source":"https://lh3.googleusercontent.com/a/AATXAJyZGXwviv2oKW7mkTn6EzbKqzw5BX8ZA7sromcA=s96-c","placeholder":"https://lh3.googleusercontent.com/a/AATXAJyZGXwviv2oKW7mkTn6EzbKqzw5BX8ZA7sromcA=s96-c","webp_source":""},"note":"","is_verified_user":true,"orcid":""}],"before_start":"","book_chapter":null,"can_accept_authorship":false,"can_be_copied":true,"can_claim_authorship":false,"can_manage_keywords":true,"can_remove_fork":false,"can_sign":false,"child_steps":{},"cited_protocols":[],"collection_items":[],"created_on":1644751266,"creator":{"name":"Moritz Negwer","affiliation":"","affiliation_url":null,"username":"m4yle1w1w105vle1","link":null,"image":{"source":"https://lh3.googleusercontent.com/a/AATXAJyZGXwviv2oKW7mkTn6EzbKqzw5BX8ZA7sromcA=s96-c","placeholder":"https://lh3.googleusercontent.com/a/AATXAJyZGXwviv2oKW7mkTn6EzbKqzw5BX8ZA7sromcA=s96-c","webp_source":""},"badges":[{"id":3,"name":"Power author!","image":{"source":"/img/badges/silver.svg","placeholder":"/img/badges/silver.svg"}}],"affiliations":[]},"description":"{\"blocks\":[{\"key\":\"55mrb\",\"text\":\"This protocol is a supplement to our upcoming publication \\\"FriendlyClearMap: An optimized toolkit for mouse brain mapping and analysis\\\". \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"1du8e\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"afkkr\",\"text\":\"In this protocol, we describe in detail how to run Clearmap1 in a Docker container. \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"e7bai\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"3ra6g\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}}],\"entityMap\":{}}","disclaimer":"","document":"","documents":[],"doi":"dx.doi.org/10.17504/protocols.io.eq2lynnkrvx9/v1","doi_status":2,"ethics_statement":null,"fork_id":null,"fork_info":null,"forks":[],"funders":[],"groups":[],"guid":"04A224A08CBF11ECB34AA97DEFE89C99","guidelines":"","has_references":false,"has_step_reagents":false,"has_versions":true,"id":58123,"image":{"source":"https://www.protocols.io/img/default_protocol.png","webp_source":null,"placeholder":"https://www.protocols.io/img/default_protocol.png","webp_placeholder":null},"image_attribution":"","in_trash":false,"is_bookmarked":false,"is_contact_suspended":false,"is_content_confidential":false,"is_content_warning":false,"is_doi_reserved":false,"is_in_pending_publishing":false,"is_in_transfer":false,"is_owner":true,"is_research":true,"is_retracted":false,"is_shared_directly":false,"is_subprotocol":null,"is_unlisted":false,"item_id":875618,"journal":null,"journals":[],"keywords":null,"last_modified":1684444158,"link":"","location":null,"manuscript_citation":"","materials":[],"materials_text":"","ownership_history":null,"parent_collections":[],"parent_protocols":[],"peer_reviewed":false,"protocol_references":"","public":true,"public_fork_note":"","published_on":1684444158,"references":[],"related_equipments":[],"related_materials":[],"reserved_doi":"","retraction_reason":null,"samples":{},"shared_access_id":16,"show_comparison":true,"sign_info":null,"state_version_id":6365,"stats":{"is_voted":false,"number_of_views":75,"number_of_steps":27,"number_of_bookmarks":0,"number_of_comments":0,"number_of_bookmarked_comments":0,"number_of_steps_comments":0,"number_of_protocol_comments":0,"number_of_exports":0,"number_of_runs":0,"number_of_votes":0,"number_of_reagents":0,"number_of_equipments":0,"number_of_collections":0,"number_of_forks":{"private":0,"public":0},"number_of_accessible_forks":0},"status":{"id":1,"info":"We use this protocol and it's working"},"steps":[{"id":1344820,"guid":"0F81F4E08CBF11ECB34AA97DEFE89C99","previous_id":0,"previous_guid":null,"section":"\u003cp\u003eDocker Setup\u003c/p\u003e","section_color":"#A492FF","section_duration":0,"is_substep":false,"step":"{\"blocks\":[{\"key\":\"2spr7\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"chtn2\",\"text\":\"On Windows: \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[{\"style\":\"bold\",\"offset\":0,\"length\":12}],\"entityRanges\":[],\"data\":{}},{\"key\":\"3nhsl\",\"text\":\"If you haven't already, download and set up Docker Desktop for Windows. This requires administrator privileges and will also install the Windows Subsystem for Linux (WSL2). \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"7jei3\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"728ch\",\"text\":\"Download: \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"cl12o\",\"text\":\"https://www.docker.com/products/docker-desktop \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[{\"key\":0,\"offset\":0,\"length\":46}],\"data\":{}},{\"key\":\"cpua8\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"8trv7\",\"text\":\"Then, download the docker container from our repository: \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"8tkk5\",\"text\":\"XXX docker container goes here\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"3299i\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"g5nk\",\"text\":\"Download and install Ilastik for Windows: \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"3514u\",\"text\":\"https://www.ilastik.org/download.html\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[{\"key\":1,\"offset\":0,\"length\":37}],\"data\":{}},{\"key\":\"9hae9\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"alg7e\",\"text\":\"Download and install FIJI for Windows: \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"inf7\",\"text\":\"https://imagej.net/software/fiji/downloads\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[{\"key\":2,\"offset\":0,\"length\":42}],\"data\":{}},{\"key\":\"b661c\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"3flpg\",\"text\":\"Update FIJI to the latest version\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"7srid\",\"text\":\"    FIJI Plugin update: FIJI -\\u003e Help -\\u003e Update, then restart, click Apply Changes\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"9vfpl\",\"text\":\"    FIJI program update: FIJI -\\u003e Help -\\u003e Update ImageJ \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"aing1\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"doqji\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"cll80\",\"text\":\"Verify that BigWarp is installed as FIJI plugin. It should be installed by default on newer FIJI versions. \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"9gsb7\",\"text\":\"https://imagej.net/plugins/bigwarp \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[{\"key\":3,\"offset\":0,\"length\":34}],\"data\":{}},{\"key\":\"amkjq\",\"text\":\"(FIJI -\\u003e Plugins -\\u003e BigDataViewer -\\u003e BigWarp) \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"670lg\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"3uef5\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"5fj9j\",\"text\":\"On Linux: \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[{\"style\":\"bold\",\"offset\":0,\"length\":10}],\"entityRanges\":[],\"data\":{}},{\"key\":\"cnc9v\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"5rid1\",\"text\":\"Install docker as described here: https://docs.docker.com/engine/install/ubuntu/ \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[{\"key\":4,\"offset\":34,\"length\":46}],\"data\":{}},{\"key\":\"4f8iv\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"8ndik\",\"text\":\"Then, download the docker container from our repository: \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"7cntu\",\"text\":\"XXX docker container goes here\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"b7l7o\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"f7629\",\"text\":\"Download and install Ilastik for Linux \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"delgi\",\"text\":\"https://www.ilastik.org/download.html\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[{\"key\":5,\"offset\":0,\"length\":37}],\"data\":{}},{\"key\":\"5qrh6\",\"text\":\"(we recommend a direct install of the newest Beta, as the versions in e.g. Ubuntu repositories often lag a few versions behind) \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"9r4gv\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"fgbfg\",\"text\":\"Download and install FIJI for Linux: \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"70laa\",\"text\":\"https://imagej.net/software/fiji/downloads\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[{\"key\":6,\"offset\":0,\"length\":42}],\"data\":{}},{\"key\":\"4die1\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"94gdu\",\"text\":\"Update FIJI to the latest version\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"74ug9\",\"text\":\"    FIJI Plugin update: FIJI -\\u003e Help -\\u003e Update, then restart, click Apply Changes\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"d3k3m\",\"text\":\"    FIJI program update: FIJI -\\u003e Help -\\u003e Update ImageJ \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"255v5\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"egpqu\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"3e6n\",\"text\":\"Verify that BigWarp is installed as FIJI plugin. It should be installed by default on newer FIJI versions. \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"526s9\",\"text\":\"https://imagej.net/plugins/bigwarp \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[{\"key\":7,\"offset\":0,\"length\":34}],\"data\":{}},{\"key\":\"2aqmi\",\"text\":\"(FIJI -\\u003e Plugins -\\u003e BigDataViewer -\\u003e BigWarp) \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"cllo1\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"drniu\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"7h5k5\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}}],\"entityMap\":{\"0\":{\"type\":\"link\",\"mutability\":\"\",\"data\":{\"guid\":\"4197CD828CBF11EC882D0A58A9FEAC02\",\"url\":\"https://www.docker.com/products/docker-desktop\"}},\"1\":{\"type\":\"link\",\"mutability\":\"\",\"data\":{\"guid\":\"B272B1B38CC111EC882D0A58A9FEAC02\",\"url\":\"https://www.ilastik.org/download.html\"}},\"2\":{\"type\":\"link\",\"mutability\":\"\",\"data\":{\"guid\":\"C3F7C8988CC111EC882D0A58A9FEAC02\",\"url\":\"https://imagej.net/software/fiji/downloads\"}},\"3\":{\"type\":\"link\",\"mutability\":\"\",\"data\":{\"guid\":\"E9B82EBC8CC111EC882D0A58A9FEAC02\",\"url\":\"https://imagej.net/plugins/bigwarp\"}},\"4\":{\"type\":\"link\",\"mutability\":\"MUTABLE\",\"data\":{\"guid\":\"CFBC9C7EB14D11EC9DA90A58A9FEAC02\",\"url\":\"https://docs.docker.com/engine/install/ubuntu\"}},\"5\":{\"type\":\"link\",\"mutability\":\"\",\"data\":{\"guid\":\"E1228EFAB14D11EC9DA90A58A9FEAC02\",\"url\":\"https://www.ilastik.org/download.html\"}},\"6\":{\"type\":\"link\",\"mutability\":\"\",\"data\":{\"guid\":\"FE1388D9B14D11EC9DA90A58A9FEAC02\",\"url\":\"https://imagej.net/software/fiji/downloads\"}},\"7\":{\"type\":\"link\",\"mutability\":\"\",\"data\":{\"guid\":\"1BB44ECCB14E11EC9DA90A58A9FEAC02\",\"url\":\"https://imagej.net/plugins/bigwarp\"}}}}","data":null,"protocol_id":58123,"case_id":0,"critical_ids":"","duration":0,"original_id":0,"number":"1","cases":[],"critical":null},{"id":1344822,"guid":"71D661808CBF11ECB34AA97DEFE89C99","previous_id":1344820,"previous_guid":"0F81F4E08CBF11ECB34AA97DEFE89C99","section":"\u003cp\u003eGetting your data ready \u003c/p\u003e","section_color":"#94EBFF","section_duration":0,"is_substep":false,"step":"{\"blocks\":[{\"key\":\"9ov4k\",\"text\":\"This pipeline assumes that the samples are saved as a series of single-channel tiffs, one per z-plane. \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"ekmpo\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"4gvue\",\"text\":\"This means that if you have tiled images, you will need to stitch them so that there is only one per z-plane. This can be done with e.g. the FIJI stitching plugin (Fiji -\\u003e Plugins -\\u003e Stitching -\\u003e Deprecated -\\u003e Stitch Sequence of Grids of Images. \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"avckp\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"f4n04\",\"text\":\"Double-check that the folder with the tiff series does only contain this series and nothing else (i.e. tiling information or other images). If you have multiple channels, \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"ag29l\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"4nv98\",\"text\":\"At a minimum, this pipeline expects a single channel with the signal of interest (e.g. tdTomato or cFos). The autofluorescence channel is used in the original ClearMap 1/2 pipelines for atlas alignment only - if your signal channel has some autofluorescence, it can be used for atlas alignment as well. If you recorded an autofluorescence channel, you can use this for atlas alignment as well. \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"ejvj1\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"7b0gv\",\"text\":\"For fast processing, we recommend at a minimum 32GB RAM and an SSD for fast access. We tested this pipeline on a Laptop (64GB RAM, Ryzen 5 4600H 6 core / 12 threads, SSD) and a desktop PC (32GB RAM, Ryzen 5 3200G 4c/8t, external SSD via USB3), both running Windows 10. \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}}],\"entityMap\":{}}","data":null,"protocol_id":58123,"case_id":0,"critical_ids":"","duration":0,"original_id":0,"number":"2","cases":[],"critical":null},{"id":1344825,"guid":"371A09408CC211ECB34AA97DEFE89C99","previous_id":1344822,"previous_guid":"71D661808CBF11ECB34AA97DEFE89C99","section":"\u003cp\u003eSetting up Segmentation with Ilastik (optional) \u003c/p\u003e","section_color":"#84CE84","section_duration":0,"is_substep":false,"step":"{\"blocks\":[{\"key\":\"bl7p5\",\"text\":\"Generate a substack for Ilastik with FIJI: \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[{\"style\":\"bold\",\"offset\":0,\"length\":43}],\"entityRanges\":[],\"data\":{}},{\"key\":\"8fnd8\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"43an\",\"text\":\"In FIJI, load a representative section of your image stack. We recommend \\u003e200 z-planes at 3 µm z-height, from the middle of the stack. \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"fcbme\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"etgue\",\"text\":\"FIJI -\\u003e Import -\\u003e Image Sequence\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"amv96\",\"text\":\"    Select your folder \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"b1dgo\",\"text\":\"    Set Start image: e.g. 800 if you have 1600 z-planes\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"bedbt\",\"text\":\"    Set count: 200 \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"8pv60\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"5f6ih\",\"text\":\"Once loaded, save as  a hdf5 image for Ilastik: \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"3ohnc\",\"text\":\"    FIJI -\\u003e Plugins -\\u003e BigDataViewer -\\u003e Export Current Image as XML/HDF5\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"5cvn3\",\"text\":\"    Leave settings as below: \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"1kjlr\",\"text\":\"  \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[{\"key\":0,\"offset\":0,\"length\":1}],\"data\":{}},{\"key\":\"1eu3v\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"2u5ss\",\"text\":\"FIJI will then generate the image pyramid for the hdf5 stack and save it in the appointed location. \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}}],\"entityMap\":{\"0\":{\"type\":\"image\",\"mutability\":\"MUTABLE\",\"data\":{\"guid\":\"751503008CC511ECB34AA97DEFE89C99\",\"height\":281.6333287556969,\"id\":373886,\"is_video\":false,\"legend\":\"\",\"mime\":\"image/png\",\"original_name\":\"image.png\",\"placeholder\":\"https://content.protocols.io/files/h4sqbqtzx.jpg\",\"source\":\"https://content.protocols.io/files/mpd8bqtzx.jpg\",\"type\":1,\"webp_source\":\"https://content.protocols.io/files/mpd6bqtzx.webp\",\"width\":241.3999960763113}}}}","data":null,"protocol_id":58123,"case_id":0,"critical_ids":"","duration":0,"original_id":0,"number":"3","cases":[],"critical":null},{"id":1344826,"guid":"BA4E91C08CC511ECB34AA97DEFE89C99","previous_id":1344825,"previous_guid":"371A09408CC211ECB34AA97DEFE89C99","section":"\u003cp\u003eSetting up Segmentation with Ilastik (optional) \u003c/p\u003e","section_color":"#84CE84","section_duration":0,"is_substep":false,"step":"{\"blocks\":[{\"key\":\"c93q5\",\"text\":\"Loading the data in Ilastik \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[{\"style\":\"bold\",\"offset\":0,\"length\":28}],\"entityRanges\":[],\"data\":{}},{\"key\":\"8l5q9\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"39ure\",\"text\":\"Generate a Pixel Classification workflow in Ilastik \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"6kiq3\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"36k3m\",\"text\":\"   \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[{\"key\":0,\"offset\":0,\"length\":1}],\"data\":{}},{\"key\":\"2r4c6\",\"text\":\"Load the hdf5 file via \\\"Add Single Image\\\", then select t0000/s00/1/cells to display the \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"6f9nk\",\"text\":\"  \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[{\"key\":1,\"offset\":0,\"length\":1}],\"data\":{}},{\"key\":\"68ar6\",\"text\":\"Copy the stack into the project file by right-clicking on the image -\\u003e \\\"Edit\\\", then selecting \\\"Copy into project file\\\". This results in larger Ilastik files, but is important for loading the same files in the docker environment (relative paths will not be preserved). \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"cbcn0\",\"text\":\" \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[{\"key\":2,\"offset\":0,\"length\":1}],\"data\":{}},{\"key\":\"81vsq\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"s3v4\",\"text\":\"If you want to adjust the brightness of the displayed images, you can do so by right-clicking on \\\"Raw Data\\\" in the left column -\\u003e \\\"Adjust Thresholds\\\". Then uncheck \\\"Automatic Range\\\" and set the maximum value so that your cells of interest are visible.  \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"6u02c\",\"text\":\"  \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[{\"key\":3,\"offset\":0,\"length\":1}],\"data\":{}},{\"key\":\"467fv\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}}],\"entityMap\":{\"0\":{\"type\":\"image\",\"mutability\":\"MUTABLE\",\"data\":{\"guid\":\"3BA2A1D08CC611ECB34AA97DEFE89C99\",\"height\":224.00000000000014,\"id\":373892,\"is_video\":false,\"legend\":\"\",\"mime\":\"image/png\",\"original_name\":\"image.png\",\"placeholder\":\"https://content.protocols.io/files/h4ssbqtzx.jpg\",\"source\":\"https://content.protocols.io/files/mpeebqtzx.jpg\",\"type\":1,\"webp_source\":\"https://content.protocols.io/files/mpedbqtzx.webp\",\"width\":337.53424657534265}},\"1\":{\"type\":\"image\",\"mutability\":\"MUTABLE\",\"data\":{\"guid\":\"C587FE408CC611ECB34AA97DEFE89C99\",\"height\":230.38546370072808,\"id\":373902,\"is_video\":false,\"legend\":\"\",\"mime\":\"image/png\",\"original_name\":\"image.png\",\"placeholder\":\"https://content.protocols.io/files/h4subqtzx.jpg\",\"source\":\"https://content.protocols.io/files/mpeqbqtzx.jpg\",\"type\":1,\"webp_source\":\"https://content.protocols.io/files/mpepbqtzx.webp\",\"width\":344.326100639675}},\"2\":{\"type\":\"image\",\"mutability\":\"MUTABLE\",\"data\":{\"guid\":\"CBD643008CC711ECB34AA97DEFE89C99\",\"height\":225.66181818181812,\"id\":373912,\"is_video\":false,\"legend\":\"\",\"mime\":\"image/png\",\"original_name\":\"image.png\",\"placeholder\":\"https://content.protocols.io/files/h4swbqtzx.jpg\",\"source\":\"https://content.protocols.io/files/mpe2bqtzx.jpg\",\"type\":1,\"webp_source\":\"https://content.protocols.io/files/mpezbqtzx.webp\",\"width\":338.18528610354224}},\"3\":{\"type\":\"image\",\"mutability\":\"MUTABLE\",\"data\":{\"guid\":\"BEAE13F08CC811ECB34AA97DEFE89C99\",\"height\":212.73636363636373,\"id\":373924,\"is_video\":false,\"legend\":\"\",\"mime\":\"image/png\",\"original_name\":\"image.png\",\"placeholder\":\"https://content.protocols.io/files/h4sybqtzx.jpg\",\"source\":\"https://content.protocols.io/files/mpfebqtzx.jpg\",\"type\":1,\"webp_source\":\"https://content.protocols.io/files/mpfdbqtzx.webp\",\"width\":320.5616438356167}}}}","data":null,"protocol_id":58123,"case_id":0,"critical_ids":"","duration":0,"original_id":0,"number":"4","cases":[],"critical":null},{"id":1344827,"guid":"DB64B1C08CC811ECB34AA97DEFE89C99","previous_id":1344826,"previous_guid":"BA4E91C08CC511ECB34AA97DEFE89C99","section":"\u003cp\u003eSetting up Segmentation with Ilastik (optional) \u003c/p\u003e","section_color":"#84CE84","section_duration":0,"is_substep":false,"step":"{\"blocks\":[{\"key\":\"87j9a\",\"text\":\"Segmentation with Ilastik \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[{\"style\":\"bold\",\"offset\":0,\"length\":26}],\"entityRanges\":[],\"data\":{}},{\"key\":\"fiqul\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"7ot60\",\"text\":\"In the \\\"Select Features\\\" pane, add a 30 (pixels wide) filter by clicking to the right of the 10 column and entering 30. \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"b09a0\",\"text\":\"Then, select the \\\"Edge\\\" and \\\"Texture\\\" boxes for all σ (filters). \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"7bmtq\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"40i8n\",\"text\":\"(Note that those are empirically determined settings. Adding a 30px filter approximately captures single neurons when imaged at 1.1x magnification on a 2160 x 2560 pixel camera. Different imaging conditions, notably with different magnifications, might require different-size filters. Also, skipping the intensity-based filters speeds up calculations without noticeable worse segmentation quality.) \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"dsd5d\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"192h5\",\"text\":\"  \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[{\"key\":0,\"offset\":0,\"length\":1}],\"data\":{}},{\"key\":\"4gg84\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"74i2d\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"a0rmt\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}}],\"entityMap\":{\"0\":{\"type\":\"image\",\"mutability\":\"MUTABLE\",\"data\":{\"guid\":\"21FB33408CDB11ECB34AA97DEFE89C99\",\"height\":239.00909090909084,\"id\":373938,\"is_video\":false,\"legend\":\"\",\"mime\":\"image/png\",\"original_name\":\"image.png\",\"placeholder\":\"https://content.protocols.io/files/h4s2bqtzx.jpg\",\"source\":\"https://content.protocols.io/files/mpfubqtzx.jpg\",\"type\":1,\"webp_source\":\"https://content.protocols.io/files/mpftbqtzx.webp\",\"width\":360.1506849315067}}}}","data":null,"protocol_id":58123,"case_id":0,"critical_ids":"","duration":0,"original_id":0,"number":"5","cases":[],"critical":null},{"id":1344828,"guid":"FF9E17808CDB11ECB34AA97DEFE89C99","previous_id":1344827,"previous_guid":"DB64B1C08CC811ECB34AA97DEFE89C99","section":"\u003cp\u003eSetting up Segmentation with Ilastik (optional) \u003c/p\u003e","section_color":"#84CE84","section_duration":0,"is_substep":true,"step":"{\"blocks\":[{\"key\":\"e97bp\",\"text\":\"In the \\\"Training\\\" pane, define the background (Label 2) \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"di2rj\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"85pc\",\"text\":\"- Zoom out in the XY projection (Ctrl + mousehweel) until the entire brain is visible \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"4j4hn\",\"text\":\"- Select Label 2, set to max size (61) and draw along the empty space besides the brain. Take care not to draw over the edge of the image, as that can lead to problems down the road with some Ilastik versions. \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"35qot\",\"text\":\"- Subsequently, draw single dots along the edges of the brain and in the neuropil where there are no labelled cells. \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"30bne\",\"text\":\"  \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[{\"key\":0,\"offset\":0,\"length\":1}],\"data\":{}},{\"key\":\"1aml7\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}}],\"entityMap\":{\"0\":{\"type\":\"image\",\"mutability\":\"MUTABLE\",\"data\":{\"guid\":\"CDE010308CDC11ECB34AA97DEFE89C99\",\"height\":234.86363331187857,\"id\":373948,\"is_video\":false,\"legend\":\"\",\"mime\":\"image/png\",\"original_name\":\"image.png\",\"placeholder\":\"https://content.protocols.io/files/h4s4bqtzx.jpg\",\"source\":\"https://content.protocols.io/files/mpf6bqtzx.jpg\",\"type\":1,\"webp_source\":\"https://content.protocols.io/files/mpf5bqtzx.webp\",\"width\":353.9041049905022}}}}","data":null,"protocol_id":58123,"case_id":0,"critical_ids":"","duration":0,"original_id":0,"number":"5.1","cases":[],"critical":null},{"id":1344829,"guid":"D4E083608CDC11ECB34AA97DEFE89C99","previous_id":1344828,"previous_guid":"FF9E17808CDB11ECB34AA97DEFE89C99","section":"\u003cp\u003eSetting up Segmentation with Ilastik (optional) \u003c/p\u003e","section_color":"#84CE84","section_duration":0,"is_substep":true,"step":"{\"blocks\":[{\"key\":\"fih7c\",\"text\":\"Subsequently, zoom in on your signal (Ctrl + Scroll wheel). To syncronze the view between the XY projection and the other two, double-leftclick on an object of interest, e.g. a cell. The voxel you clicked will then be centered in the other projections as well. \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"2bvrh\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"d2gu6\",\"text\":\"1) Select a few cells as signal (Label 1, yellow). For our images, a size 5 brush covered most of the labelled cell bodies at their maximum extent. \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"1gong\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"c8k08\",\"text\":\"2) Surround the selected cell with a thin circle of background (1-3 px wide). We found this to be especially helpful when marking cells close to each other, as otherwise Ilastik may wrongly mark the region in between also as signal. \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"f5el6\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"e9qqn\",\"text\":\"3) Repeat for the same cells for the XZ and YZ projections. \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"47s8t\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"7oe2i\",\"text\":\"4) We recommend marking ca. 100 cells in total, spread out over the stack. Take care to select regions that are representative of the entire brain, i.e. with different densities and background intensities. \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"9rro0\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"clsd4\",\"text\":\"  \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[{\"key\":0,\"offset\":0,\"length\":1}],\"data\":{}},{\"key\":\"blbh0\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}}],\"entityMap\":{\"0\":{\"type\":\"image\",\"mutability\":\"MUTABLE\",\"data\":{\"guid\":\"9775C9708CDE11ECB34AA97DEFE89C99\",\"height\":319,\"id\":373956,\"is_video\":false,\"legend\":\"\",\"mime\":\"image/png\",\"original_name\":\"image.png\",\"placeholder\":\"https://content.protocols.io/files/h4s6bqtzx.jpg\",\"source\":\"https://content.protocols.io/files/mpgebqtzx.jpg\",\"type\":1,\"webp_source\":\"https://content.protocols.io/files/mpgdbqtzx.webp\",\"width\":550}}}}","data":null,"protocol_id":58123,"case_id":0,"critical_ids":"","duration":0,"original_id":0,"number":"5.2","cases":[],"critical":null},{"id":1344830,"guid":"ADAA4BD08CDE11ECB34AA97DEFE89C99","previous_id":1344829,"previous_guid":"D4E083608CDC11ECB34AA97DEFE89C99","section":"\u003cp\u003eSetting up Segmentation with Ilastik (optional) \u003c/p\u003e","section_color":"#84CE84","section_duration":0,"is_substep":true,"step":"{\"blocks\":[{\"key\":\"nko8\",\"text\":\"Once you have marked ca. 100 cells, zoom in on one region in all three projections and click \\\"Live Preview\\\" to trigger the training of the random forest algorithm with your input data. \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"3h1hu\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"8ivpj\",\"text\":\"Note: Do not add new input data during training, as this will trigger a re-training from the start. \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[{\"style\":\"bold\",\"offset\":0,\"length\":6},{\"style\":\"italic\",\"offset\":9,\"length\":3}],\"entityRanges\":[],\"data\":{}},{\"key\":\"8kk1v\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"8sum4\",\"text\":\"Depending on the number and speed of your CPU cores, this may take a long time (10-45 minutes) to complete. Once it is completed, the prediction will be overlaid over your field of view. \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"95m0b\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"etnbb\",\"text\":\"Once the training has finished, verify that the segmentation is correct. If not and more training data needs to be added, turn off \\\"Live Preview\\\" before adding new data - otherwise, every new addition will trigger a fresh round of training, leading to long delays. \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[{\"style\":\"bold\",\"offset\":122,\"length\":46}],\"entityRanges\":[],\"data\":{}},{\"key\":\"dsto1\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"973at\",\"text\":\"   \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[{\"key\":0,\"offset\":1,\"length\":1}],\"data\":{}},{\"key\":\"17r6q\",\"text\":\"  \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[{\"key\":1,\"offset\":0,\"length\":1}],\"data\":{}},{\"key\":\"92vc2\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}}],\"entityMap\":{\"0\":{\"type\":\"image\",\"mutability\":\"MUTABLE\",\"data\":{\"guid\":\"7F5088B08CE011ECB34AA97DEFE89C99\",\"height\":268.93999999999994,\"id\":373969,\"is_video\":false,\"legend\":\"{\\\"blocks\\\":[{\\\"key\\\":\\\"co6f4\\\",\\\"text\\\":\\\"Training in progress. Note the progress bar in the bottom left corner. \\\",\\\"type\\\":\\\"unstyled\\\",\\\"depth\\\":0,\\\"inlineStyleRanges\\\":[],\\\"entityRanges\\\":[],\\\"data\\\":{}}],\\\"entityMap\\\":{}}\",\"mime\":\"image/png\",\"original_name\":\"image.png\",\"placeholder\":\"https://content.protocols.io/files/h4s8bqtzx.jpg\",\"source\":\"https://content.protocols.io/files/mpgtbqtzx.jpg\",\"type\":1,\"webp_source\":\"https://content.protocols.io/files/mpgrbqtzx.webp\",\"width\":463.6896551724137}},\"1\":{\"type\":\"image\",\"mutability\":\"MUTABLE\",\"data\":{\"guid\":\"E7807E408CE511ECB34AA97DEFE89C99\",\"height\":319,\"id\":373962,\"is_video\":false,\"legend\":\"{\\\"blocks\\\":[{\\\"key\\\":\\\"ga4u\\\",\\\"text\\\":\\\"Training finished. Note the cell in the center of the XZ projection is predicted to be background. However, scrolling through the XZ projection will reveal that the following plane is segmented as a cell. Therefore, no action is needed. \\\",\\\"type\\\":\\\"unstyled\\\",\\\"depth\\\":0,\\\"inlineStyleRanges\\\":[],\\\"entityRanges\\\":[],\\\"data\\\":{}}],\\\"entityMap\\\":{}}\",\"mime\":\"image/png\",\"original_name\":\"image.png\",\"placeholder\":\"https://content.protocols.io/files/h4tabqtzx.jpg\",\"source\":\"https://content.protocols.io/files/mpgkbqtzx.jpg\",\"type\":1,\"webp_source\":\"https://content.protocols.io/files/mpgjbqtzx.webp\",\"width\":550}}}}","data":null,"protocol_id":58123,"case_id":0,"critical_ids":"","duration":0,"original_id":0,"number":"5.3","cases":[],"critical":null},{"id":1344841,"guid":"238252008CE711ECB34AA97DEFE89C99","previous_id":1344830,"previous_guid":"ADAA4BD08CDE11ECB34AA97DEFE89C99","section":"\u003cp\u003eSetting up Segmentation with Ilastik (optional) \u003c/p\u003e","section_color":"#84CE84","section_duration":0,"is_substep":true,"step":"{\"blocks\":[{\"key\":\"1jepi\",\"text\":\"Auto-selecting the best features for training (optional)\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[{\"style\":\"bold\",\"offset\":0,\"length\":56}],\"entityRanges\":[],\"data\":{}},{\"key\":\"amd3o\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"4sfmp\",\"text\":\"Ilastik offers a \\\"Suggest Features\\\" option. After successful training, this option compares subsets of features to find which reduced subset still represents the training data. \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"34hlu\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"82tjq\",\"text\":\"Doing so can take a long time (several hours), but once done, it reduces the set of required features from the 14 selected in Step 5 of this example to a smaller amount (default 7). \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"essps\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"dddk2\",\"text\":\"    \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[{\"key\":0,\"offset\":0,\"length\":1},{\"key\":1,\"offset\":1,\"length\":1}],\"data\":{}},{\"key\":\"3kbue\",\"text\":\"Finally, click \\\"Select Feature Set\\\" to confirm. Then, retrain the random forest algorithm with the new subset of parameters by clicking \\\"Live Preview\\\" once more. \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}}],\"entityMap\":{\"0\":{\"type\":\"image\",\"mutability\":\"MUTABLE\",\"data\":{\"guid\":\"602B02308CEA11ECB34AA97DEFE89C99\",\"height\":239.7600061035156,\"id\":373974,\"is_video\":false,\"legend\":\"\",\"mime\":\"image/png\",\"original_name\":\"image.png\",\"placeholder\":\"https://content.protocols.io/files/h4tcbqtzx.jpg\",\"source\":\"https://content.protocols.io/files/mpgybqtzx.jpg\",\"type\":1,\"webp_source\":\"https://content.protocols.io/files/mpgxbqtzx.webp\",\"width\":410.8037487754933}},\"1\":{\"type\":\"image\",\"mutability\":\"MUTABLE\",\"data\":{\"guid\":\"69B915608CFB11ECB34AA97DEFE89C99\",\"height\":239.18907259854413,\"id\":373980,\"is_video\":false,\"legend\":\"{\\\"blocks\\\":[{\\\"key\\\":\\\"b4uvc\\\",\\\"text\\\":\\\"Compare the feature by clicking on the eye symbols in the left column. If you agree with the selected subset (\\\\\\\"7 features\\\\\\\"), change the features in the bottom right drop-down menu. There, you can also see the computation time as a comparison. In our example case, the auto-selected subset is approx. 40% faster than the full set of features. \\\",\\\"type\\\":\\\"unstyled\\\",\\\"depth\\\":0,\\\"inlineStyleRanges\\\":[],\\\"entityRanges\\\":[],\\\"data\\\":{}}],\\\"entityMap\\\":{}}\",\"mime\":\"image/png\",\"original_name\":\"image.png\",\"placeholder\":\"https://content.protocols.io/files/h4tebqtzx.jpg\",\"source\":\"https://content.protocols.io/files/mpg6bqtzx.jpg\",\"type\":1,\"webp_source\":\"https://content.protocols.io/files/mpg5bqtzx.webp\",\"width\":409.8255137981283}}}}","data":null,"protocol_id":58123,"case_id":0,"critical_ids":"","duration":0,"original_id":0,"number":"5.4","cases":[],"critical":null},{"id":1344865,"guid":"403BC2108CFF11ECB34AA97DEFE89C99","previous_id":1344841,"previous_guid":"238252008CE711ECB34AA97DEFE89C99","section":"\u003cp\u003eSetting up Segmentation with Ilastik (optional) \u003c/p\u003e","section_color":"#84CE84","section_duration":0,"is_substep":true,"step":"{\"blocks\":[{\"key\":\"c12ab\",\"text\":\"Setting the Ilastik Export settings correctly \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[{\"style\":\"bold\",\"offset\":0,\"length\":46}],\"entityRanges\":[],\"data\":{}},{\"key\":\"100dc\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"fv10o\",\"text\":\"Once the training is complete, proceed to the \\\"Prediction Export\\\" pane. There, click \\\"Choose Export Image Settings\\\", and set the following parameters: \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"cmjmk\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"6dk4t\",\"text\":\"- Change \\\"Convert to data type\\\" to \\\"unsigned 8-bit\\\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"9vmio\",\"text\":\"- Check \\\"Renormalize [min,max] from 0.0 / 1.0 to 0 / 255\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"bvhov\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"dg8t0\",\"text\":\"The rest can be left at default. For the final settings, see below: \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"4gpq4\",\"text\":\"  \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[{\"key\":0,\"offset\":0,\"length\":1}],\"data\":{}},{\"key\":\"e37g5\",\"text\":\"Confirm with OK. Then save (File -\\u003e Save), and close the project. It should now be ready for use in both Clearmap1 and Clearmap 2. \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}}],\"entityMap\":{\"0\":{\"type\":\"image\",\"mutability\":\"MUTABLE\",\"data\":{\"guid\":\"016E12308D0011ECB34AA97DEFE89C99\",\"height\":436.74545454545466,\"id\":373982,\"is_video\":false,\"legend\":\"\",\"mime\":\"image/png\",\"original_name\":\"image.png\",\"placeholder\":\"https://content.protocols.io/files/h4tgbqtzx.jpg\",\"source\":\"https://content.protocols.io/files/mpg8bqtzx.jpg\",\"type\":1,\"webp_source\":\"https://content.protocols.io/files/mpg7bqtzx.webp\",\"width\":415.5882352941181}}}}","data":null,"protocol_id":58123,"case_id":0,"critical_ids":"","duration":0,"original_id":0,"number":"5.5","cases":[],"critical":null},{"id":1344891,"guid":"CAD44C708D0011ECB34AA97DEFE89C99","previous_id":1344865,"previous_guid":"403BC2108CFF11ECB34AA97DEFE89C99","section":"\u003cp\u003eSegmentation with Arivis Vision4D Machine Learning Segmenter (optional) \u003c/p\u003e","section_color":"#FFED92","section_duration":0,"is_substep":false,"step":"{\"blocks\":[{\"key\":\"8i346\",\"text\":\"If you have an install of Arivis Vision4D with the Machine Learning Segmenter package, you can proceed as follows to generate a finished cell coordinate file. \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}}],\"entityMap\":{}}","data":null,"protocol_id":58123,"case_id":0,"critical_ids":"","duration":0,"original_id":0,"number":"6","cases":[],"critical":null},{"id":1344916,"guid":"A7024E808D0211ECB34AA97DEFE89C99","previous_id":1344891,"previous_guid":"CAD44C708D0011ECB34AA97DEFE89C99","section":"\u003cp\u003eSegmentation with Arivis Vision4D Machine Learning Segmenter (optional) \u003c/p\u003e","section_color":"#FFED92","section_duration":0,"is_substep":true,"step":"{\"blocks\":[{\"key\":\"4g4p3\",\"text\":\"Convert your dataset with the Arivis SIS converter \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"3plmr\",\"text\":\"  \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[{\"key\":0,\"offset\":0,\"length\":1}],\"data\":{}},{\"key\":\"6kfek\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}}],\"entityMap\":{\"0\":{\"type\":\"image\",\"mutability\":\"\",\"data\":{\"guid\":\"A90781968D0211EC882D0A58A9FEAC02\",\"height\":275.5199999999999,\"id\":373986,\"is_video\":false,\"legend\":\"{\\\"blocks\\\":[{\\\"key\\\":\\\"bt60n\\\",\\\"text\\\":\\\"Load all files from the image stack as z-planes into SIS converter\\\",\\\"type\\\":\\\"unstyled\\\",\\\"depth\\\":0,\\\"inlineStyleRanges\\\":[],\\\"entityRanges\\\":[],\\\"data\\\":{}}],\\\"entityMap\\\":{}}\",\"mime\":\"image/png\",\"original_name\":\"image.png\",\"placeholder\":\"https://content.protocols.io/files/h4tibqtzx.jpg\",\"source\":\"https://content.protocols.io/files/mphcbqtzx.jpg\",\"type\":1,\"webp_source\":\"https://content.protocols.io/files/mphbbqtzx.webp\",\"width\":444.38709677419354}}}}","data":null,"protocol_id":58123,"case_id":0,"critical_ids":"","duration":0,"original_id":0,"number":"6.1","cases":[],"critical":null},{"id":1344917,"guid":"B34076408D0211ECB34AA97DEFE89C99","previous_id":1344916,"previous_guid":"A7024E808D0211ECB34AA97DEFE89C99","section":"\u003cp\u003eSegmentation with Arivis Vision4D Machine Learning Segmenter (optional) \u003c/p\u003e","section_color":"#FFED92","section_duration":0,"is_substep":true,"step":"{\"blocks\":[{\"key\":\"43slu\",\"text\":\"Then, load them into Arivis, and in the left Processing Pane, add a \\\"Machine Learning Segmenter\\\" processing step. No pre-processing should be necessary. \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"438nk\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"e7bjo\",\"text\":\"  \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[{\"key\":0,\"offset\":0,\"length\":1}],\"data\":{}},{\"key\":\"fh3t3\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}}],\"entityMap\":{\"0\":{\"type\":\"image\",\"mutability\":\"MUTABLE\",\"data\":{\"guid\":\"362EDB30B3AC11EC8F11E502524D78F0\",\"height\":297,\"id\":373998,\"is_video\":false,\"legend\":\"\",\"mime\":\"image/png\",\"original_name\":\"arivis 02 - MLSegmenter added.PNG\",\"placeholder\":\"https://content.protocols.io/files/h4tkbqtzx.jpg\",\"source\":\"https://content.protocols.io/files/mphqbqtzx.jpg\",\"type\":1,\"webp_source\":\"https://content.protocols.io/files/mphpbqtzx.webp\",\"width\":550}}}}","data":null,"protocol_id":58123,"case_id":0,"critical_ids":"","duration":0,"original_id":0,"number":"6.2","cases":[],"critical":null},{"id":1344918,"guid":"B9F1DF108D0211ECB34AA97DEFE89C99","previous_id":1344917,"previous_guid":"B34076408D0211ECB34AA97DEFE89C99","section":"\u003cp\u003eSegmentation with Arivis Vision4D Machine Learning Segmenter (optional) \u003c/p\u003e","section_color":"#FFED92","section_duration":0,"is_substep":true,"step":"{\"blocks\":[{\"key\":\"e33j0\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"bj2ap\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"ahgrl\",\"text\":\"Subsequently, open the \\\"Train Machine Learning Segmenter\\\" pane and start adding foreground and background labels. We recommend the following: \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"fed7a\",\"text\":\"- Make sure to assign some background label to the blank space around the brain and the edges of the sample. \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"d77c7\",\"text\":\"- Mark a representative subset of cells (we recommend 100 throughout the brain). \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"7pndq\",\"text\":\"- Mark a small circle of background around the marked cells. In our experience, this helps considerably with separation of dense cells. \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"dbhnb\",\"text\":\"- Make sure to mark dense projections, fiber tracts, membranes, blood vessels, etc. as background. \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"ft7a1\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"cid67\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"egijd\",\"text\":\"  \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[{\"key\":0,\"offset\":0,\"length\":1}],\"data\":{}},{\"key\":\"610q\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"305v9\",\"text\":\" \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[{\"key\":1,\"offset\":0,\"length\":1}],\"data\":{}},{\"key\":\"ffhiv\",\"text\":\"  \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[{\"key\":2,\"offset\":0,\"length\":1}],\"data\":{}},{\"key\":\"btcmq\",\"text\":\"  \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[{\"key\":3,\"offset\":0,\"length\":1}],\"data\":{}},{\"key\":\"2cs45\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"ag932\",\"text\":\"(If you already have a trained Ilastik file, you can also import it via the \\\"Import from Ilastik\\\" option). \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"9go7i\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"ejffj\",\"text\":\"Once trained, save the training so it can be reused. \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}}],\"entityMap\":{\"0\":{\"type\":\"image\",\"mutability\":\"MUTABLE\",\"data\":{\"guid\":\"8255A340B3AC11EC8F11E502524D78F0\",\"height\":297,\"id\":374026,\"is_video\":false,\"legend\":\"\",\"mime\":\"image/png\",\"original_name\":\"arivis 03 - background.PNG\",\"placeholder\":\"https://content.protocols.io/files/h4tnbqtzx.jpg\",\"source\":\"https://content.protocols.io/files/mpikbqtzx.jpg\",\"type\":1,\"webp_source\":\"https://content.protocols.io/files/mpijbqtzx.webp\",\"width\":550}},\"1\":{\"type\":\"image\",\"mutability\":\"MUTABLE\",\"data\":{\"guid\":\"4C37E0C0B3AC11EC8F11E502524D78F0\",\"height\":297,\"id\":374034,\"is_video\":false,\"legend\":\"\",\"mime\":\"image/png\",\"original_name\":\"arivis 04 - cells 01.PNG\",\"placeholder\":\"https://content.protocols.io/files/h4tqbqtzx.jpg\",\"source\":\"https://content.protocols.io/files/mpiubqtzx.jpg\",\"type\":1,\"webp_source\":\"https://content.protocols.io/files/mpitbqtzx.webp\",\"width\":550}},\"2\":{\"type\":\"image\",\"mutability\":\"MUTABLE\",\"data\":{\"guid\":\"65C6D8C0B3AC11EC8F11E502524D78F0\",\"height\":297,\"id\":374011,\"is_video\":false,\"legend\":\"\",\"mime\":\"image/png\",\"original_name\":\"arivis 05 - cells 01 + bgr.PNG\",\"placeholder\":\"https://content.protocols.io/files/h4tsbqtzx.jpg\",\"source\":\"https://content.protocols.io/files/mph5bqtzx.jpg\",\"type\":1,\"webp_source\":\"https://content.protocols.io/files/mphzbqtzx.webp\",\"width\":550}},\"3\":{\"type\":\"image\",\"mutability\":\"MUTABLE\",\"data\":{\"guid\":\"99EBB170B3AC11EC8F11E502524D78F0\",\"height\":309,\"id\":374020,\"is_video\":false,\"legend\":\"\",\"mime\":\"image/png\",\"original_name\":\"arivis 07 - train.PNG\",\"placeholder\":\"https://content.protocols.io/files/h4tubqtzx.jpg\",\"source\":\"https://content.protocols.io/files/mpiebqtzx.jpg\",\"type\":1,\"webp_source\":\"https://content.protocols.io/files/mpicbqtzx.webp\",\"width\":550}}}}","data":null,"protocol_id":58123,"case_id":0,"critical_ids":"","duration":0,"original_id":0,"number":"6.3","cases":[],"critical":null},{"id":1344928,"guid":"EF206A208D0311ECB34AA97DEFE89C99","previous_id":1344918,"previous_guid":"B9F1DF108D0211ECB34AA97DEFE89C99","section":"\u003cp\u003eSegmentation with Arivis Vision4D Machine Learning Segmenter (optional) \u003c/p\u003e","section_color":"#FFED92","section_duration":0,"is_substep":true,"step":"{\"blocks\":[{\"key\":\"cjjck\",\"text\":\"In the pipeline pane on the left, make sure to change the Input ROI to \\\"current image set\\\" (otherwise it will remain at the default \\\"current view\\\", i.e. the 2D cutout that you are viewing.\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"426q6\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"7qksh\",\"text\":\"  \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[{\"key\":0,\"offset\":0,\"length\":1}],\"data\":{}},{\"key\":\"18e0a\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"a2dcq\",\"text\":\"To export as a coordinate list, add a \\\"Export Objects Features\\\" step to the processing pipeline. \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"5cmvh\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"av5d5\",\"text\":\"  \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[{\"key\":1,\"offset\":0,\"length\":1}],\"data\":{}},{\"key\":\"d4qd\",\"text\":\"Specify the output as an Excel file. Select the following Object Properties: \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"41pq\",\"text\":\"- Deselect everything (defaults won't make much sense) \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"2mmpu\",\"text\":\"- Center of Gravity X / Y / Z (px) \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"2fc5o\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"4b08\",\"text\":\"  \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[{\"key\":2,\"offset\":0,\"length\":1}],\"data\":{}},{\"key\":\"2b3dn\",\"text\":\"  \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[{\"key\":3,\"offset\":0,\"length\":1}],\"data\":{}},{\"key\":\"65ill\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}}],\"entityMap\":{\"0\":{\"type\":\"image\",\"mutability\":\"MUTABLE\",\"data\":{\"guid\":\"7B89DF30B3AD11EC8F11E502524D78F0\",\"height\":297,\"id\":374043,\"is_video\":false,\"legend\":\"\",\"mime\":\"image/png\",\"original_name\":\"arivis 09.5 - set current image set - run pipeline.PNG\",\"placeholder\":\"https://content.protocols.io/files/h4tybqtzx.jpg\",\"source\":\"https://content.protocols.io/files/mpi5bqtzx.jpg\",\"type\":1,\"webp_source\":\"https://content.protocols.io/files/mpi3bqtzx.webp\",\"width\":550}},\"1\":{\"type\":\"image\",\"mutability\":\"MUTABLE\",\"data\":{\"guid\":\"42390530B3AD11EC8F11E502524D78F0\",\"height\":297,\"id\":374054,\"is_video\":false,\"legend\":\"\",\"mime\":\"image/png\",\"original_name\":\"arivis 07 - export to pipeline.PNG\",\"placeholder\":\"https://content.protocols.io/files/h4t2bqtzx.jpg\",\"source\":\"https://content.protocols.io/files/mpjgbqtzx.jpg\",\"type\":1,\"webp_source\":\"https://content.protocols.io/files/mpjfbqtzx.webp\",\"width\":550}},\"2\":{\"type\":\"image\",\"mutability\":\"MUTABLE\",\"data\":{\"guid\":\"5F933600B3AD11EC8F11E502524D78F0\",\"height\":594,\"id\":374058,\"is_video\":false,\"legend\":\"\",\"mime\":\"image/png\",\"original_name\":\"arivis 08 - set parameters.PNG\",\"placeholder\":\"https://content.protocols.io/files/h4t4bqtzx.jpg\",\"source\":\"https://content.protocols.io/files/mpjkbqtzx.jpg\",\"type\":1,\"webp_source\":\"https://content.protocols.io/files/mpjjbqtzx.webp\",\"width\":388}},\"3\":{\"type\":\"image\",\"mutability\":\"MUTABLE\",\"data\":{\"guid\":\"6603EC50B3AD11EC8F11E502524D78F0\",\"height\":594,\"id\":374060,\"is_video\":false,\"legend\":\"\",\"mime\":\"image/png\",\"original_name\":\"arivis 09 - set parameters.PNG\",\"placeholder\":\"https://content.protocols.io/files/h4twbqtzx.jpg\",\"source\":\"https://content.protocols.io/files/mpjnbqtzx.jpg\",\"type\":1,\"webp_source\":\"https://content.protocols.io/files/mpjmbqtzx.webp\",\"width\":388}}}}","data":null,"protocol_id":58123,"case_id":0,"critical_ids":"","duration":0,"original_id":0,"number":"6.4","cases":[],"critical":null},{"id":1344930,"guid":"62927B908D0611ECB34AA97DEFE89C99","previous_id":1344928,"previous_guid":"EF206A208D0311ECB34AA97DEFE89C99","section":"\u003cp\u003eSegmentation with Arivis Vision4D Machine Learning Segmenter (optional) \u003c/p\u003e","section_color":"#FFED92","section_duration":0,"is_substep":true,"step":"{\"blocks\":[{\"key\":\"7l58s\",\"text\":\"Save the pipeline. \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"fnn05\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"dmfe8\",\"text\":\"Then, run it for the file at hand. The Machine Learning Segmenter plugin is CPU-heavy and will likely take approx. 24h for a 2160 x 2560 x 2000 pixel stack on a recent (14 core, 128GB RAM, fast NVMe SSD) workstation. \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"cm69r\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"dnfd1\",\"text\":\"If you want to optimize Arivis' speed, make sure that the cache is written to a SSD. \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"bumcj\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"589mf\",\"text\":\"Furthermore, the objects file is located in a SQL databse in the same folder as the SIS file. We found that with \\u003e100k cells, random read/write access to the database is slowing down processing, easily adding several days of processing time per file. We recommend to at least have the SIS file on a fast internal SSD. \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"63fsc\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"6ub9g\",\"text\":\"If you have sufficient RAM to spare (total \\u003e64GB), you can create a Ramdisk (e.g. with ImDisk, https://sourceforge.net/projects/imdisk-toolkit/) and copy your SIS file there before starting processing. This should considerably speed up processing time for samples where you expect a large number (more than 100k) of segmented cells. \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[{\"key\":0,\"offset\":95,\"length\":48}],\"data\":{}},{\"key\":\"dopbh\",\"text\":\"As Arivis Vision4D itself is very conservative with RAM use (never exceeded 15 GB with our Machine Learning Segmenter-based pipeline), you shold be able to set aside everything above 32GB as a Ramdisk. \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"cii43\",\"text\":\"Note: Make sure to copy your files back onto a SSD or HDD before proceeding with the next stack. Ramdisks are volatile and their contents will disappear if the Ramdisk is unmounted or the workstation is shut off. \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[{\"style\":\"bold\",\"offset\":0,\"length\":5}],\"entityRanges\":[],\"data\":{}}],\"entityMap\":{\"0\":{\"type\":\"link\",\"mutability\":\"\",\"data\":{\"guid\":\"4A4AE9F18D0711EC882D0A58A9FEAC02\",\"url\":\"https://sourceforge.net/projects/imdisk-toolkit\"}}}}","data":null,"protocol_id":58123,"case_id":0,"critical_ids":"","duration":0,"original_id":0,"number":"6.5","cases":[],"critical":null},{"id":1344932,"guid":"F4C34B508D1211ECB34AA97DEFE89C99","previous_id":1344930,"previous_guid":"62927B908D0611ECB34AA97DEFE89C99","section":"\u003cp\u003eAtlas alignment with Dockerized Clearmap pipelines \u003c/p\u003e","section_color":"#EA9F6C","section_duration":0,"is_substep":false,"step":"{\"blocks\":[{\"key\":\"4crif\",\"text\":\"First, set up your folder structure as follows: \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"b04ka\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"dl5g6\",\"text\":\"1) One folder per sample \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"ag0bo\",\"text\":\"2) In this folder, have one subfolder per channel, containing only the image stack (one tiff image per z-plane) \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"b2999\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"bsodo\",\"text\":\"(Note: Make sure that there are no spaces in the path to this folder names, as this will trip up Elastix when running the alignment. If you need to fix the filenames, try Bulk Rename Utility (https://www.bulkrenameutility.co.uk/Download.php) on Windows. On Linux use command line or the Thunar file manager (standard in XFCE-based distributions such as Xubuntu)). \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[{\"key\":0,\"offset\":192,\"length\":48}],\"data\":{}}],\"entityMap\":{\"0\":{\"type\":\"link\",\"mutability\":\"\",\"data\":{\"guid\":\"3545EEBA8D1511EC882D0A58A9FEAC02\",\"url\":\"https://www.bulkrenameutility.co.uk/Download.php\"}}}}","data":null,"protocol_id":58123,"case_id":0,"critical_ids":"","duration":0,"original_id":0,"number":"7","cases":[],"critical":null},{"id":1344933,"guid":"FD1F21108D1811ECB34AA97DEFE89C99","previous_id":1344932,"previous_guid":"F4C34B508D1211ECB34AA97DEFE89C99","section":"\u003cp\u003eAtlas alignment with Dockerized Clearmap pipelines \u003c/p\u003e","section_color":"#EA9F6C","section_duration":0,"is_substep":true,"step":"{\"blocks\":[{\"key\":\"56ols\",\"text\":\"Copy the parameter_file_Ilastik_template.py into the folder and adapt as follows: \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"7570p\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"6qami\",\"text\":\" \",\"type\":\"atomic\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[{\"key\":0,\"offset\":0,\"length\":1}],\"data\":{}},{\"key\":\"8j25n\",\"text\":\"In this case, the \\\\d{4} signals that there are four numbers after the Z , starting from 0000. \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"e10ps\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"fifdn\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"5qvn6\",\"text\":\" \",\"type\":\"atomic\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[{\"key\":1,\"offset\":0,\"length\":1}],\"data\":{}},{\"key\":\"8efhi\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"348ip\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"9pgpl\",\"text\":\" \",\"type\":\"atomic\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[{\"key\":2,\"offset\":0,\"length\":1}],\"data\":{}},{\"key\":\"7hqk7\",\"text\":\"Adapt this to the dimensions of your scan. \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"6r1j5\",\"text\":\"In the case of LaVision / Miltenyi Ultramicroscopes, the tiff headers should contain a large amount of information. You can find this information by loading the first tiff file in FIJI and clicking Image -\\u003e Show Info.  In that case, save the content of the \\\"File Info\\\" window (File -\\u003e Save As, then choose a name and save as .txt). \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"atpdj\",\"text\":\"Then re-open the resulting .txt file with a text editor such as Notepad++ (https://notepad-plus-plus.org/downloads/) on Windows or gedit on Linux. Search for \\\"PhysicalDimension\\\" and note the X, Y, and Z values. \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[{\"key\":3,\"offset\":75,\"length\":40}],\"data\":{}},{\"key\":\"39hg1\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"4fr54\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"1qtvd\",\"text\":\" \",\"type\":\"atomic\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[{\"key\":4,\"offset\":0,\"length\":1}],\"data\":{}},{\"key\":\"928bj\",\"text\":\"If you are using a custom reference atlas with a different resolution (e.g. 10 x 10 x 10 µm/voxel) , adapt the AtlasResolution values. \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"flp33\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"dcdha\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"5ire4\",\"text\":\" \",\"type\":\"atomic\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[{\"key\":5,\"offset\":0,\"length\":1}],\"data\":{}},{\"key\":\"e36ij\",\"text\":\"Adapt the AtlasFile, LabeledImage and AnnotationFile parameters to match the name of your atlas files. \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"drfgl\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"8gpfi\",\"text\":\"Note: Specifically for the regions_IDs.csv, double-check the character encoding - a file prepared on Windows with Excel might get saved in a windows-specific character encoding, which means that the é or ö in names such as \\\"dorsal Raphé\\\" or \\\"Pre-Bötzinger Complex\\\" might cause issues later on. We recommend to double-check the file with Notepad++ or gedit and manually setting the character encoding to UTF-8 (Encoding -\\u003e UTF-8) to prevent errors. \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[{\"style\":\"bold\",\"offset\":0,\"length\":5}],\"entityRanges\":[],\"data\":{}},{\"key\":\"1nmsg\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"5tvh2\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"foqkl\",\"text\":\" \",\"type\":\"atomic\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[{\"key\":6,\"offset\":0,\"length\":1}],\"data\":{}},{\"key\":\"5lp7c\",\"text\":\"First, adapt ImageProcessingMethod (\\\"Ilastik\\\" or \\\"Builtin\\\" or \\\"Import\\\") (XXX doublecheck) \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"6r1ud\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"2e1o3\",\"text\":\"If using Ilastik, also adapt the classifier name to the file name of your Ilastik .ilp project: Replace \\\"name_of_your_Ilastik_classifier.ilp\\\" with the proper filename. \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"79jia\",\"text\":\"(Note that the path does not need to be changed, as this will be changed when running the Docker container) \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"euml1\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"2qe0i\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"60jo6\",\"text\":\" \",\"type\":\"atomic\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[{\"key\":7,\"offset\":0,\"length\":1}],\"data\":{}},{\"key\":\"e6gho\",\"text\":\"Those scripts are for a 12 core / 64 GB RAM system. If you find that the Docker container consumes too much RAM and does not finish the script, reduce the following values: \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"fra8h\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"93r65\",\"text\":\"\\\"processes\\\" : int(os.cpu_count()/2), # this reduces the number of parallel threads to half the available number of processor cores \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"46o6k\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"frqf1\",\"text\":\"Then proceed to halve chunkSizeMax, chunkSizeMin and chunkOverlap until the Docker container runs. \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}}],\"entityMap\":{\"0\":{\"type\":\"code_insert\",\"mutability\":\"IMMUTABLE\",\"data\":{\"blocks\":[{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"fcar6\",\"text\":\"cFosFile = os.path.join(BaseDirectory,\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"315s4\",\"text\":\"    'folder_with_signal_of_interest/\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"7qa23\",\"text\":\"    name_of_the_first_tif_Z\\\\d{4}.ome.tif');\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"3jfto\",\"text\":\"\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"9vcsq\",\"text\":\"#Example: os.path.join(BaseDirectory,\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"8kheu\",\"text\":\"#            '200525_VIP_P26_m69366_TdTom_13-28-31/\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"99ppu\",\"text\":\"#            13-28-31_VIP_P26_m69366_TdTom_UltraII_C00_xyz-Table Z\\\\d{4}.ome.tif');\",\"type\":\"unstyled\"}],\"entityMap\":{}}},\"1\":{\"type\":\"code_insert\",\"mutability\":\"IMMUTABLE\",\"data\":{\"blocks\":[{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"5vll4\",\"text\":\"Autofluofile = os.path.join(BaseDirectory,\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"cbh06\",\"text\":\"    'folder_with_autofluo_stack/\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"40nv5\",\"text\":\"    name_of_the_first_tif_Z\\\\d{4}.ome.tif');\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"569gg\",\"text\":\"\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"dh8kq\",\"text\":\"#If you only have one channel, uncomment the following:\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"5hggu\",\"text\":\"#Autofluofile = cFosFile;\",\"type\":\"unstyled\"}],\"entityMap\":{}}},\"2\":{\"type\":\"code_insert\",\"mutability\":\"IMMUTABLE\",\"data\":{\"blocks\":[{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"a0pj2\",\"text\":\"OriginalResolution = (2.95, 2.95, 3);\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"68um3\",\"text\":\"\",\"type\":\"unstyled\"}],\"entityMap\":{}}},\"3\":{\"type\":\"link\",\"mutability\":\"\",\"data\":{\"guid\":\"460958398D2211EC882D0A58A9FEAC02\",\"url\":\"https://notepad-plus-plus.org/downloads\"}},\"4\":{\"type\":\"code_insert\",\"mutability\":\"IMMUTABLE\",\"data\":{\"blocks\":[{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"4k31n\",\"text\":\"#Resolution of the Atlas (in um/ pixel)\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"66ko8\",\"text\":\"AtlasResolution = (25, 25, 25);\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"4k3rj\",\"text\":\"\",\"type\":\"unstyled\"}],\"entityMap\":{}}},\"5\":{\"type\":\"code_insert\",\"mutability\":\"IMMUTABLE\",\"data\":{\"blocks\":[{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"dvsh3\",\"text\":\"#Path to registration parameters and atlases\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"fqkjr\",\"text\":\"PathReg        = '/CloudMap/atlas_p21/';\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"2tih6\",\"text\":\"AtlasFile      = os.path.join(PathReg, 'Kim_ref_P21_v2_brain.tif');\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"ce2h\",\"text\":\"LabeledImage   = os.path.join(PathReg, 'Kim_ref_P21_v2.1_label.nrrd'); \",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"3upqk\",\"text\":\"AnnotationFile = os.path.join(PathReg, 'regions_IDs.csv');\",\"type\":\"unstyled\"}],\"entityMap\":{}}},\"6\":{\"type\":\"code_insert\",\"mutability\":\"IMMUTABLE\",\"data\":{\"blocks\":[{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"401qe\",\"text\":\"ImageProcessingMethod = \\\"Ilastik\\\";\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"ajvhn\",\"text\":\"\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"8ulei\",\"text\":\"ilastikParameter = {\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"1qsag\",\"text\":\"    \\\"classifier\\\" : \\\"/CloudMap/Classifiers/name_of_your_Ilastik_classifier.ilp\\\",\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"c68sa\",\"text\":\"    \\\"classindex\\\" : 0,\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"bfmgg\",\"text\":\"    \\\"save\\\"       : None, # (str or None)       file name to save result of this operation if None dont save to file \",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"ckele\",\"text\":\"    \\\"verbose\\\"    : True       # (bool or int)       print / plot information about this step\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"7fag1\",\"text\":\"}\",\"type\":\"unstyled\"}],\"entityMap\":{}}},\"7\":{\"type\":\"code_insert\",\"mutability\":\"IMMUTABLE\",\"data\":{\"blocks\":[{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"a97jg\",\"text\":\"#Stack Processing Parameter for cell detection\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"e1jr6\",\"text\":\"StackProcessingParameter = {\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"d2jb2\",\"text\":\"    #max number of parallel processes. Be careful of the memory footprint of each process!\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"1a3bk\",\"text\":\"    \\\"processes\\\" : os.cpu_count(),\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"d3u6e\",\"text\":\"\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"bjf0o\",\"text\":\"    #chunk sizes: number of planes processed at once\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"4bh7c\",\"text\":\"    #optimized for 64GB RAM, can be higher if more available\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"c6bhq\",\"text\":\"    \\\"chunkSizeMax\\\" : 400,\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"atp9k\",\"text\":\"    \\\"chunkSizeMin\\\" : 100,\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"amvjn\",\"text\":\"    \\\"chunkOverlap\\\" : 20,\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"8vt3f\",\"text\":\"\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"e4oep\",\"text\":\"    #optimize chunk size and number to number of processes to limit the number of cycles\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"9s6s\",\"text\":\"    \\\"chunkOptimization\\\" : True,\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"1cd57\",\"text\":\"\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"6ej1u\",\"text\":\"    #increase chunk size for optimization (True, False or all = automatic)\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"1egsg\",\"text\":\"    \\\"chunkOptimizationSize\\\" : all,\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"2v4ig\",\"text\":\"\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"cu6t5\",\"text\":\"    \\\"processMethod\\\" : \\\"parallel\\\"\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"6k3q7\",\"text\":\"   };\",\"type\":\"unstyled\"}],\"entityMap\":{}}}}}","data":null,"protocol_id":58123,"case_id":0,"critical_ids":"","duration":0,"original_id":0,"number":"7.1","cases":[],"critical":null},{"id":1345012,"guid":"77FEA1E08D2711ECB34AA97DEFE89C99","previous_id":1344933,"previous_guid":"FD1F21108D1811ECB34AA97DEFE89C99","section":"\u003cp\u003eAtlas alignment with Dockerized Clearmap pipelines \u003c/p\u003e","section_color":"#EA9F6C","section_duration":0,"is_substep":false,"step":"{\"blocks\":[{\"key\":\"a1upt\",\"text\":\"Copy the 01_preprocess_process_Ilastik_run_this.py file into the folder and rename into process_Ilastik_run_this.py\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[{\"style\":\"bold\",\"offset\":76,\"length\":39}],\"entityRanges\":[],\"data\":{}},{\"key\":\"d9kf0\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"dqqsa\",\"text\":\"Specifically, the file should look like this: \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"3su8v\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"1u7km\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"678tb\",\"text\":\" \",\"type\":\"atomic\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[{\"key\":0,\"offset\":0,\"length\":1}],\"data\":{}},{\"key\":\"7q5nk\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"5n7da\",\"text\":\"This will generate (by default) three image stacks downsampled to 25µm/voxel, suitable for alignment to the Allen Brain Atlas. \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}}],\"entityMap\":{\"0\":{\"type\":\"code_insert\",\"mutability\":\"IMMUTABLE\",\"data\":{\"blocks\":[{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"34c1d\",\"text\":\"# -*- coding: utf-8 -*-\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"94of\",\"text\":\"\\\"\\\"\\\"\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"4o594\",\"text\":\"Template to run the processing pipeline\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"av0e1\",\"text\":\"\\\"\\\"\\\"\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"9amuk\",\"text\":\"\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"415v5\",\"text\":\"import os,numpy, sys\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"3lcps\",\"text\":\"\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"2fg31\",\"text\":\"#pre-execute to make sure that Clearmap modules can be loaded\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"71or1\",\"text\":\"basedir = os.path.abspath('/CloudMap/FriendlyClearmap/clearmap/')\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"2n040\",\"text\":\"\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"3qqrq\",\"text\":\"#insert into system folder\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"an9pt\",\"text\":\"sys.path.insert(0, basedir)\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"5qrdf\",\"text\":\"\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"8s5uk\",\"text\":\"import ClearMap\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"eum28\",\"text\":\"\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"a9ka7\",\"text\":\"#load the parameters:\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"6ga3k\",\"text\":\"#with parameter file in the data folder\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"7d5vq\",\"text\":\"parameter_filename = '/CloudMap/Data/parameter_file_Ilastik_template.py'\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"fhkhd\",\"text\":\"exec(open(parameter_filename).read())\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"ellge\",\"text\":\"\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"cig9l\",\"text\":\"\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"406tc\",\"text\":\"#resampling operations:\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"cbiu2\",\"text\":\"#######################\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"8sifc\",\"text\":\"#resampling for the correction of stage movements during the acquisition between channels:\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"4t9ni\",\"text\":\"resampleData(**CorrectionResamplingParameterCfos);\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"kcg7\",\"text\":\"resampleData(**CorrectionResamplingParameterAutoFluo);\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"73h72\",\"text\":\"\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"7i6se\",\"text\":\"#Downsampling for alignment to the Atlas:\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"edtpt\",\"text\":\"resampleData(**RegistrationResamplingParameter);\",\"type\":\"unstyled\"}],\"entityMap\":{}}}}}","data":null,"protocol_id":58123,"case_id":0,"critical_ids":"","duration":0,"original_id":0,"number":"8","cases":[],"critical":null},{"id":1350734,"guid":"E9747200936711EC97C5D9E37D93B72F","previous_id":1345012,"previous_guid":"77FEA1E08D2711ECB34AA97DEFE89C99","section":"\u003cp\u003eAtlas alignment with Dockerized Clearmap pipelines \u003c/p\u003e","section_color":"#EA9F6C","section_duration":0,"is_substep":false,"step":"{\"blocks\":[{\"key\":\"fp7i6\",\"text\":\"Subsequently, run the Docker container for the first time. If everything goes according to plan, this will generate three additional tiffstacks downsampled to 25µm/voxel, suitable for alignment to the Allen Brain Atlas. The Docker container should finish after running. \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"9nk18\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"5s4bs\",\"text\":\"On Windows, open power shell and adapt the following code: \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[{\"style\":\"bold\",\"offset\":0,\"length\":10}],\"entityRanges\":[],\"data\":{}},{\"key\":\"csl7b\",\"text\":\" \",\"type\":\"atomic\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[{\"key\":0,\"offset\":0,\"length\":1}],\"data\":{}},{\"key\":\"cnuh0\",\"text\":\" Note that file paths must not end on a trailing backslash. \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"4n8jq\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"7tu7t\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"766ku\",\"text\":\"On Linux, open a terminal and run the following command: \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[{\"style\":\"bold\",\"offset\":0,\"length\":8}],\"entityRanges\":[],\"data\":{}},{\"key\":\"f1obq\",\"text\":\" \",\"type\":\"atomic\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[{\"key\":1,\"offset\":0,\"length\":1}],\"data\":{}},{\"key\":\"vn45\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"1n5nj\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}}],\"entityMap\":{\"0\":{\"type\":\"code_insert\",\"mutability\":\"IMMUTABLE\",\"data\":{\"blocks\":[{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"7c6g3\",\"text\":\"docker run -it --rm -v C:\\\\path\\\\to\\\\brain:/CloudMap/Data \",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"dnso1\",\"text\":\"-v C:\\\\path\\\\to\\\\atlas\\\\folder:/CloudMap/Data/atlas_p21 \",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"cc2sa\",\"text\":\"friendly_clearmap:3.0 ;\",\"type\":\"unstyled\"}],\"entityMap\":{}}},\"1\":{\"type\":\"code_insert\",\"mutability\":\"IMMUTABLE\",\"data\":{\"blocks\":[{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"c70uq\",\"text\":\"docker run -it --rm -v /path/to/brain:/CloudMap/Data \",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"eesgg\",\"text\":\"-v /path/to/atlas/folder:/CloudMap/Data/atlas_p21\",\"type\":\"unstyled\"}],\"entityMap\":{}}}}}","data":null,"protocol_id":58123,"case_id":0,"critical_ids":"","duration":0,"original_id":0,"number":"9","cases":[],"critical":null},{"id":1350736,"guid":"4E2552F0936D11ECB9824159AED59960","previous_id":1350734,"previous_guid":"E9747200936711EC97C5D9E37D93B72F","section":"\u003cp\u003eAtlas alignment with Dockerized Clearmap pipelines \u003c/p\u003e","section_color":"#EA9F6C","section_duration":0,"is_substep":false,"step":"{\"blocks\":[{\"key\":\"foeut\",\"text\":\"Atlas alignment using BigWarp\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[{\"style\":\"bold\",\"offset\":0,\"length\":29}],\"entityRanges\":[],\"data\":{}},{\"key\":\"4ucqt\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"4u48p\",\"text\":\"(In Windows/Linux, the Docker container should have finished) \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"j9f0\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"8aeai\",\"text\":\"1. In FIJI/Imagej. open both the atlas stack (e.g. template_25.tif) and the autofluo_resampled.tif files. \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"c3l0l\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"3o602\",\"text\":\"2. Open BigWarp (Plugins -\\u003e BigDataViewer -\\u003e BigWarp) \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"9s3pi\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"7rpg9\",\"text\":\"3. With BigWarp, open the atlas template as moving image, and autofluo_resampled as target image: \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"b6iit\",\"text\":\"  \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[{\"key\":0,\"offset\":0,\"length\":1}],\"data\":{}},{\"key\":\"aulua\",\"text\":\"4. You should now see your autofluo_resampled on the left, and the atlas template on the right. \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"fsbe9\",\"text\":\"  \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[{\"key\":1,\"offset\":0,\"length\":1}],\"data\":{}},{\"key\":\"fm0hc\",\"text\":\"5. Go to the sagittal plane in both: \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"fm29t\",\"text\":\"- Ctrl+A should change to a ZX projection \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"fercp\",\"text\":\"- Press Z to fix rotation around the Z (originally Y) axis\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"bl2cl\",\"text\":\"- Use the arrow keys to rotate around the axis until the orientations are roughly similar \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"6t8k\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"7p0jl\",\"text\":\"6. Use the mosue wheel to scroll to a similar location in both images. Suggested: \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"dauln\",\"text\":\"    - Frontal Pole\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"2raq1\",\"text\":\"    - Anterior Commissure crossing over \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"bqp3p\",\"text\":\"    - Maximum extent of the Somatosensory Cortex Barrel Field\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"d1li1\",\"text\":\"    - Hippocampal landmarks, e.g. just before Fornix projects entirely ventrally\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"ber66\",\"text\":\"    - Posterior pole of V1 \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"6vjf7\",\"text\":\"    - Cerbellar regions (if applicable) \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"dqg62\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"81j2q\",\"text\":\"7. Fine-tune the autofluo_resampled projection to match the coronal plane of the atlas template: \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"8c25f\",\"text\":\"- Left-click on the point in the autofluo_resampled image that you would like to use as center of rotation\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"1ok8c\",\"text\":\"- Carefully move the mouse to rotate the cutting plane in 3D space. Repeat until it matches\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"6gop7\",\"text\":\"- To reset, press Ctrl+A, then repeat step 5. \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"2a6kv\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"f0e2l\",\"text\":\"8. Generate landmarks: \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"ejnn0\",\"text\":\"- Press spacebar to start landmark mode. \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"73ucs\",\"text\":\"- Identify corresponding points.\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"52sof\",\"text\":\"- Mark one point in autofluo_resampled, then immediately mark the corresponding point in the atlas template. \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[{\"style\":\"italic\",\"offset\":40,\"length\":17}],\"entityRanges\":[],\"data\":{}},{\"key\":\"aff5h\",\"text\":\"(Note that clicking several points in the same image will lead to non-matched point sets, which will not work for alignment later). \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"d22os\",\"text\":\"- Mark between 5 and 20 point pairs per location. \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"700or\",\"text\":\"- Take care to mark a diversity of matched locations (e.g. pial surface, white matter, layer 4, hippcoampal landmarks) \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"44mui\",\"text\":\"- To change perspective (or undo landmarks), disengage landmark mode by pressing spacebar again. Re-engage once you are happy with the result. \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"42vu7\",\"text\":\"  \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[{\"key\":2,\"offset\":0,\"length\":1}],\"data\":{}},{\"key\":\"f4bch\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"epoc0\",\"text\":\"9. Repeat for at least all the locations mentioned under 6)\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"8eg67\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"1me5m\",\"text\":\"10. Save file and transform: \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"blg4e\",\"text\":\"- Save the landmarks by clicking File -\\u003e Export Landmarks in the landmarks table on the right. \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"3qocj\",\"text\":\"- Open the landmarks.csv file with an editor (e.g. LibreOffice Calc or use the (XXX doublecheck) provided python script. \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[{\"key\":3,\"offset\":51,\"length\":16}],\"data\":{}},{\"key\":\"3e9ce\",\"text\":\"- The first three columns are the point coordinates for the autofluo_resampled, those should be in  pixel coordinates and generally not be larger than 400 (depending on stack dimensions). Open a new file, write as follows:\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"4o3nt\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"6tvvh\",\"text\":\" \",\"type\":\"atomic\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[{\"key\":4,\"offset\":0,\"length\":1}],\"data\":{}},{\"key\":\"ktca\",\"text\":\"- Save as csv with the title \\\"autofluo_landmarks.txt.csv\\\". Importantly, save with spaces as separators instead of commas. \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"fs4m7\",\"text\":\"- Close the Calc window, then remove the .csv ending from the file. \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"f2so8\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"8jgc6\",\"text\":\"- Repeat for the atlas template values, saving in a separate file as \\\"atlas_landmarks.txt.csv\\\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"9ben2\",\"text\":\"(Note: If the values are much higher (e.g. \\u003e 1000), then this is due to ImageJ representing them in micrometers and not in pixel values. To arrive at the correct pixel values, divide by 25 (in case of a 25 µm/voxel template). \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"49si0\",\"text\":\"- Again, close the Calc window, then remove the .csv ending from the file. \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"4ffrm\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"9ho0d\",\"text\":\"- If you haven't, move both atlas_landmarks.txt and autofluo_landmarks.txt into the brain folder. \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"2jus9\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}}],\"entityMap\":{\"0\":{\"type\":\"image\",\"mutability\":\"MUTABLE\",\"data\":{\"guid\":\"8B58D6A0937311ECB9824159AED59960\",\"height\":134.97358490566037,\"id\":374065,\"is_video\":false,\"legend\":\"\",\"mime\":\"image/png\",\"original_name\":\"image.png\",\"placeholder\":\"https://content.protocols.io/files/h4t8bqtzx.jpg\",\"source\":\"https://content.protocols.io/files/mpjtbqtzx.jpg\",\"type\":1,\"webp_source\":\"https://content.protocols.io/files/mpjrbqtzx.webp\",\"width\":194.3913043478261}},\"1\":{\"type\":\"image\",\"mutability\":\"MUTABLE\",\"data\":{\"guid\":\"62476BE0937411ECB9824159AED59960\",\"height\":231.01818181818186,\"id\":374070,\"is_video\":false,\"legend\":\"\",\"mime\":\"image/png\",\"original_name\":\"image.png\",\"placeholder\":\"https://content.protocols.io/files/h4uabqtzx.jpg\",\"source\":\"https://content.protocols.io/files/mpjybqtzx.jpg\",\"type\":1,\"webp_source\":\"https://content.protocols.io/files/mpjxbqtzx.webp\",\"width\":397.0625000000001}},\"2\":{\"type\":\"image\",\"mutability\":\"MUTABLE\",\"data\":{\"guid\":\"975356F0937911ECB9824159AED59960\",\"height\":320,\"id\":374082,\"is_video\":false,\"legend\":\"\",\"mime\":\"image/png\",\"original_name\":\"image.png\",\"placeholder\":\"https://content.protocols.io/files/h4t6bqtzx.jpg\",\"source\":\"https://content.protocols.io/files/mpkcbqtzx.jpg\",\"type\":1,\"webp_source\":\"https://content.protocols.io/files/mpkbbqtzx.webp\",\"width\":550}},\"3\":{\"type\":\"link\",\"mutability\":\"MUTABLE\",\"data\":{\"guid\":\"09FF87B0937911ECB9824159AED59960\",\"url\":\"https://www.libreoffice.org/download/download/\"}},\"4\":{\"type\":\"tables\",\"mutability\":\"IMMUTABLE\",\"data\":{\"cellsMeta\":{},\"colTitles\":[\"\",\"\",\"\"],\"colWidths\":[100,100,100],\"data\":[[\"point\",\"\",\"\"],[\"(number of points, e.g. 70)\",\"\",\"\"],[\"(x values)\",\"(y values)\",\"(z values)\"]],\"guid\":\"CF3BD1E0937A11ECB9824159AED59960\",\"isJexcelDataFormat\":true,\"legend\":\"\",\"mergeCells\":{},\"printData\":[[\"point\",\"\",\"\"],[\"(number of points, e.g. 70)\",\"\",\"\"],[\"(x values)\",\"(y values)\",\"(z values)\"]],\"rowHeights\":[23,23,23]}}}}","data":null,"protocol_id":58123,"case_id":0,"critical_ids":"","duration":0,"original_id":0,"number":"10","cases":[],"critical":null},{"id":1367344,"guid":"2F0BFDF0A85E11EC8F1C09F3EF406B7F","previous_id":1369227,"previous_guid":"9A8872C0AA4D11EC8EB013826256DADD","section":"\u003cp\u003eAtlas alignment with Dockerized Clearmap pipelines \u003c/p\u003e","section_color":"#EA9F6C","section_duration":0,"is_substep":false,"step":"{\"blocks\":[{\"key\":\"1c2n3\",\"text\":\"Copy the 02_process_Ilastik_run_this.py into the folder and rename into process_Ilastik_run_this.py (overwrite the previous file of that name) \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[{\"style\":\"bold\",\"offset\":60,\"length\":39}],\"entityRanges\":[],\"data\":{}},{\"key\":\"4usaj\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"4pvqq\",\"text\":\"The first block will align (register) the two downsampled stacks onto each other, which in our experience is not necessary. If you are using only a single channel as source, then it is definitely not necessary and shouid be commented out. \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"35fvr\",\"text\":\"Subsequently, the downsampled stack is registered to the atlas using Elastix. Unless specified otherwise, Elastix will use the landmark files you provided as a result of step 10. \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"dd4vj\",\"text\":\" \",\"type\":\"atomic\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[{\"key\":0,\"offset\":0,\"length\":1}],\"data\":{}},{\"key\":\"fvar2\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}}],\"entityMap\":{\"0\":{\"type\":\"code_insert\",\"mutability\":\"IMMUTABLE\",\"data\":{\"blocks\":[{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"34c1d\",\"text\":\"#Alignment operations:\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"debhs\",\"text\":\"######################\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"enniu\",\"text\":\"#correction between channels:\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"a1mob\",\"text\":\"#resultDirectory  = alignData(**CorrectionAlignmentParameter);\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"1o2i0\",\"text\":\"\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"9gkl4\",\"text\":\"#alignment to the Atlas:\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"83de8\",\"text\":\"resultDirectory  = alignData(**RegistrationAlignmentParameter);\",\"type\":\"unstyled\"}],\"entityMap\":{}}}}}","data":null,"protocol_id":58123,"case_id":0,"critical_ids":"","duration":0,"original_id":0,"number":"12","cases":[],"critical":null},{"id":1369223,"guid":"BA7ECF10AA4911ECBDCC5570CFC6BD36","previous_id":1367344,"previous_guid":"2F0BFDF0A85E11EC8F1C09F3EF406B7F","section":"\u003cp\u003eAtlas alignment with Dockerized Clearmap pipelines \u003c/p\u003e","section_color":"#EA9F6C","section_duration":0,"is_substep":true,"step":"{\"blocks\":[{\"key\":\"6p68g\",\"text\":\"Next, the cells are detected, either using Ilastik (default) or the built-in thresholding approach of Clearmap1. This should result in a cells.npy file being saved in the same directory. \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"a4jj8\",\"text\":\" \",\"type\":\"atomic\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[{\"key\":0,\"offset\":0,\"length\":1}],\"data\":{}},{\"key\":\"8ncab\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"4naif\",\"text\":\"Alternatively, if you generated the cells externally, skip this step (comment out ). Make sure you generated a \\\"cells.npy\\\" file from your external data and placed in the folder instead. \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[{\"style\":\"bold\",\"offset\":0,\"length\":85}],\"entityRanges\":[],\"data\":{}}],\"entityMap\":{\"0\":{\"type\":\"code_insert\",\"mutability\":\"IMMUTABLE\",\"data\":{\"blocks\":[{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"66utg\",\"text\":\"#Cell detection:\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"4gkpd\",\"text\":\"################\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"amifq\",\"text\":\"detectCells(**ImageProcessingParameter);\",\"type\":\"unstyled\"}],\"entityMap\":{}}}}}","data":null,"protocol_id":58123,"case_id":0,"critical_ids":"","duration":0,"original_id":0,"number":"12.1","cases":[],"critical":null},{"id":1369224,"guid":"CBE6D540AA4911ECBDCC5570CFC6BD36","previous_id":1369223,"previous_guid":"BA7ECF10AA4911ECBDCC5570CFC6BD36","section":"\u003cp\u003eAtlas alignment with Dockerized Clearmap pipelines \u003c/p\u003e","section_color":"#EA9F6C","section_duration":0,"is_substep":true,"step":"{\"blocks\":[{\"key\":\"3habp\",\"text\":\"Subsequently, the detected cells willl be loaded. \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"7aphb\",\"text\":\" \",\"type\":\"atomic\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[{\"key\":0,\"offset\":0,\"length\":1}],\"data\":{}},{\"key\":\"ftkgj\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"9p3ca\",\"text\":\"Then, Elastix will be used to transform the points, first for the inter-channel correction alignment, and then for the atlas registration. By default it is assumed that the inter-channel alignment is skipped, so only uncomment the three steps if you are actually using it. \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"685ag\",\"text\":\" \",\"type\":\"atomic\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[{\"key\":1,\"offset\":0,\"length\":1}],\"data\":{}},{\"key\":\"d1ngu\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"dcg6k\",\"text\":\"Subsequently, generate heatmaps. The intensity heatmaps are mostly interesting if you are using the built-in Clearmap1 built-in processing. If using Ilastik (default) or external coordinates, then it is commented out. \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"2eu8g\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"3bro3\",\"text\":\" \",\"type\":\"atomic\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[{\"key\":2,\"offset\":0,\"length\":1}],\"data\":{}},{\"key\":\"fbpfv\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"819v6\",\"text\":\"Lastly, the overview tables are generated. Again, the intensities-adjusted table is mostly relevant for the CM1 built-in cell segmentation, and is deactivated by default. If you are using the CCF3 reference atlas, be aware that there are some regions in the annotation file that do not have a matching Region_IDs.csv entry. If you are using the CCF3, make sure to uncomment the line correcting the annotation values. \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"769st\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"c83nc\",\"text\":\" \",\"type\":\"atomic\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[{\"key\":3,\"offset\":0,\"length\":1}],\"data\":{}},{\"key\":\"fqmke\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"colp7\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"44sgq\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}}],\"entityMap\":{\"0\":{\"type\":\"code_insert\",\"mutability\":\"IMMUTABLE\",\"data\":{\"blocks\":[{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"cmfpc\",\"text\":\"#Filtering of the detected peaks:\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"aq4om\",\"text\":\"#################################\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"fvi28\",\"text\":\"#Loading the results:\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"5f25o\",\"text\":\"points, intensities = io.readPoints(ImageProcessingParameter[\\\"sink\\\"]);\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"5ck3j\",\"text\":\"\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"6decu\",\"text\":\"#Thresholding: the threshold parameter is either intensity or size in voxel, depending on the chosen \\\"row\\\"\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"b0mcj\",\"text\":\"#row = (0,0) : peak intensity from the raw data\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"10rc3\",\"text\":\"#row = (1,1) : peak intensity from the DoG filtered data\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"3jpen\",\"text\":\"#row = (2,2) : peak intensity from the background subtracted data\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"a6i0l\",\"text\":\"#row = (3,3) : voxel size from the watershed\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"2qgp\",\"text\":\"points, intensities = thresholdPoints(points, intensities, threshold = 20, row = 1);\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"41u2h\",\"text\":\"io.writePoints(FilteredCellsFile, (points, intensities));\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"65j3i\",\"text\":\"\",\"type\":\"unstyled\"}],\"entityMap\":{}}},\"1\":{\"type\":\"code_insert\",\"mutability\":\"IMMUTABLE\",\"data\":{\"blocks\":[{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"5b42q\",\"text\":\"# Transform point coordinates\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"cebe0\",\"text\":\"#############################\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"ab271\",\"text\":\"points = io.readPoints(CorrectionResamplingPointsParameter[\\\"pointSource\\\"]);\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"45i04\",\"text\":\"#points = resamplePoints(**CorrectionResamplingPointsParameter);\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"1lb6v\",\"text\":\"#points = transformPoints(points, transformDirectory = CorrectionAlignmentParameter[\\\"resultDirectory\\\"], indices = False, resultDirectory = None);\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"37h2i\",\"text\":\"#CorrectionResamplingPointsInverseParameter[\\\"pointSource\\\"] = points;\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"6i74q\",\"text\":\"points = resamplePointsInverse(**CorrectionResamplingPointsInverseParameter);\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"7fa6o\",\"text\":\"RegistrationResamplingPointParameter[\\\"pointSource\\\"] = points;\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"dlc6f\",\"text\":\"points = resamplePoints(**RegistrationResamplingPointParameter);\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"5kjdt\",\"text\":\"points = transformPoints(points, transformDirectory = RegistrationAlignmentParameter[\\\"resultDirectory\\\"], indices = False, resultDirectory = None);\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"cbk5o\",\"text\":\"io.writePoints(TransformedCellsFile, points);\",\"type\":\"unstyled\"}],\"entityMap\":{}}},\"2\":{\"type\":\"code_insert\",\"mutability\":\"IMMUTABLE\",\"data\":{\"blocks\":[{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"7g7ht\",\"text\":\"# Heat map generation\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"bgl5j\",\"text\":\"#####################\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"4l5vg\",\"text\":\"points = io.readPoints(TransformedCellsFile)\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"6lcpt\",\"text\":\"#intensities = io.readPoints(FilteredCellsFile[1])\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"652o6\",\"text\":\"\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"f215f\",\"text\":\"#Without weigths:\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"74b4t\",\"text\":\"vox = voxelize(points, AtlasFile, **voxelizeParameter);\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"38av3\",\"text\":\"io.writeData(os.path.join(BaseDirectory, 'cells_heatmap.tif'), vox.astype('int32'));\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"131h4\",\"text\":\"\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"7ltjs\",\"text\":\"#With weigths from the intensity file (here raw intensity):\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"d7cpo\",\"text\":\"#voxelizeParameter[\\\"weights\\\"] = intensities[:,0].astype(float);\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"87udq\",\"text\":\"#vox = voxelize(points, AtlasFile, **voxelizeParameter);\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"35ejg\",\"text\":\"#io.writeData(os.path.join(BaseDirectory, 'cells_heatmap_weighted.tif'), #vox.astype('int32'));\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"575dj\",\"text\":\"\",\"type\":\"unstyled\"}],\"entityMap\":{}}},\"3\":{\"type\":\"code_insert\",\"mutability\":\"IMMUTABLE\",\"data\":{\"blocks\":[{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"ed11d\",\"text\":\"#Table generation:\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"7ocbc\",\"text\":\"##################\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"1mua6\",\"text\":\"'''\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"bs96p\",\"text\":\"#With integrated weigths from the intensity file (here raw intensity):\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"5qt91\",\"text\":\"ids, counts = countPointsInRegions(points, labeledImage = LabeledImage, annotations = AnnotationFile, intensities = intensities, intensityRow = 0);\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"897fu\",\"text\":\"table = numpy.zeros(ids.shape, dtype=[('id','int64'),('counts','f8'),('name', 'a256')])\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"28rd\",\"text\":\"\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"1u3tt\",\"text\":\"#Optional: if no collapse is used (collapse = None, or left out entirely)\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"cmi5v\",\"text\":\"#ids = [0 if (x==1216) or (x==2656) or (x==12096) else x for x in ids]\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"ebreg\",\"text\":\"\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"5nqti\",\"text\":\"table[\\\"id\\\"] = ids;\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"8j3iu\",\"text\":\"table[\\\"counts\\\"] = counts;\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"8cvm2\",\"text\":\"table[\\\"name\\\"] = labelToName(ids);\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"8d260\",\"text\":\"io.writeTable(os.path.join(BaseDirectory, 'Annotated_counts_intensities.csv'), table);\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"483ud\",\"text\":\"'''\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"16lbf\",\"text\":\"\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"4g5ja\",\"text\":\"#Without weigths (pure cell number):\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"4niee\",\"text\":\"ids, counts = countPointsInRegions(points, labeledImage = LabeledImage, annotations = AnnotationFile, intensities = None);\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"8j431\",\"text\":\"table = numpy.zeros(ids.shape, dtype=[('id','int64'),('counts','f8'),('name', 'a256')])\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"d6ufe\",\"text\":\"\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"2s2f6\",\"text\":\"#Optional: if no collapse is used (collapse = None, or left out entirely)\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"enrdg\",\"text\":\"#ids = [0 if (x==1216) or (x==2656) or (x==12096) else x for x in ids]\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"2evi3\",\"text\":\"\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"b1ell\",\"text\":\"table[\\\"id\\\"] = ids;\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"hikb\",\"text\":\"table[\\\"counts\\\"] = counts;\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"6uvfj\",\"text\":\"table[\\\"name\\\"] = labelToName(ids);\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"efgul\",\"text\":\"io.writeTable(os.path.join(BaseDirectory, 'Annotated_counts.csv'), table);\",\"type\":\"unstyled\"}],\"entityMap\":{}}}}}","data":null,"protocol_id":58123,"case_id":0,"critical_ids":"","duration":0,"original_id":0,"number":"12.2","cases":[],"critical":null},{"id":1369226,"guid":"A38101E0AA4C11EC8EB013826256DADD","previous_id":1369224,"previous_guid":"CBE6D540AA4911ECBDCC5570CFC6BD36","section":"\u003cp\u003eAtlas alignment with Dockerized Clearmap pipelines \u003c/p\u003e","section_color":"#EA9F6C","section_duration":0,"is_substep":false,"step":"{\"blocks\":[{\"key\":\"fp7i6\",\"text\":\"Subsequently, run the Docker container for the second time. If everything goes according to plan, this should generate a table for the cells per region.  The Docker container should finish after running. \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"9nk18\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"5s4bs\",\"text\":\"On Windows, open power shell and adapt the following code: \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[{\"style\":\"bold\",\"offset\":0,\"length\":11}],\"entityRanges\":[],\"data\":{}},{\"key\":\"csl7b\",\"text\":\" \",\"type\":\"atomic\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[{\"key\":0,\"offset\":0,\"length\":1}],\"data\":{}},{\"key\":\"8m0io\",\"text\":\"Note that file paths must not end on a trailing backslash. \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"e6u0e\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"e0tha\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"j7kq\",\"text\":\"On Linux, open a terminal and run the following code: \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[{\"style\":\"bold\",\"offset\":0,\"length\":8}],\"entityRanges\":[],\"data\":{}},{\"key\":\"96j7v\",\"text\":\" \",\"type\":\"atomic\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[{\"key\":1,\"offset\":0,\"length\":1}],\"data\":{}},{\"key\":\"41tj3\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}}],\"entityMap\":{\"0\":{\"type\":\"code_insert\",\"mutability\":\"IMMUTABLE\",\"data\":{\"blocks\":[{\"data\":[],\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"7c6g3\",\"text\":\"docker run -it --rm -v C:\\\\path\\\\to\\\\brain:/CloudMap/Data \",\"type\":\"unstyled\"},{\"data\":[],\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"dnso1\",\"text\":\"-v C:\\\\path\\\\to\\\\atlas\\\\folder:/CloudMap/Data/atlas_p21 \",\"type\":\"unstyled\"},{\"data\":[],\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"cc2sa\",\"text\":\"friendly_clearmap:3.0 ;\",\"type\":\"unstyled\"}],\"entityMap\":{}}},\"1\":{\"type\":\"code_insert\",\"mutability\":\"IMMUTABLE\",\"data\":{\"blocks\":[{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"7ldtm\",\"text\":\"docker run -it --rm -v path/to/brain:/CloudMap/Data \",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"cijus\",\"text\":\"-v /path/to/atlas/folder:/CloudMap/Data/atlas_p21 \",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"2kto2\",\"text\":\"friendly_clearmap:3.0\",\"type\":\"unstyled\"}],\"entityMap\":{}}}}}","data":null,"protocol_id":58123,"case_id":0,"critical_ids":"","duration":0,"original_id":0,"number":"13","cases":[],"critical":null},{"id":1369227,"guid":"9A8872C0AA4D11EC8EB013826256DADD","previous_id":1350736,"previous_guid":"4E2552F0936D11ECB9824159AED59960","section":"\u003cp\u003eAtlas alignment with Dockerized Clearmap pipelines \u003c/p\u003e","section_color":"#EA9F6C","section_duration":0,"is_substep":false,"step":"{\"blocks\":[{\"key\":\"754gd\",\"text\":\"If you have produced external cell annotations, e.g. via Arivis or as a list of manual coordinates, do the following: \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"36krk\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"bctdl\",\"text\":\"- Make sure your coordinates are in an excel file with the only three columns corresponding to X, Y, and Z coordinates. \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"7u7hv\",\"text\":\"- Run a python script like the following (not in the docker container, e.g. use Spyder via Anacona): \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"39ivr\",\"text\":\" \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"dbfot\",\"text\":\"Note that this assumes that the excel does not contain a header (x,y,z,... in the first line). If it does, then remove them from the file before proceeding.  \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"a07sd\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"239bq\",\"text\":\" \",\"type\":\"atomic\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[{\"key\":0,\"offset\":0,\"length\":1}],\"data\":{}},{\"key\":\"8gftc\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}}],\"entityMap\":{\"0\":{\"type\":\"code_insert\",\"mutability\":\"IMMUTABLE\",\"data\":{\"blocks\":[{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"7e7md\",\"text\":\"# -*- coding: utf-8 -*-\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"2cum7\",\"text\":\"import pandas as pd\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"2pkp7\",\"text\":\"import numpy as np \",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"cn46d\",\"text\":\"\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"4q5fr\",\"text\":\"#load the file \",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"dn80f\",\"text\":\"coordinates = pd.read_excel(\\\"path_to_excel_file\\\")\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"82tui\",\"text\":\"\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"1pol9\",\"text\":\"#save as numpy \",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"6r74n\",\"text\":\"coordinates_np = coordinates.to_numpy()\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"f5hci\",\"text\":\"coordinates.astype(int)\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"7d3g4\",\"text\":\"np.save(coordinates_np,\\\"brain_folder_path/cells.npy)\",\"type\":\"unstyled\"},{\"data\":{},\"depth\":0,\"entityRanges\":[],\"inlineStyleRanges\":[],\"key\":\"76u2a\",\"text\":\"\",\"type\":\"unstyled\"}],\"entityMap\":{}}}}}","data":null,"protocol_id":58123,"case_id":0,"critical_ids":"","duration":0,"original_id":0,"number":"11","cases":[],"critical":null},{"id":1369228,"guid":"03150EA0AA5011ECB4A1334907E4A4A6","previous_id":1369226,"previous_guid":"A38101E0AA4C11EC8EB013826256DADD","section":"\u003cp\u003eAtlas alignment with Dockerized Clearmap pipelines \u003c/p\u003e","section_color":"#EA9F6C","section_duration":0,"is_substep":true,"step":"{\"blocks\":[{\"key\":\"93hmo\",\"text\":\"Hooray! If everything worked, you should have: \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"1bo\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"86orm\",\"text\":\"- an atlas-aligned set of points, both in .npy form (cells_aligned.npy) \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"cu0ci\",\"text\":\"- a region table (Annotated_counts.csv) with cell counts per region. \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"a8a07\",\"text\":\"- A heatmap with cell densities in the same space as your atlas. \",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}}],\"entityMap\":{}}","data":null,"protocol_id":58123,"case_id":0,"critical_ids":"","duration":0,"original_id":0,"number":"13.1","cases":[],"critical":null}],"template_id":5,"title":"Run Clearmap 1 docker","title_html":"Run Clearmap 1 docker","type_id":1,"units":[{"id":1,"type_id":3,"name":"µL","can_manage":0,"read_only":0},{"id":2,"type_id":3,"name":"mL","can_manage":0,"read_only":0},{"id":3,"type_id":3,"name":"L","can_manage":0,"read_only":0},{"id":4,"type_id":3,"name":"µg","can_manage":0,"read_only":0},{"id":5,"type_id":3,"name":"mg","can_manage":0,"read_only":0},{"id":6,"type_id":3,"name":"g","can_manage":0,"read_only":0},{"id":7,"type_id":3,"name":"kg","can_manage":0,"read_only":0},{"id":8,"type_id":3,"name":"ng","can_manage":0,"read_only":0},{"id":9,"type_id":3,"name":"Hz","can_manage":0,"read_only":0},{"id":10,"type_id":24,"name":"°C","can_manage":0,"read_only":0},{"id":11,"type_id":24,"name":"°К","can_manage":0,"read_only":0},{"id":12,"type_id":24,"name":"°F","can_manage":0,"read_only":0},{"id":13,"type_id":25,"name":"Mass Percent","can_manage":0,"read_only":0},{"id":14,"type_id":25,"name":"% volume","can_manage":0,"read_only":0},{"id":15,"type_id":25,"name":"Mass / % volume","can_manage":0,"read_only":0},{"id":16,"type_id":25,"name":"Parts per Million (PPM)","can_manage":0,"read_only":0},{"id":17,"type_id":25,"name":"Parts per Billion (PPB)","can_manage":0,"read_only":0},{"id":18,"type_id":25,"name":"Parts per Trillion (PPT)","can_manage":0,"read_only":0},{"id":19,"type_id":25,"name":"Mole Fraction","can_manage":0,"read_only":0},{"id":20,"type_id":25,"name":"Mole Percent","can_manage":0,"read_only":0},{"id":21,"type_id":25,"name":"Molarity (M)","can_manage":0,"read_only":1},{"id":22,"type_id":25,"name":"Molarity (m)","can_manage":0,"read_only":0},{"id":23,"type_id":25,"name":"Genome copies per ml","can_manage":0,"read_only":0},{"id":24,"type_id":3,"name":"μV","can_manage":0,"read_only":0},{"id":25,"type_id":3,"name":"ms","can_manage":0,"read_only":0},{"id":26,"type_id":3,"name":"pg","can_manage":0,"read_only":0},{"id":27,"type_id":25,"name":"Molarity dilutions","can_manage":0,"read_only":0},{"id":28,"type_id":25,"name":"millimolar (mM)","can_manage":0,"read_only":0},{"id":29,"type_id":25,"name":"micromolar (µM)","can_manage":0,"read_only":0},{"id":30,"type_id":25,"name":"nanomolar (nM)","can_manage":0,"read_only":0},{"id":31,"type_id":25,"name":"picomolar (pM)","can_manage":0,"read_only":0},{"id":32,"type_id":24,"name":"Room temperature","can_manage":0,"read_only":0},{"id":33,"type_id":30,"name":"rpm","can_manage":0,"read_only":0},{"id":34,"type_id":30,"name":"x g","can_manage":0,"read_only":0},{"id":165,"type_id":24,"name":"On ice","can_manage":0,"read_only":0},{"id":200,"type_id":32,"name":"cm","can_manage":0,"read_only":0},{"id":201,"type_id":32,"name":"mm","can_manage":0,"read_only":0},{"id":202,"type_id":32,"name":"µm","can_manage":0,"read_only":0},{"id":203,"type_id":32,"name":"nm","can_manage":0,"read_only":0},{"id":204,"type_id":25,"name":"mg/mL","can_manage":0,"read_only":0},{"id":205,"type_id":25,"name":"µg/µL","can_manage":0,"read_only":0},{"id":206,"type_id":25,"name":"% (v/v)","can_manage":0,"read_only":0},{"id":1324,"type_id":30,"name":"rcf","can_manage":0,"read_only":0},{"id":1359,"type_id":35,"name":"Bar","can_manage":0,"read_only":0},{"id":1360,"type_id":35,"name":"Pa","can_manage":0,"read_only":0}],"uri":"run-clearmap-1-docker-b4zjqx4n","url":"https://www.protocols.io/view/run-clearmap-1-docker-b4zjqx4n","version_class":58123,"version_data":{"id":0,"code":"b4zjqx4n","version_class":58123,"parent_id":null,"parent_uri":null,"is_same_owner":false,"is_parent_public":false,"has_pending_merge_request":false,"has_approved_merge_request":false,"merge_request":null},"version_id":0,"version_uri":"run-clearmap-1-docker-eq2lynnkrvx9/v1","versions":[{"id":58123,"title":"Run Clearmap 1 docker","title_html":"Run Clearmap 1 docker","image":{"source":"https://www.protocols.io/img/default_protocol.png","webp_source":null,"placeholder":"https://www.protocols.io/img/default_protocol.png","webp_placeholder":null},"doi":"dx.doi.org/10.17504/protocols.io.eq2lynnkrvx9/v1","uri":"run-clearmap-1-docker-b4zjqx4n","published_on":1655470564,"modified_on":1684444158,"version_class":58123,"version_id":0,"version_code":"b4zjqx4n","version_uri":"run-clearmap-1-docker-eq2lynnkrvx9/v1","created_on":1644751266,"categories":null,"creator":{"name":"Moritz Negwer","affiliation":null,"affiliation_url":null,"username":"m4yle1w1w105vle1","link":null,"image":{"source":"https://lh3.googleusercontent.com/a/AATXAJyZGXwviv2oKW7mkTn6EzbKqzw5BX8ZA7sromcA=s96-c","placeholder":"https://lh3.googleusercontent.com/a/AATXAJyZGXwviv2oKW7mkTn6EzbKqzw5BX8ZA7sromcA=s96-c","webp_source":""}},"stats":{"number_of_comments":0,"last_comment_time":0}},{"id":76699,"title":"Run Clearmap 1 docker","title_html":"Run Clearmap 1 docker","image":{"source":"https://www.protocols.io/img/default_protocol.png","webp_source":null,"placeholder":"https://www.protocols.io/img/default_protocol.png","webp_placeholder":null},"doi":"dx.doi.org/10.17504/protocols.io.eq2lynnkrvx9/v2","uri":"run-clearmap-1-docker-cn53vg8n","published_on":1676454985,"modified_on":1676454985,"version_class":58123,"version_id":1,"version_code":"cn53vg8n","version_uri":"run-clearmap-1-docker-eq2lynnkrvx9/v2","created_on":1675906261,"categories":null,"creator":{"name":"Moritz Negwer","affiliation":null,"affiliation_url":null,"username":"m4yle1w1w105vle1","link":null,"image":{"source":"https://lh3.googleusercontent.com/a/AATXAJyZGXwviv2oKW7mkTn6EzbKqzw5BX8ZA7sromcA=s96-c","placeholder":"https://lh3.googleusercontent.com/a/AATXAJyZGXwviv2oKW7mkTn6EzbKqzw5BX8ZA7sromcA=s96-c","webp_source":""}},"stats":{"number_of_comments":0,"last_comment_time":0}}],"warning":""}